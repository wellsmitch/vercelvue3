"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[570],{57664:function(Y,P,t){t.d(P,{Z:function(){return f}});var M=t(24172),O=t(38497),S={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 708c-22.1 0-40-17.9-40-40s17.9-40 40-40 40 17.9 40 40-17.9 40-40 40zm62.9-219.5a48.3 48.3 0 00-30.9 44.8V620c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8v-21.5c0-23.1 6.7-45.9 19.9-64.9 12.9-18.6 30.9-32.8 52.1-40.9 34-13.1 56-41.6 56-72.7 0-44.1-43.1-80-96-80s-96 35.9-96 80v7.6c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V420c0-39.3 17.2-76 48.4-103.3C430.4 290.4 470 276 512 276s81.6 14.5 111.6 40.7C654.8 344 672 380.7 672 420c0 57.8-38.1 109.8-97.1 132.5z"}}]},name:"question-circle",theme:"filled"},m=S,A=t(24470),c=function(u,h){return O.createElement(A.Z,(0,M.Z)({},u,{ref:h,icon:m}))},x=O.forwardRef(c),f=x},48671:function(Y,P,t){t.r(P);var M=t(2927),O=t.n(M),S=t(39346),m=t.n(S),A=t(43953),c=t.n(A),x=t(91184),f=t.n(x),Z=t(9083),u=t.n(Z),h=t(4701),q=t(39495),U=t(8280),R=t(37823),j=t(45401),ee=t(98958),T=t(10145),E=t(99836),ne=t(4434),te=t(13133),p=t(70895),ae=t(3389),l=t(38497),F=t(57664),a=t(96469),Oe=U.Z.Paragraph,je=U.Z.Text,L="ExternalLib",oe=function(){var re=p.A.useForm(),se=u()(re,1),D=se[0],_e=(0,l.useState)(),w=u()(_e,2),y=w[0],ue=w[1],le=(0,l.useState)({}),W=u()(le,2),C=W[0],I=W[1],ie=(0,l.useState)({current:1,pageSize:5}),$=u()(ie,2),s=$[0],b=$[1];(0,l.useEffect)(function(){var o;(o=K.current)===null||o===void 0||o.reload()},[s]);var k=(0,q.useSelector)(function(o){return o.keywordns.keyword}),de=function(){var o=f()(c()().mark(function n(){var e;return c()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,h.d.k.getCodeListData("",{tableName:L,params:{count:1,skip:(s.current-1)*s.pageSize,limit:s.pageSize,where:{$and:[s.code?{code:{$regex:s.code,$options:"i"}}:null,s.name?{name:{$regex:s.name,$options:"i"}}:null,s.desc?{desc:{$regex:s.desc,$options:"i"}}:null],$or:[k?{code:{$regex:k,$options:"i"}}:{}]}}});case 2:return e=r.sent,ue(e),r.abrupt("return",e);case 5:case"end":return r.stop()}},n)}));return function(){return o.apply(this,arguments)}}(),ce=(0,l.useState)(!1),z=u()(ce,2),me=z[0],ve=z[1],fe=(0,l.useState)(""),V=u()(fe,2),Q=V[0],pe=V[1],he=(0,l.useState)([]),N=u()(he,2),be=N[0],B=N[1],K=(0,l.useRef)(),Ee=(0,l.useState)({}),G=u()(Ee,2),H=G[0],De=G[1],Ce=(0,l.useState)({a:1}),J=u()(Ce,2),ge=J[0],Me=J[1],X=function(n,e){if(n==="songyubin")Pe(e);else{R.ZP.error({content:"\u5BC6\u94A5\u4E0D\u6B63\u786E\uFF01"});return}},Pe=function(){var o=f()(c()().mark(function n(e){var _,r,i,d;return c()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return console.log("addFormIns.getFieldValue()",D.getFieldsValue()),_=C==null?void 0:C.formData,r=_.objectId,i=D.getFieldsValue(),g.next=5,h.d.k.addCodeListData("",{tableName:L,body:m()(m()({},i),{},{objectId:r||void 0,createdAt:void 0})});case 5:d=g.sent,d.objectId?(R.ZP.success({content:"\u521B\u5EFA\u6210\u529F\uFF01"}),B([]),D.resetFields(),I({show:!1}),b(r?m()({},s):{current:1,pageSize:5}),e.destroy()):R.ZP.warning({content:"\u521B\u5EFA\u5931\u8D25\uFF01"});case 7:case"end":return g.stop()}},n)}));return function(e){return o.apply(this,arguments)}}();return(0,l.useEffect)(function(){De({code:{show:!0,fixed:H},action:{show:!0,fixed:"right"}})},[]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ae.Z,{actionRef:K,params:ge,cardProps:{title:"\u5916\u90E8\u5E93",subTitle:"\u5916\u90E8\u5E93\u7B80\u4ECB",collapsible:!0,headerBordered:!0,bordered:!0},postData:function(n){return console.log("postData->rest",n),n.map(function(e){return e.name=e.name,e})},request:function(){var o=f()(c()().mark(function n(e,_,r){var i;return c()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return console.log(_,r,e),v.next=3,de();case 3:return i=v.sent,v.abrupt("return",Promise.resolve({data:i.results,success:!0,total:i.count}));case 5:case"end":return v.stop()}},n)}));return function(n,e,_){return o.apply(this,arguments)}}(),toolbar:{title:"ProTable",subTitle:"\u5217\u8868",tooltip:{icon:(0,a.jsx)(F.Z,{}),title:"tootipTitle",overlay:(0,a.jsx)("span",{children:"\u8FD9\u662F\u4E00\u4E2A\u63D0\u793A\u4FE1\u606F"})},search:{placeholder:"\u4EC5\u4EC5\u662F\u4E2A\u6837\u5F0F",onSearch:function(n){alert(n)}},multipleLine:!0},columnsState:{onChange:function(n){console.log("map>>>",n)},value:H},scroll:{y:300,x:"max-content"},onChange:function(n){var e=n.current,_=n.pageSize;console.log("onChange>>>"),b(m()(m()({},s),{},{current:e,pageSize:_||0}))},pagination:{showSizeChanger:!0,pageSize:s.pageSize,total:y==null?void 0:y.count},rowKey:"objectId",search:{optionRender:function(n,e,_){return[].concat(O()(_),[(0,a.jsx)(j.ZP,{onClick:function(){I({show:!0,formData:{}})},children:"\u65B0\u589E"},"vv-1")])}},onReset:function(){b({current:1,pageSize:5})},onSubmit:function(n){var e;console.log("rest",n),(e=K.current)===null||e===void 0||e.reload()},columns:[{key:"code",width:100,title:"code",dataIndex:"code"},{key:"name",width:100,title:"\u522B\u540D",dataIndex:"name"},{key:"desc",width:500,title:"\u63CF\u8FF0",dataIndex:"desc"},{key:"action",hideInSearch:!0,title:"\u64CD\u4F5C",width:130,align:"center",render:function(n,e,_,r,i){return(0,a.jsxs)(ee.Z,{children:[(0,a.jsx)(j.ZP,{variant:"link",color:"green",onClick:function(){I({show:!0,formData:e}),D.setFieldsValue(e),B([{uid:""+Date.now(),name:"icon",thumbUrl:typeof(e==null?void 0:e.icon)=="string"?e==null?void 0:e.icon:""}])},children:"\u7F16\u8F91"}),(0,a.jsx)(j.ZP,{variant:"link",color:"danger",onClick:function(){T.Z.confirm({icon:(0,a.jsx)(F.Z,{}),title:"\u5220\u9664",content:"\u786E\u8BA4\u5220\u9664\u4E48\uFF1F",onOk:function(){h.d.k.deleteCodeListData("",{tableName:L,objectId:e.objectId}),setTimeout(function(){b(m()({},s))},200)}})},children:"\u5220\u9664"})]})}}]}),(0,a.jsx)(T.Z,{title:"code\u5B57\u5178".concat(C.objectId?"\u7F16\u8F91":"\u65B0\u589E"),open:C.show,onOk:f()(c()().mark(function o(){var n,e;return c()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:n="",e=T.Z.confirm({closable:!0,title:"\u8BF7\u627E\u535A\u4E3B\u8981\u5BC6\u94A5",icon:(0,a.jsx)(F.Z,{}),afterOpenChange:function(){var d=document.querySelector(".miyao");d.focus()},content:(0,a.jsx)(E.Z,{className:"miyao",onKeyDown:function(d){d.keyCode===13&&X(n,e)},onChange:function(d){n=d.target.value}}),footer:(0,a.jsx)(ne.Z,{justify:"flex-end",style:{paddingTop:10},children:(0,a.jsx)(j.ZP,{type:"primary",onClick:function(){X(n,e)},children:"\u786E\u8BA4"})})});case 2:case"end":return r.stop()}},o)})),onCancel:function(){B([]),I({show:!1})},children:(0,a.jsxs)(p.A,{form:D,submitter:!1,layout:"horizontal",children:[(0,a.jsx)(p.A.Item,{label:"code",name:"code",children:(0,a.jsx)(E.Z,{})}),(0,a.jsx)(p.A.Item,{label:"\u522B\u540D",name:"name",children:(0,a.jsx)(E.Z,{})}),(0,a.jsx)(p.A.Item,{label:"\u5730\u5740",name:"url",children:(0,a.jsx)(E.Z,{})}),(0,a.jsx)(p.A.Item,{label:"\u63CF\u8FF0",name:"desc",children:(0,a.jsx)(E.Z,{})})]})}),Q&&(0,a.jsx)(te.Z,{wrapperStyle:{display:"none"},preview:{visible:me,onVisibleChange:function(n){return ve(n)},afterOpenChange:function(n){return!n&&pe("")}},src:Q})]})};P.default=oe}}]);
