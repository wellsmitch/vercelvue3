"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[750],{86587:function(Le,w,t){t.r(w);var Y=t(60183),M=t.n(Y),q=t(2927),ee=t.n(q),ne=t(39346),f=t.n(ne),te=t(43953),c=t.n(te),re=t(91184),h=t.n(re),oe=t(9083),m=t.n(oe),x=t(4701),ae=t(39495),y=t(8280),A=t(37823),E=t(45401),B=t(13133),_e=t(98958),S=t(10145),C=t(99836),se=t(4434),ue=t(23705),p=t(70895),ie=t(3389),i=t(38497),R=t(57664),le=t(49624),a=t(96469),Te=y.Z.Paragraph,we=y.Z.Text,de=function(){var ce=p.A.useForm(),me=m()(ce,1),D=me[0],ve=(0,i.useState)(),U=m()(ve,2),L=U[0],fe=U[1],pe=(0,i.useState)({}),K=m()(pe,2),P=K[0],O=K[1],he=(0,i.useState)({current:1,pageSize:5}),F=m()(he,2),s=F[0],j=F[1];(0,i.useEffect)(function(){var r;(r=T.current)===null||r===void 0||r.reload()},[s]);var W=(0,ae.useSelector)(function(r){return r.keywordns.keyword}),Ee=function(){var r=h()(c()().mark(function n(){var e;return c()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,x.d.k.getCodeListData("",{params:{count:1,skip:(s.current-1)*s.pageSize,limit:s.pageSize,where:{$and:[s.code?{code:{$regex:s.code,$options:"i"}}:null,s.name?{name:{$regex:s.name,$options:"i"}}:null,s.desc?{desc:{$regex:s.desc,$options:"i"}}:null],$or:[W?{code:{$regex:W,$options:"i"}}:{}]}}});case 2:return e=o.sent,fe(e),o.abrupt("return",e);case 5:case"end":return o.stop()}},n)}));return function(){return r.apply(this,arguments)}}(),De=(0,i.useState)(!1),Z=m()(De,2),Pe=Z[0],$=Z[1],ge=(0,i.useState)(""),k=m()(ge,2),z=k[0],V=k[1],Ce=function(n){return new Promise(function(e,_){var o=new FileReader;o.readAsDataURL(n),o.onload=function(){return e(o.result)},o.onerror=function(u){return _(u)}})},Oe=function(){var r=h()(c()().mark(function n(e){return c()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!(!e.url&&!e.preview)){o.next=4;break}return o.next=3,Ce(e.originFileObj);case 3:e.preview=o.sent;case 4:V(e.url||e.preview),$(!0);case 6:case"end":return o.stop()}},n)}));return function(e){return r.apply(this,arguments)}}(),je=(0,i.useRef)(),Ie=(0,i.useState)([]),G=m()(Ie,2),be=G[0],I=G[1],T=(0,i.useRef)(),Me=(0,i.useState)({}),N=m()(Me,2),H=N[0],xe=N[1],Ae=(0,i.useState)({a:1}),J=m()(Ae,2),Se=J[0],Be=J[1],Q=function(n,e){if(n==="songyubin")Re(e);else{A.ZP.error({content:"\u5BC6\u94A5\u4E0D\u6B63\u786E\uFF01"});return}},Re=function(){var r=h()(c()().mark(function n(e){var _,o,u,d,l,v,b,X;return c()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return console.log("addFormIns.getFieldValue()",D.getFieldsValue()),d=P==null?void 0:P.formData,l=d.objectId,v=D.getFieldsValue(),console.log("formvalue",v),b=v==null||(_=v.icon)===null||_===void 0?void 0:_.fileList,g.next=7,x.d.k.addCodeListData("",{body:f()(f()({},v),{},{icon:b&&(o=b[0])!==null&&o!==void 0&&o.thumbUrl?(u=b[0])===null||u===void 0?void 0:u.thumbUrl:(v==null?void 0:v.icon)||"",objectId:l||void 0,createdAt:void 0})});case 7:X=g.sent,X.objectId?(A.ZP.success({content:"\u521B\u5EFA\u6210\u529F\uFF01"}),I([]),D.resetFields(),O({show:!1}),j(l?f()({},s):{current:1,pageSize:5}),e.destroy()):A.ZP.warning({content:"\u521B\u5EFA\u5931\u8D25\uFF01"});case 9:case"end":return g.stop()}},n)}));return function(e){return r.apply(this,arguments)}}();return(0,i.useEffect)(function(){},[]),(0,i.useEffect)(function(){xe({code:{show:!0,fixed:H},action:{show:!0,fixed:"right"}})},[]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ie.Z,{actionRef:T,params:Se,cardProps:{title:"\u5B57\u5178",subTitle:"\u6240\u6709\u6A21\u5757\u7B80\u4ECB",collapsible:!0,headerBordered:!0,bordered:!0},postData:function(n){return console.log("postData->rest",n),n.map(function(e){return e.name=e.name,e})},request:function(){var r=h()(c()().mark(function n(e,_,o){var u;return c()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return console.log(_,o,e),l.next=3,Ee();case 3:return u=l.sent,l.abrupt("return",Promise.resolve({data:u.results,success:!0,total:u.count}));case 5:case"end":return l.stop()}},n)}));return function(n,e,_){return r.apply(this,arguments)}}(),toolbar:{title:"ProTable",subTitle:"\u5217\u8868",tooltip:{icon:(0,a.jsx)(R.Z,{}),title:"tootipTitle",overlay:(0,a.jsx)("span",{children:"\u8FD9\u662F\u4E00\u4E2A\u63D0\u793A\u4FE1\u606F"})},search:{placeholder:"\u4EC5\u4EC5\u662F\u4E2A\u6837\u5F0F",onSearch:function(n){alert(n)}},multipleLine:!0},columnsState:{onChange:function(n){console.log("map>>>",n)},value:H},scroll:{y:300,x:"max-content"},onChange:function(n){var e=n.current,_=n.pageSize;console.log("onChange>>>"),j(f()(f()({},s),{},{current:e,pageSize:_||0}))},pagination:{showSizeChanger:!0,pageSize:s.pageSize,total:L==null?void 0:L.count},rowKey:"objectId",search:{optionRender:function(n,e,_){return[].concat(ee()(_),[(0,a.jsx)(E.ZP,{onClick:function(){O({show:!0,formData:{}})},children:"\u65B0\u589E"},"vv-1")])}},onReset:function(){j({current:1,pageSize:5})},onSubmit:function(n){var e;console.log("rest",n),(e=T.current)===null||e===void 0||e.reload()},columns:[{key:"icon",width:80,title:"icon",dataIndex:"icon",render:function(n,e){return(0,a.jsx)(B.Z,{width:50,height:50,src:e.icon})},search:!1},{key:"code",width:100,title:"code",dataIndex:"code"},{key:"name",width:100,valueType:"select",valueEnum:{all:{text:"\u5168\u90E8"},\u4ED8\u5C0F\u5C0F:{text:"\u4ED8\u5C0F\u5C0F"},\u66F2\u4E3D\u4E3D:{text:"\u66F2\u4E3D\u4E3D"},\u6797\u4E1C\u4E1C:{text:"\u6797\u4E1C\u4E1C"},\u9648\u5E05\u5E05:{text:"\u9648\u5E05\u5E05"},\u517C\u67D0\u67D0:{text:"\u517C\u67D0\u67D0"}},title:"\u522B\u540D",dataIndex:"name"},{key:"desc",width:500,title:"\u63CF\u8FF0",dataIndex:"desc"},M()(M()(M()({key:"action",width:160,hideInSearch:!0,title:"\u64CD\u4F5C"},"width",130),"align","center"),"render",function(n,e,_,o,u){return(0,a.jsxs)(_e.Z,{children:[(0,a.jsx)(E.ZP,{variant:"link",color:"green",onClick:function(){O({show:!0,formData:e}),D.setFieldsValue(e),I([{uid:""+Date.now(),name:"icon",thumbUrl:typeof(e==null?void 0:e.icon)=="string"?e==null?void 0:e.icon:""}]),console.log("uploadRef",je)},children:"\u7F16\u8F91"}),(0,a.jsx)(E.ZP,{variant:"link",color:"danger",onClick:function(){S.Z.confirm({icon:(0,a.jsx)(R.Z,{}),title:"\u5220\u9664",content:"\u786E\u8BA4\u5220\u9664\u4E48\uFF1F",onOk:function(){x.d.k.deleteCodeListData("",{objectId:e.objectId}),setTimeout(function(){j(f()({},s))},200)}})},children:"\u5220\u9664"})]})})]}),(0,a.jsx)("hr",{}),(0,a.jsx)(S.Z,{title:"code\u5B57\u5178".concat(P.objectId?"\u7F16\u8F91":"\u65B0\u589E"),open:P.show,onOk:h()(c()().mark(function r(){var n,e;return c()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:n="",e=S.Z.confirm({closable:!0,title:"\u8BF7\u627E\u535A\u4E3B\u8981\u5BC6\u94A5",icon:(0,a.jsx)(R.Z,{}),afterOpenChange:function(){var d=document.querySelector(".miyao");d.focus()},content:(0,a.jsx)(C.Z,{className:"miyao",onKeyDown:function(d){d.keyCode===13&&Q(n,e)},onChange:function(d){n=d.target.value}}),footer:(0,a.jsx)(se.Z,{justify:"flex-end",style:{paddingTop:10},children:(0,a.jsx)(E.ZP,{type:"primary",onClick:function(){Q(n,e)},children:"\u786E\u8BA4"})})});case 2:case"end":return o.stop()}},r)})),onCancel:function(){I([]),O({show:!1}),setcofirmValue("")},children:(0,a.jsxs)(p.A,{form:D,submitter:!1,layout:"horizontal",children:[(0,a.jsx)(p.A.Item,{label:"icon",name:"icon",children:(0,a.jsx)(ue.Z,{listType:"picture-card",fileList:be,onChange:function(n){console.log("rest",n),n&&I(n.fileList)},onPreview:Oe,children:(0,a.jsx)(E.ZP,{icon:(0,a.jsx)(le.Z,{}),children:"\u4E0A\u4F20"})})}),(0,a.jsx)(p.A.Item,{label:"code",name:"code",children:(0,a.jsx)(C.Z,{})}),(0,a.jsx)(p.A.Item,{label:"\u522B\u540D",name:"name",children:(0,a.jsx)(C.Z,{})}),(0,a.jsx)(p.A.Item,{label:"\u63CF\u8FF0",name:"desc",children:(0,a.jsx)(C.Z,{})})]})}),z&&(0,a.jsx)(B.Z,{wrapperStyle:{display:"none"},preview:{visible:Pe,onVisibleChange:function(n){return $(n)},afterOpenChange:function(n){return!n&&V("")}},src:z})]})};w.default=de}}]);
