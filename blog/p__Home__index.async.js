"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[371],{97252:function(Ee,j,e){e.r(j),e.d(j,{default:function(){return ue}});var I=e(43953),x=e.n(I),V=e(2927),L=e.n(V),G=e(39346),i=e.n(G),U=e(91184),R=e.n(U),b=e(9083),v=e.n(b),p=e(73819),J=e(89711),Q=e(93802),W=e(18538),X=e(69949),Y=e(62470),Z=e(91829),q=e(62671),_=e(80614),ee=e(41441),te=e(95498),H=e(4575),oe=e(46175),ne=e(45861),m=e(38497),M=e(34892),ae=e(18197),se=e(40371),Ae=e(35430),re=e(38112),a=e(96469),Pe=J.Z.Link,le=(0,p.proxy)({count:0}),ce=function(){var Oe=(0,p.useSnapshot)(le),ie=(0,p.useModel)("global"),we=ie.name,de=(0,m.useState)({count:0,results:[]}),$=v()(de,2),l=$[0],T=$[1],me=(0,m.useState)({current:1,pageSize:5}),F=v()(me,2),g=F[0],ve=F[1],fe=(0,p.useSearchParams)(),pe=v()(fe,1),y=pe[0];console.log("searchMap",y);var he=(0,m.useState)(y.get("code")||""),E=v()(he,2),ge=E[0],ye=E[1],A=function(){var n=R()(x()().mark(function s(o){var r,c,t,u,h;return x()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return r=$e,c=y.get("code"),f.next=4,M.d.k.getListindexData("",{params:{count:1,skip:(g.current-1)*g.pageSize,limit:g.pageSize,where:{$or:[r?{moduleType:{$regex:r,$options:"ig"}}:{},r?{title:{$regex:r,$options:"ig"}}:{},r?{content:{$regex:r,$options:"ig"}}:{}]}}});case 4:t=f.sent,u="$_$_$",t.results.map(function(d){var S=(d.content||"")&&d.content.replace(/<pre/ig,u+"<pre").replace(/<\/pre>/ig,"</pre>"+u).split(u);S=(d.content||"")&&d.content.replace(/<code/ig,u+"<code").replace(/<\/code>/ig,"</code>"+u).split(u),S=(d.content||"")&&d.content.replace(/<div class=\"ql-code-block-container\"/ig,u+'<div class="ql-code-block-container"').split(u);var C=S&&S.map(function(B){var Fe={type:B.indexOf("<pre")>-1||B.indexOf("<code")>-1||B.indexOf('<div class="ql-code-block-container"')>-1?"code":"string",val:B};return Fe}).filter(function(B){return B.val})||[];d.contentList=C}),h=i()(i()({},l),{},{count:t.count,results:o?t.results:[].concat(L()(l.results),L()(t.results))}),T(h);case 9:case"end":return f.stop()}},s)}));return function(o){return n.apply(this,arguments)}}(),Se=(0,p.useSelector)(function(n){return n.keywordns.keyword}),P=(0,p.useSelector)(function(n){return n.keywordns.randomId});(0,m.useEffect)(function(){A(!!P)},[g,Se,P,y]);var De=new re.Z(.1).add(.2).valueOf(),Ce=Q.Z.useForm(),Be=v()(Ce,1),Ke=Be[0],N=(0,m.useRef)([]),xe=function(s){var o=w.find(function(r){return r.code===s});return o&&o.name||""};(0,m.useEffect)(function(){var n,s=l==null||(n=l.results)===null||n===void 0?void 0:n.map(function(o){return o.isInitFlag=!0,o}).forEach(function(o,r){return new IntersectionObserver(function(c){c.forEach(function(t){t.intersectionRatio>0?t.rootBounds&&t.boundingClientRect&&t.boundingClientRect.bottom-t.rootBounds.bottom>0?(console.log("111111",111111,r),o.domShowByBottom=!0,o.domHideByBottom=!0,o.domHideByTop=!1,o.domShowByTop=!1,l.results[r]=i()(i()({},l.results[r]),{},{domShowByBottom:!0,domHideByBottom:!0,domHideByTop:!1,domShowByTop:!1}),T(i()({},l))):t.rootBounds&&t.boundingClientRect&&t.boundingClientRect.top-t.rootBounds.top<0:t.rootBounds&&t.boundingClientRect&&t.boundingClientRect.bottom-t.rootBounds.bottom>0?(o.domShowByBottom=!1,o.domHideByBottom=!0,o.domHideByTop=!1,o.domShowByTop=!1,l.results[r]=i()(i()({},l.results[r]),{},{domShowByBottom:!1,domHideByBottom:!0,domHideByTop:!1,domShowByTop:!1}),T(i()({},l))):t.rootBounds&&t.boundingClientRect&&t.boundingClientRect.top-t.rootBounds.top<0})},{}).observe(N.current[r]),o})},[l.results]);var Te=(0,m.useState)([]),O=v()(Te,2),w=O[0],je=O[1],Le=function(){var n=R()(x()().mark(function s(){var o;return x()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,M.d.k.getCodeListData("",{params:{where:{}}});case 2:o=c.sent,je(o.results.map(function(t){return i()(i()({},t),{},{code:"".concat(t.code)})}));case 4:case"end":return c.stop()}},s)}));return function(){return n.apply(this,arguments)}}();(0,m.useEffect)(function(){y.get("code")&&Le()},[]);var D=y.get("code"),Re=(0,m.useState)(130),Ze=v()(Re,1),He=Ze[0],Me=(0,m.useState)(""),K=v()(Me,2),$e=K[0],k=K[1];return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(W.Z,{className:"custom-affix-class",offsetTop:He,children:(0,a.jsx)(X.Z,{placeholder:"\u8BF7\u8F93\u5165\u67E5\u8BE2\u5173\u952E\u5B57",onChange:function(s){console.log("v",s),k(s.target.value)},allowClear:!0,addonAfter:(0,a.jsx)(ae.Z,{onClick:function(){k("")}}),onKeyDown:function(s){console.log(s.nativeEvent.keyCode),s.nativeEvent.keyCode===13&&A(!0)}})}),(0,a.jsxs)(Y.Z,{style:{paddingTop:16},children:[D&&(0,a.jsx)(Z.Z,{span:3,children:(0,a.jsx)(q.Z,{activeKey:ge,style:{height:"60vh",position:"sticky",top:"112px"},tabPosition:"left",onChange:function(s){ye(s),T({count:0,results:[]}),p.history.replace({pathname:"/home",search:"?".concat(new URLSearchParams({code:s.split("-")[0]}))})},items:w.map(function(n){return{label:"".concat(n.name),key:"".concat(n.code)}})})}),(0,a.jsxs)(Z.Z,{span:D?20:23,offset:1,children:[(0,a.jsx)(_.Z.Compact,{block:!0,className:"indexHome",direction:"vertical",children:l.results.map(function(n,s){return(0,a.jsx)(ee.Z,{ref:function(r){N.current[s]=r},className:"index-card list-panel-hide-bottom "+(n.domShowByBottom||s==0?"list-panel-show-bottom":""),title:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"index-card-title-category",children:xe(n.moduleType)}),"   ",(0,a.jsx)("span",{children:n.title})]}),children:n.contentList.map(function(o,r){var c="d-"+s+r;return o.type==="string"?(0,a.jsx)("div",{dangerouslySetInnerHTML:{__html:o.val}},c):(0,a.jsxs)("div",{className:"code-wrap-panel",children:[(0,a.jsx)(se.Z,{onClick:function(){var u=document.querySelector(".".concat(c)),h=document.createElement("pre");h.innerHTML=u.innerHTML;var z=h.querySelectorAll(".ql-code-block");if(z.forEach(function(C){C.innerHTML=`
 `.concat(C==null?void 0:C.innerHTML)}),u){var f=u.querySelector(".ql-ui");f&&f.remove();var d=document.createElement("textarea");console.log(h.innerText),d.textContent=h.innerText,document.body.append(d),d.select();var S=document.execCommand("copy");te.ZP.success({message:"\u590D\u5236\u6210\u529F\uFF01"+S})}},className:"code-wrap-copy-icon"}),(0,a.jsx)("div",{className:c,style:{whiteSpace:"pre-wrap"},dangerouslySetInnerHTML:{__html:o.val}})]},"c"+s+r)})},"a"+s)})}),l.results.length<l.count&&l.count>0&&(0,a.jsx)(H.Z,{vertical:!0,gap:"small",style:{width:"100%"},children:(0,a.jsx)(oe.ZP,{block:!0,onClick:function(){ve(i()(i()({},g),{},{current:g.current+1}))},children:"\u52A0\u8F7D\u66F4\u591A"})}),l.count==0&&(0,a.jsx)(H.Z,{vertical:!0,gap:"small",style:{width:"100%"},children:(0,a.jsx)(ne.Z,{style:{lineHeight:"32px"},showIcon:!0,type:"info",message:"\u535A\u4E3B\u6B63\u5728\u5B66\u4E60\u6574\u7406\u4E2D\u656C\u8BF7\u671F\u5F85\u5427~"})})]})]})]})},ue=ce}}]);
