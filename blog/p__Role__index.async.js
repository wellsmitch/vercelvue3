"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[463],{67733:function(fe,N,n){var G=n(43599),p=n(7749),Q=n(35569),s=n(40173),te=n(53648),r=n(82574),S=n(30606),W=n(61343),I=n(90537),K=n(71398),Z=n(88100),Y=n(85563),y=n(42028),re=n(61463),E=n(45401),ae=n(1193),L=n(77511),z=n(96619),U=n(3494),u=n(38497),D=n(90908),o=n(96469),l=["onTableChange","maxLength","formItemProps","recordCreatorProps","rowKey","controlled","defaultValue","onChange","editableFormRef"],t=["record","position","creatorButtonText","newRecordType","parentKey","style"],i=u.createContext(void 0);function a(e){var M=e.children,k=e.record,X=e.position,q=e.newRecordType,F=e.parentKey,oe=(0,u.useContext)(i);return u.cloneElement(M,(0,r.Z)((0,r.Z)({},M.props),{},{onClick:function(){var ee=(0,te.Z)((0,s.Z)().mark(function de(_e){var ue,le,J,j;return(0,s.Z)().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,(ue=(le=M.props).onClick)===null||ue===void 0?void 0:ue.call(le,_e);case 2:if(j=P.sent,j!==!1){P.next=5;break}return P.abrupt("return");case 5:oe==null||(J=oe.current)===null||J===void 0||J.addEditRecord(k,{position:X,newRecordType:q,parentKey:F});case 6:case"end":return P.stop()}},de)}));function $(de){return ee.apply(this,arguments)}return $}()}))}function R(e){var M,k,X=(0,K.YB)(),q=e.onTableChange,F=e.maxLength,oe=e.formItemProps,ee=e.recordCreatorProps,$=e.rowKey,de=e.controlled,_e=e.defaultValue,ue=e.onChange,le=e.editableFormRef,J=(0,Q.Z)(e,l),j=(0,u.useRef)(void 0),ie=(0,u.useRef)(),P=(0,u.useRef)();(0,u.useImperativeHandle)(J.actionRef,function(){return ie.current},[ie.current]);var he=(0,L.Z)(function(){return e.value||_e||[]},{value:e.value,onChange:e.onChange}),ve=(0,p.Z)(he,2),h=ve[0],T=ve[1],V=u.useMemo(function(){return typeof $=="function"?$:function(c,O){return c[$]||O}},[$]),C=(0,Z.J)(function(c){if(typeof c=="number"&&!e.name){if(c>=h.length)return c;var O=h&&h[c];return V==null?void 0:V(O,c)}if((typeof c=="string"||c>=h.length)&&e.name){var m=h.findIndex(function(f,g){var b;return(V==null||(b=V(f,g))===null||b===void 0?void 0:b.toString())===(c==null?void 0:c.toString())});if(m!==-1)return m}return c});(0,u.useImperativeHandle)(le,function(){var c=function(f){var g,b;if(f==null)throw new Error("rowIndex is required");var A=C(f),H=[e.name,(g=A==null?void 0:A.toString())!==null&&g!==void 0?g:""].flat(1).filter(Boolean);return(b=P.current)===null||b===void 0?void 0:b.getFieldValue(H)},O=function(){var f,g=[e.name].flat(1).filter(Boolean);if(Array.isArray(g)&&g.length===0){var b,A=(b=P.current)===null||b===void 0?void 0:b.getFieldsValue();return Array.isArray(A)?A:Object.keys(A).map(function(H){return A[H]})}return(f=P.current)===null||f===void 0?void 0:f.getFieldValue(g)};return(0,r.Z)((0,r.Z)({},P.current),{},{getRowData:c,getRowsData:O,setRowData:function(f,g){var b,A;if(f==null)throw new Error("rowIndex is required");var H=C(f),me=[e.name,(b=H==null?void 0:H.toString())!==null&&b!==void 0?b:""].flat(1).filter(Boolean),Pe=Object.assign({},(0,r.Z)((0,r.Z)({},c(f)),g||{})),Ce=(0,U.Z)({},me,Pe);return(A=P.current)===null||A===void 0||A.setFieldsValue(Ce),!0}})},[C,e.name,P.current]),(0,u.useEffect)(function(){e.controlled&&(h||[]).forEach(function(c,O){var m;(m=P.current)===null||m===void 0||m.setFieldsValue((0,G.Z)({},"".concat(V(c,O)),c))},{})},[(0,Y.ZP)(h),e.controlled]),(0,u.useEffect)(function(){if(e.name){var c;P.current=e==null||(c=e.editable)===null||c===void 0?void 0:c.form}},[(M=e.editable)===null||M===void 0?void 0:M.form,e.name]);var d=ee||{},v=d.record,x=d.position,B=d.creatorButtonText,ne=d.newRecordType,se=d.parentKey,w=d.style,Ee=(0,Q.Z)(d,t),pe=x==="top",ce=(0,u.useMemo)(function(){return typeof F=="number"&&F<=(h==null?void 0:h.length)?!1:ee!==!1&&(0,o.jsx)(a,{record:(0,y.h)(v,h==null?void 0:h.length,h)||{},position:x,parentKey:(0,y.h)(se,h==null?void 0:h.length,h),newRecordType:ne,children:(0,o.jsx)(E.ZP,(0,r.Z)((0,r.Z)({type:"dashed",style:(0,r.Z)({display:"block",margin:"10px 0",width:"100%"},w),icon:(0,o.jsx)(S.Z,{})},Ee),{},{children:B||X.getMessage("editableTable.action.add","\u6DFB\u52A0\u4E00\u884C\u6570\u636E")}))})},[ee,F,h==null?void 0:h.length]),De=(0,u.useMemo)(function(){return ce?pe?{components:{header:{wrapper:function(O){var m,f=O.className,g=O.children;return(0,o.jsxs)("thead",{className:f,children:[g,(0,o.jsxs)("tr",{style:{position:"relative"},children:[(0,o.jsx)("td",{colSpan:0,style:{visibility:"hidden"},children:ce}),(0,o.jsx)("td",{style:{position:"absolute",left:0,width:"100%"},colSpan:(m=J.columns)===null||m===void 0?void 0:m.length,children:ce})]})]})}}}}:{tableViewRender:function(O,m){var f,g;return(0,o.jsxs)(o.Fragment,{children:[(f=(g=e.tableViewRender)===null||g===void 0?void 0:g.call(e,O,m))!==null&&f!==void 0?f:m,ce]})}}:{}},[pe,ce]),ge=(0,r.Z)({},e.editable),be=(0,Z.J)(function(c,O){var m,f,g;if((m=e.editable)===null||m===void 0||(f=m.onValuesChange)===null||f===void 0||f.call(m,c,O),(g=e.onValuesChange)===null||g===void 0||g.call(e,O,c),e.controlled){var b;e==null||(b=e.onChange)===null||b===void 0||b.call(e,O)}});return(e!=null&&e.onValuesChange||(k=e.editable)!==null&&k!==void 0&&k.onValuesChange||e.controlled&&e!==null&&e!==void 0&&e.onChange)&&(ge.onValuesChange=be),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(i.Provider,{value:ie,children:(0,o.jsx)(D.Z,(0,r.Z)((0,r.Z)((0,r.Z)({search:!1,options:!1,pagination:!1,rowKey:$,revalidateOnFocus:!1},J),De),{},{tableLayout:"fixed",actionRef:ie,onChange:q,editable:(0,r.Z)((0,r.Z)({},ge),{},{formProps:(0,r.Z)({formRef:P},ge.formProps)}),dataSource:h,onDataSourceChange:function(O){if(T(O),e.name&&x==="top"){var m,f=(0,U.Z)({},[e.name].flat(1).filter(Boolean),O);(m=P.current)===null||m===void 0||m.setFieldsValue(f)}}}))}),e.name?(0,o.jsx)(W.Z,{name:[e.name],children:function(O){var m,f;if(!j.current)return j.current=h,null;var g=(0,z.Z)(O,[e.name].flat(1)),b=g==null?void 0:g.find(function(A,H){var me;return!(0,re.A)(A,(me=j.current)===null||me===void 0?void 0:me[H])});return j.current=h,b&&(e==null||(m=e.editable)===null||m===void 0||(f=m.onValuesChange)===null||f===void 0||f.call(m,b,g)),null}}):null]})}function _(e){var M=I.ZP.useFormInstance();return e.name?(0,o.jsx)(ae.Z.Item,(0,r.Z)((0,r.Z)({style:{maxWidth:"100%"},shouldUpdate:function(X,q){var F=[e.name].flat(1);try{return JSON.stringify((0,z.Z)(X,F))!==JSON.stringify((0,z.Z)(q,F))}catch(oe){return!0}}},e==null?void 0:e.formItemProps),{},{name:e.name,children:(0,o.jsx)(R,(0,r.Z)((0,r.Z)({tableLayout:"fixed",scroll:{x:"max-content"}},e),{},{editable:(0,r.Z)((0,r.Z)({},e.editable),{},{form:M})}))})):(0,o.jsx)(R,(0,r.Z)({tableLayout:"fixed",scroll:{x:"max-content"}},e))}_.RecordCreator=a,N.Z=_},64093:function(fe,N,n){n.r(N);var G=n(43953),p=n.n(G),Q=n(91184),s=n.n(Q),te=n(39346),r=n.n(te),S=n(2927),W=n.n(S),I=n(9083),K=n.n(I),Z=n(4701),Y=n(67733),y=n(38497),re=n(98958),E=n(37719),ae=n(670),L=n(45401),z=n(45839),U=n(39495),u=n(96469),D=function(){var l=(0,y.useState)(!0),t=K()(l,2),i=t[0],a=t[1],R=(0,y.useState)(!0),_=K()(R,2),e=_[0],M=_[1],k=(0,y.useState)(!1),X=K()(k,2),q=X[0],F=X[1],oe=(0,y.useState)(!1),ee=K()(oe,2),$=ee[0],de=ee[1],_e=(0,y.useState)(0),ue=K()(_e,2),le=ue[0],J=ue[1],j=(0,y.useRef)(),ie=(0,y.useState)([]),P=K()(ie,2),he=P[0],ve=P[1],h=(0,U.useModel)("@@initialState"),T=h.initialState,V=h.setInitialState;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("h1",{className:"red",children:"redredred"}),(0,u.jsxs)(re.Z,{size:[10,10],wrap:!0,children:[(0,u.jsxs)(E.ZP.Group,{buttonStyle:"solid",optionType:"button",value:i,onChange:function(d){var v=d.target;return a(v.value||!1)},children:[(0,u.jsx)(E.ZP,{value:!0,children:"\u5C55\u793A proTableSearch"}),(0,u.jsx)(E.ZP,{value:!1,children:"\u4E0D\u5C55\u793A proTableSearch"})]}),(0,u.jsxs)(E.ZP.Group,{optionType:"button",value:e,onChange:function(d){var v=d.target;return M(v.value||!1)},children:[(0,u.jsx)(E.ZP,{value:!0,children:"\u5C55\u793A toolBar"}),(0,u.jsx)(E.ZP,{value:!1,children:"\u4E0D\u5C55\u793A toolBar"})]}),(0,u.jsxs)(E.ZP.Group,{optionType:"button",value:q,onChange:function(d){var v=d.target;return F(v.value||!1)},children:[(0,u.jsx)(E.ZP,{value:!0,children:"cardBorderedSearch true"}),(0,u.jsx)(E.ZP,{value:!1,children:"cardBorderedSearch false"})]}),(0,u.jsxs)(E.ZP.Group,{optionType:"button",value:$,onChange:function(d){var v=d.target;return de(v.value||!1)},children:[(0,u.jsx)(E.ZP,{value:!0,children:"\u5C55\u793A\u8FB9\u6846"}),(0,u.jsx)(E.ZP,{value:!1,children:"\u4E0D\u5C55\u793A\u8FB9\u6846"})]}),(0,u.jsx)(ae.Z,{addonBefore:"\u67E5\u8BE2\u7684debounceTime",value:le,step:1e3,onChange:function(d){return J(d||0)}})]}),(0,u.jsx)(Y.Z,{recordCreatorProps:{record:function(){return{objectId:(Math.random()*1e6).toFixed(0)}}},search:i?{optionRender:function(d,v,x){return[].concat(W()(x),[(0,u.jsxs)(L.ZP,{onClick:function(){V(r()(r()({},T),{},{menuRenderFlag:!(T!=null&&T.menuRenderFlag)}))},children:["\u4FA7\u8FB9\u83DC\u5355",T!=null&&T.menuRenderFlag?"\u663E\u793A":"\u9690\u85CF"]}),(0,u.jsxs)(L.ZP,{onClick:function(){V(r()(r()({},T),{},{topFlag:!(T!=null&&T.topFlag)}))},children:["\u5934\u90E8",T!=null&&T.topFlag?"\u663E\u793A":"\u9690\u85CF"]})])}}:!1,headerTitle:"\u5DE6\u4E0A\u89D2\u7684\u6807\u9898",tooltip:"\u5DE6\u4E0A\u89D2\u7684\u6807\u9898\u7684\u4E00\u4E9B\u89E3\u91CA",pagination:{showQuickJumper:!0,pageSize:5,pageSizeOptions:[5,10,15,30,100],onChange:function(d,v){console.log("paination>>>",d,v)},showSizeChanger:{},onShowSizeChange:function(d,v){console.log("onShowSizeChange>>>",d,v)}},bordered:$,cardBordered:{table:q},loading:{tip:123},virtual:!0,debounceTime:le,rowSelection:{columnWidth:20},editable:{type:"multiple",editableKeys:he,onSave:function(){var C=s()(p()().mark(function v(x,B,ne){return p()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:console.log(x,B,ne);case 1:case"end":return w.stop()}},v)}));function d(v,x,B){return C.apply(this,arguments)}return d}(),onChange:ve},formRef:j,toolBarRender:e?function(){return[(0,u.jsx)(L.ZP,{onClick:function(){if(console.log(j.current),j.current){var d=j.current.getFieldsValue();Object.keys(d).length>0&&(console.log(j.current),Z.d.n.addRole(r()({},j.current.getFieldsValue())),z.ZP.success({message:"\u65B0\u589E\u6210\u529F"}),j.current.resetFields(),j.current.submit())}},children:"\u63D0\u4EA4"},"submit")]}:!1,rowKey:"objectId",options:!1,type:"descriptions",cardProps:{title:"\u4E1A\u52A1\u5B9A\u5236",bordered:!0,collapsible:!0},tableAlertRender:function(d){return console.log("rest",d),(0,u.jsx)("div",{children:"\u60A8\u5DF2\u7ECF\u5F00\u59CB\u9009\u62E9\u6570\u636E"})},tableAlertOptionRender:function(d){return(0,u.jsx)(L.ZP,{onClick:function(){return d.onCleanSelected()},children:"\u60F3\u53D6\u6D88\u9009\u62E9"})},dateFormatter:"string",columns:[{key:"code",title:"code",width:260,dataIndex:"code"},{key:"name",editable:function(d,v,x){return x!==0},title:"\u89D2\u8272\u522B\u540D",dataIndex:"name",width:260},{title:"\u64CD\u4F5C",valueType:"option",width:250,render:function(d,v,x,B){return[(0,u.jsx)("a",{onClick:function(){var se;console.log(B),B==null||(se=B.startEditable)===null||se===void 0||se.call(B,v.objectId)},children:"\u7F16\u8F91"},"editable"),(0,u.jsx)(Y.Z.RecordCreator,{record:r()(r()({},v),{},{id:(Math.random()*1e6).toFixed(0)}),children:(0,u.jsx)("a",{children:"\u590D\u5236\u6B64\u9879\u5230\u672B\u5C3E"})},"copy")]}}],request:function(){var C=s()(p()().mark(function d(v,x,B){var ne;return p()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return console.log("********",v,x,B),w.next=3,Z.d.n.getRoles("",{params:{where:r()(r()({},v.code?{code:{$in:[v.code]}}:{}),v.name?{name:{$regex:v.name,$options:"i"}}:{})}});case 3:return ne=w.sent,w.abrupt("return",{data:ne.results,success:!0,total:ne.results.length});case 5:case"end":return w.stop()}},d)}));return function(d,v,x){return C.apply(this,arguments)}}()})]})};N.default=D},4701:function(fe,N,n){n.d(N,{d:function(){return p}});var G={};n.r(G),n.d(G,{Login:function(){return K},addRole:function(){return z},getRoles:function(){return ae},getUsers:function(){return re},registryfn:function(){return Y}});var p={};n.r(p),n.d(p,{k:function(){return u},n:function(){return G}});var Q=n(43953),s=n.n(Q),te=n(39346),r=n.n(te),S=n(91184),W=n.n(S),I=n(39495);function K(D){return Z.apply(this,arguments)}function Z(){return Z=W()(s()().mark(function D(o){var l,t=arguments;return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return l=t.length>1&&t[1]!==void 0?t[1]:{},l.params=r()(r()({},l.params),{},{tableName:"OnlineUser"}),a.abrupt("return",(0,I.request)("",r()({method:"get",data:o},l||{})));case 3:case"end":return a.stop()}},D)})),Z.apply(this,arguments)}function Y(D){return y.apply(this,arguments)}function y(){return y=W()(s()().mark(function D(o){var l,t=arguments;return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return l=t.length>1&&t[1]!==void 0?t[1]:{},l.params=r()(r()({},l.params),{},{tableName:"OnlineUser"}),a.abrupt("return",(0,I.request)("",r()({method:"post",data:o,headers:{"content-type":"application/json"}},l||{})));case 3:case"end":return a.stop()}},D)})),y.apply(this,arguments)}function re(D){return E.apply(this,arguments)}function E(){return E=W()(s()().mark(function D(o){var l,t=arguments;return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return l=t.length>1&&t[1]!==void 0?t[1]:{},l.params=r()(r()({},l.params),{},{tableName:"OnlineUser"}),a.abrupt("return",(0,I.request)("",r()({method:"get",data:o},l||{})));case 3:case"end":return a.stop()}},D)})),E.apply(this,arguments)}function ae(D){return L.apply(this,arguments)}function L(){return L=W()(s()().mark(function D(o){var l,t=arguments;return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return l=t.length>1&&t[1]!==void 0?t[1]:{},l.params=r()(r()({},l.params),{},{tableName:"Role"}),a.abrupt("return",(0,I.request)("",r()({method:"get",data:o},l||{})));case 3:case"end":return a.stop()}},D)})),L.apply(this,arguments)}function z(D){return U.apply(this,arguments)}function U(){return U=W()(s()().mark(function D(o){var l,t=arguments;return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return l=t.length>1&&t[1]!==void 0?t[1]:{},l.params=r()(r()({},l.params),{},{tableName:"Role"}),a.abrupt("return",(0,I.request)("",r()({method:"post",data:o,headers:{"content-type":"application/json"}},l||{})));case 3:case"end":return a.stop()}},D)})),U.apply(this,arguments)}var u=n(18879)},18879:function(fe,N,n){n.r(N),n.d(N,{addCodeListData:function(){return z},addListindexData:function(){return W},deleteCodeListData:function(){return u},deleteListindexData:function(){return re},getCodeListData:function(){return ae},getListindexData:function(){return Y},updateListindexData:function(){return K}});var G=n(43953),p=n.n(G),Q=n(39346),s=n.n(Q),te=n(91184),r=n.n(te),S=n(39495);function W(o){return I.apply(this,arguments)}function I(){return I=r()(p()().mark(function o(l){var t,i=arguments;return p()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return t=i.length>1&&i[1]!==void 0?i[1]:{},t.params=s()(s()({},t.params),{},{tableName:"indexData"}),R.abrupt("return",(0,S.request)("",s()({method:"post",data:l,headers:{"content-type":"application/json"}},t||{})));case 3:case"end":return R.stop()}},o)})),I.apply(this,arguments)}function K(o,l){return Z.apply(this,arguments)}function Z(){return Z=r()(p()().mark(function o(l,t){var i,a,R=arguments;return p()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=R.length>2&&R[2]!==void 0?R[2]:{},i.params=s()(s()({},i.params),{},{tableName:"indexData"}),a=(0,S.request)(l,s()({method:l?"put":"post",data:t,headers:{"content-type":"application/json"}},i||{})),e.abrupt("return",a);case 4:case"end":return e.stop()}},o)})),Z.apply(this,arguments)}function Y(o){return y.apply(this,arguments)}function y(){return y=r()(p()().mark(function o(l){var t,i,a=arguments;return p()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return t=a.length>1&&a[1]!==void 0?a[1]:{},t.params=s()(s()({},t.params),{},{tableName:"indexData"}),i=(0,S.request)("",s()({method:"get",data:t.body||""},t||{})),_.abrupt("return",i);case 4:case"end":return _.stop()}},o)})),y.apply(this,arguments)}function re(o){return E.apply(this,arguments)}function E(){return E=r()(p()().mark(function o(l){var t,i,a=arguments;return p()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return t=a.length>1&&a[1]!==void 0?a[1]:{},t.params=s()(s()({},t.params),{},{tableName:"indexData"}),i=(0,S.request)(l||"",s()({url:l,method:"delete",data:t.body||""},t||{})),_.abrupt("return",i);case 4:case"end":return _.stop()}},o)})),E.apply(this,arguments)}function ae(o){return L.apply(this,arguments)}function L(){return L=r()(p()().mark(function o(l){var t,i,a=arguments;return p()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return t=a.length>1&&a[1]!==void 0?a[1]:{},t.params=s()(s()({},t.params),{},{tableName:"codeList"}),i=(0,S.request)("",s()({method:"get",data:t.body||""},t||{})),_.abrupt("return",i);case 4:case"end":return _.stop()}},o)})),L.apply(this,arguments)}function z(o){return U.apply(this,arguments)}function U(){return U=r()(p()().mark(function o(l){var t,i,a,R,_=arguments;return p()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return i=_.length>1&&_[1]!==void 0?_[1]:{},a=i==null||(t=i.body)===null||t===void 0?void 0:t.objectId,i.params=s()(s()({},i.params),{},{tableName:"codeList"}),R=(0,S.request)(a||"",s()({method:a?"put":"post",data:i.body||""},i||{})),M.abrupt("return",R);case 5:case"end":return M.stop()}},o)})),U.apply(this,arguments)}function u(o){return D.apply(this,arguments)}function D(){return D=r()(p()().mark(function o(l){var t,i,a=arguments;return p()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return t=a.length>1&&a[1]!==void 0?a[1]:{},t.params=s()(s()({},t.params),{},{tableName:"codeList"}),i=(0,S.request)(t.objectId||"",s()({method:"delete",data:t.body||""},t||{})),_.abrupt("return",i);case 4:case"end":return _.stop()}},o)})),D.apply(this,arguments)}}}]);
