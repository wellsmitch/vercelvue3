"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[463],{64093:function(z,I,n){n.r(I);var w=n(39346),i=n.n(w),Z=n(2927),s=n.n(Z),$=n(43953),l=n.n($),O=n(91184),C=n.n(O),y=n(9083),R=n.n(y),j=n(4701),U=n(67733),M=n(70895),x=n(80165),h=n(38497),K=n(37823),S=n(98958),v=n(37719),A=n(670),L=n(45401),m=n(45839),o=n(10145),r=n(39495),e=n(96469),u=function(){var f=(0,h.useState)(!0),d=R()(f,2),T=d[0],W=d[1],_e=(0,h.useState)(!0),J=R()(_e,2),V=J[0],de=J[1],ce=(0,h.useState)(!1),Q=R()(ce,2),H=Q[0],me=Q[1],pe=(0,h.useState)(!1),X=R()(pe,2),Y=X[0],he=X[1],fe=(0,h.useState)(0),q=R()(fe,2),ee=q[0],ge=q[1],B=(0,h.useRef)(),ve=(0,h.useState)([]),te=R()(ve,2),be=te[0],De=te[1],Ee=(0,h.useState)({show:!1,formData:{code:"",name:""}}),ne=R()(Ee,2),F=ne[0],re=ne[1],ae=(0,h.useRef)(),ue=(0,r.useModel)("@@initialState"),D=ue.initialState,se=ue.setInitialState,N=(0,h.useRef)(),oe=function(){re({show:!1,formData:{code:"",name:""}})},le=function(){var c=C()(l()().mark(function _(){var a,E,g,P,p;return l()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return E=(a=ae.current)===null||a===void 0?void 0:a.getFieldsValue(),console.log("333",E),b.next=4,j.d.n.updateRole(E.objectId||"",{data:E});case 4:g=b.sent,P=g.objectId,P?(K.ZP.success(P?"\u66F4\u65B0\u6210\u529F\uFF01":"\u6DFB\u52A0\u6210\u529F\uFF01"),oe(),(p=N.current)===null||p===void 0||p.reload()):K.ZP.warning("\u64CD\u4F5C\u5931\u8D25");case 7:case"end":return b.stop()}},_)}));return function(){return c.apply(this,arguments)}}();return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("h1",{className:"red",children:"redredred"}),(0,e.jsxs)(S.Z,{size:[10,10],wrap:!0,children:[(0,e.jsxs)(v.ZP.Group,{buttonStyle:"solid",optionType:"button",value:T,onChange:function(_){var a=_.target;return W(a.value||!1)},children:[(0,e.jsx)(v.ZP,{value:!0,children:"\u5C55\u793A proTableSearch"}),(0,e.jsx)(v.ZP,{value:!1,children:"\u4E0D\u5C55\u793A proTableSearch"})]}),(0,e.jsxs)(v.ZP.Group,{optionType:"button",value:V,onChange:function(_){var a=_.target;return de(a.value||!1)},children:[(0,e.jsx)(v.ZP,{value:!0,children:"\u5C55\u793A toolBar"}),(0,e.jsx)(v.ZP,{value:!1,children:"\u4E0D\u5C55\u793A toolBar"})]}),(0,e.jsxs)(v.ZP.Group,{optionType:"button",value:H,onChange:function(_){var a=_.target;return me(a.value||!1)},children:[(0,e.jsx)(v.ZP,{value:!0,children:"cardBorderedSearch true"}),(0,e.jsx)(v.ZP,{value:!1,children:"cardBorderedSearch false"})]}),(0,e.jsxs)(v.ZP.Group,{optionType:"button",value:Y,onChange:function(_){var a=_.target;return he(a.value||!1)},children:[(0,e.jsx)(v.ZP,{value:!0,children:"\u5C55\u793A\u8FB9\u6846"}),(0,e.jsx)(v.ZP,{value:!1,children:"\u4E0D\u5C55\u793A\u8FB9\u6846"})]}),(0,e.jsx)(A.Z,{addonBefore:"\u67E5\u8BE2\u7684debounceTime",value:ee,step:1e3,onChange:function(_){return ge(_||0)}})]}),(0,e.jsx)(U.Z,{actionRef:N,recordCreatorProps:{record:function(){return{name:"",code:"",id:Math.random()}}},search:T?{optionRender:function(_,a,E){return[].concat(s()(E),[(0,e.jsx)(L.ZP,{onClick:function(){re(i()(i()({},F),{},{show:!0}))},children:"\u65B0\u589E\u89D2\u8272"}),(0,e.jsxs)(L.ZP,{onClick:function(){se(i()(i()({},D),{},{menuRenderFlag:!(D!=null&&D.menuRenderFlag)}))},children:["\u4FA7\u8FB9\u83DC\u5355",D!=null&&D.menuRenderFlag?"\u663E\u793A":"\u9690\u85CF"]}),(0,e.jsxs)(L.ZP,{onClick:function(){se(i()(i()({},D),{},{topFlag:!(D!=null&&D.topFlag)}))},children:["\u5934\u90E8",D!=null&&D.topFlag?"\u663E\u793A":"\u9690\u85CF"]})])}}:!1,headerTitle:"\u5DE6\u4E0A\u89D2\u7684\u6807\u9898",tooltip:"\u5DE6\u4E0A\u89D2\u7684\u6807\u9898\u7684\u4E00\u4E9B\u89E3\u91CA",pagination:{showQuickJumper:!0,pageSize:5,pageSizeOptions:[5,10,15,30,100],onChange:function(_,a){console.log("paination>>>",_,a)},showSizeChanger:{},onShowSizeChange:function(_,a){console.log("onShowSizeChange>>>",_,a)}},bordered:Y,cardBordered:{table:H},loading:{tip:123},virtual:!0,debounceTime:ee,rowSelection:{columnWidth:20},editable:{type:"multiple",editableKeys:be,onSave:function(){var c=C()(l()().mark(function a(E,g,P){var p;return l()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:console.log(E,g,P),p=JSON.parse(JSON.stringify(g)),delete p.createdAt,delete p.updatedAt,delete p.objectId,delete p.index,delete p.id,j.d.n.updateRole(P.createdAt&&P.objectId||"",{data:p}).then(function(k){var G;(G=N.current)===null||G===void 0||G.reload()});case 8:case"end":return b.stop()}},a)}));function _(a,E,g){return c.apply(this,arguments)}return _}(),onChange:De},formRef:B,toolBarRender:V?function(){return[(0,e.jsx)(L.ZP,{onClick:function(){if(console.log(B.current),B.current){var _=B.current.getFieldsValue();Object.keys(_).length>0&&(console.log(B.current),j.d.n.updateRole("",i()({},B.current.getFieldsValue())),m.ZP.success({message:"\u65B0\u589E\u6210\u529F"}),B.current.resetFields(),B.current.submit())}},children:"\u63D0\u4EA4"},"submit")]}:!1,rowKey:"id",options:!1,type:"descriptions",cardProps:{title:"\u4E1A\u52A1\u5B9A\u5236",bordered:!0,collapsible:!0},tableAlertRender:function(_){return console.log("rest",_),(0,e.jsx)("div",{children:"\u60A8\u5DF2\u7ECF\u5F00\u59CB\u9009\u62E9\u6570\u636E"})},tableAlertOptionRender:function(_){return(0,e.jsx)(L.ZP,{onClick:function(){return _.onCleanSelected()},children:"\u60F3\u53D6\u6D88\u9009\u62E9"})},dateFormatter:"string",columns:[{key:"code",title:"code",width:160,dataIndex:"code"},{key:"name",editable:function(){return!0},title:"\u89D2\u8272\u522B\u540D",dataIndex:"name",width:160},{key:"menuAccess",editable:function(){return!0},title:"\u83DC\u5355\u6743\u9650",dataIndex:"menuAccess",width:200,ellipsis:!0},{title:"\u64CD\u4F5C",valueType:"option",width:150,render:function(_,a,E,g){return[a.objectId?(0,e.jsx)("a",{onClick:function(){var p;console.log(g),a.id&&(g==null||(p=g.startEditable)===null||p===void 0||p.call(g,a.id))},children:"\u7F16\u8F91"},"editable"):null,(0,e.jsx)(U.Z.RecordCreator,{record:{name:a.name||"",code:a.code||"",menuAccess:a.menuAccess||"",id:(Math.random()*1e6).toFixed(0)},children:(0,e.jsx)("a",{children:"\u590D\u5236\u6B64\u9879\u5230\u672B\u5C3E"})},"copy")]}}],request:function(){var c=C()(l()().mark(function _(a,E,g){var P,p;return l()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return console.log("********",a,E,g),b.next=3,j.d.n.getRoles("",{params:{order:"createdAt",where:i()(i()({},a.code?{code:{$in:[a.code]}}:{}),a.name?{name:{$regex:a.name,$options:"i"}}:{})}});case 3:return P=b.sent,p=P.results.map(function(k){return i()(i()({},k),{},{id:k.objectId})}),console.log("resList",p),b.abrupt("return",{data:p,success:!0,total:P.results.length});case 7:case"end":return b.stop()}},_)}));return function(_,a,E){return c.apply(this,arguments)}}()}),(0,e.jsx)(o.Z,{title:F.formData.objectId?"\u7F16\u8F91\u89D2\u8272":"\u65B0\u589E\u89D2\u8272",open:F.show,onOk:function(){le()},onCancel:function(){oe()},children:(0,e.jsxs)(M.A,{formRef:ae,isKeyPressSubmit:!0,submitter:!1,onFinish:C()(l()().mark(function c(){return l()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:le();case 1:case"end":return a.stop()}},c)})),children:[(0,e.jsx)(x.Z,{name:"name",rules:[{required:!0,message:"name \u4E0D\u80FD\u4E3A\u7A7A"}],required:!0,label:"name"}),(0,e.jsx)(x.Z,{name:"code",rules:[{required:!0,message:"code \u4E0D\u80FD\u4E3A\u7A7A"}],required:!0,label:"code"}),(0,e.jsx)(x.Z,{name:"menuAccess",label:"menuAccess"})]})})]})};I.default=u},4701:function(z,I,n){n.d(I,{d:function(){return i}});var w={};n.r(w),n.d(w,{Login:function(){return R},getRoles:function(){return K},getUsers:function(){return x},registryfn:function(){return U},updateRole:function(){return v}});var i={};n.r(i),n.d(i,{k:function(){return L},n:function(){return w}});var Z=n(43953),s=n.n(Z),$=n(39346),l=n.n($),O=n(91184),C=n.n(O),y=n(39495);function R(m){return j.apply(this,arguments)}function j(){return j=C()(s()().mark(function m(o){var r,e=arguments;return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.length>1&&e[1]!==void 0?e[1]:{},r.params=l()(l()({},r.params),{},{tableName:"OnlineUser"}),t.abrupt("return",(0,y.request)("",l()({method:"get",data:o},r||{})));case 3:case"end":return t.stop()}},m)})),j.apply(this,arguments)}function U(m){return M.apply(this,arguments)}function M(){return M=C()(s()().mark(function m(o){var r,e=arguments;return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.length>1&&e[1]!==void 0?e[1]:{},r.params=l()(l()({},r.params),{},{tableName:"OnlineUser"}),t.abrupt("return",(0,y.request)("",l()({method:"post",data:o,headers:{"content-type":"application/json"}},r||{})));case 3:case"end":return t.stop()}},m)})),M.apply(this,arguments)}function x(m){return h.apply(this,arguments)}function h(){return h=C()(s()().mark(function m(o){var r,e=arguments;return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.length>1&&e[1]!==void 0?e[1]:{},r.params=l()(l()({},r.params),{},{tableName:"OnlineUser"}),t.abrupt("return",(0,y.request)("",l()({method:"get",data:o},r||{})));case 3:case"end":return t.stop()}},m)})),h.apply(this,arguments)}function K(m){return S.apply(this,arguments)}function S(){return S=C()(s()().mark(function m(o){var r,e=arguments;return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.length>1&&e[1]!==void 0?e[1]:{},r.params=l()(l()({},r.params),{},{tableName:"Role"}),t.abrupt("return",(0,y.request)("",l()({method:"get",data:o},r||{})));case 3:case"end":return t.stop()}},m)})),S.apply(this,arguments)}function v(m){return A.apply(this,arguments)}function A(){return A=C()(s()().mark(function m(o){var r,e=arguments;return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.length>1&&e[1]!==void 0?e[1]:{},r.params=l()(l()({},r.params),{},{tableName:"Role"}),t.abrupt("return",(0,y.request)("".concat(o),l()({method:o?"put":"post",headers:{"content-type":"application/json"}},r||{})));case 3:case"end":return t.stop()}},m)})),A.apply(this,arguments)}var L=n(18879)},18879:function(z,I,n){n.r(I),n.d(I,{addCodeListData:function(){return v},addListindexData:function(){return C},deleteCodeListData:function(){return L},deleteListindexData:function(){return x},getCodeListData:function(){return K},getListindexData:function(){return U},updateListindexData:function(){return R}});var w=n(43953),i=n.n(w),Z=n(39346),s=n.n(Z),$=n(91184),l=n.n($),O=n(39495);function C(o){return y.apply(this,arguments)}function y(){return y=l()(i()().mark(function o(r){var e,u=arguments;return i()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return e=u.length>1&&u[1]!==void 0?u[1]:{},e.params=s()(s()({},e.params),{},{tableName:"indexData"}),f.abrupt("return",(0,O.request)("",s()({method:"post",data:r,headers:{"content-type":"application/json"}},e||{})));case 3:case"end":return f.stop()}},o)})),y.apply(this,arguments)}function R(o,r){return j.apply(this,arguments)}function j(){return j=l()(i()().mark(function o(r,e){var u,t,f=arguments;return i()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return u=f.length>2&&f[2]!==void 0?f[2]:{},u.params=s()(s()({},u.params),{},{tableName:"indexData"}),t=(0,O.request)(r,s()({method:r?"put":"post",data:e,headers:{"content-type":"application/json"}},u||{})),T.abrupt("return",t);case 4:case"end":return T.stop()}},o)})),j.apply(this,arguments)}function U(o){return M.apply(this,arguments)}function M(){return M=l()(i()().mark(function o(r){var e,u,t=arguments;return i()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return e=t.length>1&&t[1]!==void 0?t[1]:{},e.params=s()(s()({},e.params),{},{tableName:"indexData"}),u=(0,O.request)("",s()({method:"get",data:e.body||""},e||{})),d.abrupt("return",u);case 4:case"end":return d.stop()}},o)})),M.apply(this,arguments)}function x(o){return h.apply(this,arguments)}function h(){return h=l()(i()().mark(function o(r){var e,u,t=arguments;return i()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return e=t.length>1&&t[1]!==void 0?t[1]:{},e.params=s()(s()({},e.params),{},{tableName:"indexData"}),u=(0,O.request)(r||"",s()({url:r,method:"delete",data:e.body||""},e||{})),d.abrupt("return",u);case 4:case"end":return d.stop()}},o)})),h.apply(this,arguments)}function K(o){return S.apply(this,arguments)}function S(){return S=l()(i()().mark(function o(r){var e,u,t=arguments;return i()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return e=t.length>1&&t[1]!==void 0?t[1]:{},e.params=s()(s()({},e.params),{},{tableName:"codeList"}),u=(0,O.request)("",s()({method:"get",data:e.body||""},e||{})),d.abrupt("return",u);case 4:case"end":return d.stop()}},o)})),S.apply(this,arguments)}function v(o){return A.apply(this,arguments)}function A(){return A=l()(i()().mark(function o(r){var e,u,t,f,d=arguments;return i()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return u=d.length>1&&d[1]!==void 0?d[1]:{},t=u==null||(e=u.body)===null||e===void 0?void 0:e.objectId,u.params=s()(s()({},u.params),{},{tableName:"codeList"}),f=(0,O.request)(t||"",s()({method:t?"put":"post",data:u.body||""},u||{})),W.abrupt("return",f);case 5:case"end":return W.stop()}},o)})),A.apply(this,arguments)}function L(o){return m.apply(this,arguments)}function m(){return m=l()(i()().mark(function o(r){var e,u,t=arguments;return i()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return e=t.length>1&&t[1]!==void 0?t[1]:{},e.params=s()(s()({},e.params),{},{tableName:"codeList"}),u=(0,O.request)(e.objectId||"",s()({method:"delete",data:e.body||""},e||{})),d.abrupt("return",u);case 4:case"end":return d.stop()}},o)})),m.apply(this,arguments)}}}]);
