"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[463],{12167:function(Re,_,n){n.r(_),n.d(_,{default:function(){return Ke}});var q=n(43953),P=n.n(q),le=n(91184),m=n.n(le),ue=n(39346),s=n.n(ue),ee=n(2927),H=n.n(ee),$=n(9083),V=n.n($),L=n(4701),ie=n(43599),U=n(7749),F=n(35569),B=n(40173),j=n(53648),a=n(82574),A=n(30606),y=n(61343),C=n(90537),h=n(71398),R=n(88100),de=n(85563),v=n(42028),Ee=n(61463),se=n(45401),Fe=n(77727),Be=n(77511),pe=n(96619),je=n(3494),p=n(38497),Ae=n(89500),t=n(96469),Oe=["onTableChange","maxLength","formItemProps","recordCreatorProps","rowKey","controlled","defaultValue","onChange","editableFormRef"],we=["record","position","creatorButtonText","newRecordType","parentKey","style"],Se=p.createContext(void 0);function Ze(e){var w=e.children,G=e.record,Q=e.position,ne=e.newRecordType,M=e.parentKey,Y=(0,p.useContext)(Se);return p.cloneElement(w,(0,a.Z)((0,a.Z)({},w.props),{},{onClick:function(){var X=(0,j.Z)((0,B.Z)().mark(function ce(ae){var te,oe,z,I;return(0,B.Z)().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,(te=(oe=w.props).onClick)===null||te===void 0?void 0:te.call(oe,ae);case 2:if(I=b.sent,I!==!1){b.next=5;break}return b.abrupt("return");case 5:Y==null||(z=Y.current)===null||z===void 0||z.addEditRecord(G,{position:Q,newRecordType:ne,parentKey:M});case 6:case"end":return b.stop()}},ce)}));function W(ce){return X.apply(this,arguments)}return W}()}))}function De(e){var w,G,Q=(0,h.YB)(),ne=e.onTableChange,M=e.maxLength,Y=e.formItemProps,X=e.recordCreatorProps,W=e.rowKey,ce=e.controlled,ae=e.defaultValue,te=e.onChange,oe=e.editableFormRef,z=(0,F.Z)(e,Oe),I=(0,p.useRef)(void 0),k=(0,p.useRef)(),b=(0,p.useRef)();(0,p.useImperativeHandle)(z.actionRef,function(){return k.current},[k.current]);var be=(0,Be.Z)(function(){return e.value||ae||[]},{value:e.value,onChange:e.onChange}),ve=(0,U.Z)(be,2),d=ve[0],Ce=ve[1],S=p.useMemo(function(){return typeof W=="function"?W:function(r,g){return r[W]||g}},[W]),fe=(0,R.J)(function(r){if(typeof r=="number"&&!e.name){if(r>=d.length)return r;var g=d&&d[r];return S==null?void 0:S(g,r)}if((typeof r=="string"||r>=d.length)&&e.name){var l=d.findIndex(function(i,c){var f;return(S==null||(f=S(i,c))===null||f===void 0?void 0:f.toString())===(r==null?void 0:r.toString())});if(l!==-1)return l}return r});(0,p.useImperativeHandle)(oe,function(){var r=function(i){var c,f;if(i==null)throw new Error("rowIndex is required");var E=fe(i),J=[e.name,(c=E==null?void 0:E.toString())!==null&&c!==void 0?c:""].flat(1).filter(Boolean);return(f=b.current)===null||f===void 0?void 0:f.getFieldValue(J)},g=function(){var i,c=[e.name].flat(1).filter(Boolean);if(Array.isArray(c)&&c.length===0){var f,E=(f=b.current)===null||f===void 0?void 0:f.getFieldsValue();return Array.isArray(E)?E:Object.keys(E).map(function(J){return E[J]})}return(i=b.current)===null||i===void 0?void 0:i.getFieldValue(c)};return(0,a.Z)((0,a.Z)({},b.current),{},{getRowData:r,getRowsData:g,setRowData:function(i,c){var f,E;if(i==null)throw new Error("rowIndex is required");var J=fe(i),he=[e.name,(f=J==null?void 0:J.toString())!==null&&f!==void 0?f:""].flat(1).filter(Boolean),Ne=Object.assign({},(0,a.Z)((0,a.Z)({},r(i)),c||{})),Ue=(0,je.Z)({},he,Ne);return(E=b.current)===null||E===void 0||E.setFieldsValue(Ue),!0}})},[fe,e.name,b.current]),(0,p.useEffect)(function(){e.controlled&&(d||[]).forEach(function(r,g){var l;(l=b.current)===null||l===void 0||l.setFieldsValue((0,ie.Z)({},"".concat(S(r,g)),r))},{})},[(0,de.ZP)(d),e.controlled]),(0,p.useEffect)(function(){if(e.name){var r;b.current=e==null||(r=e.editable)===null||r===void 0?void 0:r.form}},[(w=e.editable)===null||w===void 0?void 0:w.form,e.name]);var K=X||{},xe=K.record,me=K.position,ge=K.creatorButtonText,Z=K.newRecordType,ye=K.parentKey,x=K.style,u=(0,F.Z)(K,we),o=me==="top",D=(0,p.useMemo)(function(){return typeof M=="number"&&M<=(d==null?void 0:d.length)?!1:X!==!1&&(0,t.jsx)(Ze,{record:(0,v.h)(xe,d==null?void 0:d.length,d)||{},position:me,parentKey:(0,v.h)(ye,d==null?void 0:d.length,d),newRecordType:Z,children:(0,t.jsx)(se.ZP,(0,a.Z)((0,a.Z)({type:"dashed",style:(0,a.Z)({display:"block",margin:"10px 0",width:"100%"},x),icon:(0,t.jsx)(A.Z,{})},u),{},{children:ge||Q.getMessage("editableTable.action.add","\u6DFB\u52A0\u4E00\u884C\u6570\u636E")}))})},[X,M,d==null?void 0:d.length]),T=(0,p.useMemo)(function(){return D?o?{components:{header:{wrapper:function(g){var l,i=g.className,c=g.children;return(0,t.jsxs)("thead",{className:i,children:[c,(0,t.jsxs)("tr",{style:{position:"relative"},children:[(0,t.jsx)("td",{colSpan:0,style:{visibility:"hidden"},children:D}),(0,t.jsx)("td",{style:{position:"absolute",left:0,width:"100%"},colSpan:(l=z.columns)===null||l===void 0?void 0:l.length,children:D})]})]})}}}}:{tableViewRender:function(g,l){var i,c;return(0,t.jsxs)(t.Fragment,{children:[(i=(c=e.tableViewRender)===null||c===void 0?void 0:c.call(e,g,l))!==null&&i!==void 0?i:l,D]})}}:{}},[o,D]),N=(0,a.Z)({},e.editable),re=(0,R.J)(function(r,g){var l,i,c;if((l=e.editable)===null||l===void 0||(i=l.onValuesChange)===null||i===void 0||i.call(l,r,g),(c=e.onValuesChange)===null||c===void 0||c.call(e,g,r),e.controlled){var f;e==null||(f=e.onChange)===null||f===void 0||f.call(e,g)}});return(e!=null&&e.onValuesChange||(G=e.editable)!==null&&G!==void 0&&G.onValuesChange||e.controlled&&e!==null&&e!==void 0&&e.onChange)&&(N.onValuesChange=re),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Se.Provider,{value:k,children:(0,t.jsx)(Ae.Z,(0,a.Z)((0,a.Z)((0,a.Z)({search:!1,options:!1,pagination:!1,rowKey:W,revalidateOnFocus:!1},z),T),{},{tableLayout:"fixed",actionRef:k,onChange:ne,editable:(0,a.Z)((0,a.Z)({},N),{},{formProps:(0,a.Z)({formRef:b},N.formProps)}),dataSource:d,onDataSourceChange:function(g){if(Ce(g),e.name&&me==="top"){var l,i=(0,je.Z)({},[e.name].flat(1).filter(Boolean),g);(l=b.current)===null||l===void 0||l.setFieldsValue(i)}}}))}),e.name?(0,t.jsx)(y.Z,{name:[e.name],children:function(g){var l,i;if(!I.current)return I.current=d,null;var c=(0,pe.Z)(g,[e.name].flat(1)),f=c==null?void 0:c.find(function(E,J){var he;return!(0,Ee.A)(E,(he=I.current)===null||he===void 0?void 0:he[J])});return I.current=d,f&&(e==null||(l=e.editable)===null||l===void 0||(i=l.onValuesChange)===null||i===void 0||i.call(l,f,c)),null}}):null]})}function Pe(e){var w=C.ZP.useFormInstance();return e.name?(0,t.jsx)(Fe.Z.Item,(0,a.Z)((0,a.Z)({style:{maxWidth:"100%"},shouldUpdate:function(Q,ne){var M=[e.name].flat(1);try{return JSON.stringify((0,pe.Z)(Q,M))!==JSON.stringify((0,pe.Z)(ne,M))}catch(Y){return!0}}},e==null?void 0:e.formItemProps),{},{name:e.name,children:(0,t.jsx)(De,(0,a.Z)((0,a.Z)({tableLayout:"fixed",scroll:{x:"max-content"}},e),{},{editable:(0,a.Z)((0,a.Z)({},e.editable),{},{form:w})}))})):(0,t.jsx)(De,(0,a.Z)({tableLayout:"fixed",scroll:{x:"max-content"}},e))}Pe.RecordCreator=Ze;var Te=Pe,$e=n(98958),O=n(37719),Ve=n(670),Le=n(66979),Me=n(56592),Ie=function(){var w=(0,p.useState)(!0),G=V()(w,2),Q=G[0],ne=G[1],M=(0,p.useState)(!0),Y=V()(M,2),X=Y[0],W=Y[1],ce=(0,p.useState)(!1),ae=V()(ce,2),te=ae[0],oe=ae[1],z=(0,p.useState)(!1),I=V()(z,2),k=I[0],b=I[1],be=(0,p.useState)(0),ve=V()(be,2),d=ve[0],Ce=ve[1],S=(0,p.useRef)(),fe=(0,p.useState)([]),K=V()(fe,2),xe=K[0],me=K[1],ge=(0,Me.useModel)("@@initialState"),Z=ge.initialState,ye=ge.setInitialState;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("h1",{className:"red",children:"redredred"}),(0,t.jsxs)($e.Z,{size:[10,10],wrap:!0,children:[(0,t.jsxs)(O.ZP.Group,{buttonStyle:"solid",optionType:"button",value:Q,onChange:function(u){var o=u.target;return ne(o.value||!1)},children:[(0,t.jsx)(O.ZP,{value:!0,children:"\u5C55\u793A proTableSearch"}),(0,t.jsx)(O.ZP,{value:!1,children:"\u4E0D\u5C55\u793A proTableSearch"})]}),(0,t.jsxs)(O.ZP.Group,{optionType:"button",value:X,onChange:function(u){var o=u.target;return W(o.value||!1)},children:[(0,t.jsx)(O.ZP,{value:!0,children:"\u5C55\u793A toolBar"}),(0,t.jsx)(O.ZP,{value:!1,children:"\u4E0D\u5C55\u793A toolBar"})]}),(0,t.jsxs)(O.ZP.Group,{optionType:"button",value:te,onChange:function(u){var o=u.target;return oe(o.value||!1)},children:[(0,t.jsx)(O.ZP,{value:!0,children:"cardBorderedSearch true"}),(0,t.jsx)(O.ZP,{value:!1,children:"cardBorderedSearch false"})]}),(0,t.jsxs)(O.ZP.Group,{optionType:"button",value:k,onChange:function(u){var o=u.target;return b(o.value||!1)},children:[(0,t.jsx)(O.ZP,{value:!0,children:"\u5C55\u793A\u8FB9\u6846"}),(0,t.jsx)(O.ZP,{value:!1,children:"\u4E0D\u5C55\u793A\u8FB9\u6846"})]}),(0,t.jsx)(Ve.Z,{addonBefore:"\u67E5\u8BE2\u7684debounceTime",value:d,step:1e3,onChange:function(u){return Ce(u||0)}})]}),(0,t.jsx)(Te,{recordCreatorProps:{record:function(){return{objectId:(Math.random()*1e6).toFixed(0)}}},search:Q?{optionRender:function(u,o,D){return[].concat(H()(D),[(0,t.jsxs)(se.ZP,{onClick:function(){ye(s()(s()({},Z),{},{menuRenderFlag:!(Z!=null&&Z.menuRenderFlag)}))},children:["\u4FA7\u8FB9\u83DC\u5355",Z!=null&&Z.menuRenderFlag?"\u663E\u793A":"\u9690\u85CF"]}),(0,t.jsxs)(se.ZP,{onClick:function(){ye(s()(s()({},Z),{},{topFlag:!(Z!=null&&Z.topFlag)}))},children:["\u5934\u90E8",Z!=null&&Z.topFlag?"\u663E\u793A":"\u9690\u85CF"]})])}}:!1,headerTitle:"\u5DE6\u4E0A\u89D2\u7684\u6807\u9898",tooltip:"\u5DE6\u4E0A\u89D2\u7684\u6807\u9898\u7684\u4E00\u4E9B\u89E3\u91CA",pagination:{showQuickJumper:!0,pageSize:5,pageSizeOptions:[5,10,15,30,100],onChange:function(u,o){console.log("paination>>>",u,o)},showSizeChanger:{},onShowSizeChange:function(u,o){console.log("onShowSizeChange>>>",u,o)}},bordered:k,cardBordered:{table:te},loading:{tip:123},virtual:!0,debounceTime:d,rowSelection:{columnWidth:20},editable:{type:"multiple",editableKeys:xe,onSave:function(){var x=m()(P()().mark(function o(D,T,N){return P()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:console.log(D,T,N);case 1:case"end":return r.stop()}},o)}));function u(o,D,T){return x.apply(this,arguments)}return u}(),onChange:me},formRef:S,toolBarRender:X?function(){return[(0,t.jsx)(se.ZP,{onClick:function(){if(console.log(S.current),S.current){var u=S.current.getFieldsValue();Object.keys(u).length>0&&(console.log(S.current),L.d.n.addRole(s()({},S.current.getFieldsValue())),Le.ZP.success({message:"\u65B0\u589E\u6210\u529F"}),S.current.resetFields(),S.current.submit())}},children:"\u63D0\u4EA4"},"submit")]}:!1,rowKey:"objectId",options:!1,type:"descriptions",cardProps:{title:"\u4E1A\u52A1\u5B9A\u5236",bordered:!0,collapsible:!0},tableAlertRender:function(u){return console.log("rest",u),(0,t.jsx)("div",{children:"\u60A8\u5DF2\u7ECF\u5F00\u59CB\u9009\u62E9\u6570\u636E"})},tableAlertOptionRender:function(u){return(0,t.jsx)(se.ZP,{onClick:function(){return u.onCleanSelected()},children:"\u60F3\u53D6\u6D88\u9009\u62E9"})},dateFormatter:"string",columns:[{key:"code",title:"code",width:260,dataIndex:"code"},{key:"name",editable:function(u,o,D){return D!==0},title:"\u89D2\u8272\u522B\u540D",dataIndex:"name",width:260},{title:"\u64CD\u4F5C",valueType:"option",width:250,render:function(u,o,D,T){return[(0,t.jsx)("a",{onClick:function(){var re;console.log(T),T==null||(re=T.startEditable)===null||re===void 0||re.call(T,o.objectId)},children:"\u7F16\u8F91"},"editable"),(0,t.jsx)(Te.RecordCreator,{record:s()(s()({},o),{},{id:(Math.random()*1e6).toFixed(0)}),children:(0,t.jsx)("a",{children:"\u590D\u5236\u6B64\u9879\u5230\u672B\u5C3E"})},"copy")]}}],request:function(){var x=m()(P()().mark(function u(o,D,T){var N;return P()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return console.log("********",o,D,T),r.next=3,L.d.n.getRoles("",{params:{where:s()(s()({},o.code?{code:{$in:[o.code]}}:{}),o.name?{name:{$regex:o.name,$options:"i"}}:{})}});case 3:return N=r.sent,r.abrupt("return",{data:N.results,success:!0,total:N.results.length});case 5:case"end":return r.stop()}},u)}));return function(u,o,D){return x.apply(this,arguments)}}()})]})},Ke=Ie},4701:function(Re,_,n){n.d(_,{d:function(){return P}});var q={};n.r(q),n.d(q,{Login:function(){return V},addRole:function(){return j},getRoles:function(){return F},getUsers:function(){return ie}});var P={};n.r(P),n.d(P,{k:function(){return A},n:function(){return q}});var le=n(43953),m=n.n(le),ue=n(39346),s=n.n(ue),ee=n(91184),H=n.n(ee),$=n(56592);function V(y){return L.apply(this,arguments)}function L(){return L=H()(m()().mark(function y(C){var h,R=arguments;return m()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return h=R.length>1&&R[1]!==void 0?R[1]:{},h.params=s()(s()({},h.params),{},{tableName:"OnlineUser"}),v.abrupt("return",(0,$.request)("",s()({method:"post",data:C,headers:{"content-type":"application/json"}},h||{})));case 3:case"end":return v.stop()}},y)})),L.apply(this,arguments)}function ie(y){return U.apply(this,arguments)}function U(){return U=H()(m()().mark(function y(C){var h,R=arguments;return m()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return h=R.length>1&&R[1]!==void 0?R[1]:{},h.params=s()(s()({},h.params),{},{tableName:"OnlineUser"}),v.abrupt("return",(0,$.request)("",s()({method:"get",data:C},h||{})));case 3:case"end":return v.stop()}},y)})),U.apply(this,arguments)}function F(y){return B.apply(this,arguments)}function B(){return B=H()(m()().mark(function y(C){var h,R=arguments;return m()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return h=R.length>1&&R[1]!==void 0?R[1]:{},h.params=s()(s()({},h.params),{},{tableName:"Role"}),v.abrupt("return",(0,$.request)("",s()({method:"get",data:C},h||{})));case 3:case"end":return v.stop()}},y)})),B.apply(this,arguments)}function j(y){return a.apply(this,arguments)}function a(){return a=H()(m()().mark(function y(C){var h,R=arguments;return m()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return h=R.length>1&&R[1]!==void 0?R[1]:{},h.params=s()(s()({},h.params),{},{tableName:"Role"}),v.abrupt("return",(0,$.request)("",s()({method:"post",data:C,headers:{"content-type":"application/json"}},h||{})));case 3:case"end":return v.stop()}},y)})),a.apply(this,arguments)}var A=n(18879)},18879:function(Re,_,n){n.r(_),n.d(_,{addListindexData:function(){return H},getListindexData:function(){return ie},updateListindexData:function(){return V}});var q=n(43953),P=n.n(q),le=n(39346),m=n.n(le),ue=n(91184),s=n.n(ue),ee=n(56592);function H(F){return $.apply(this,arguments)}function $(){return $=s()(P()().mark(function F(B){var j,a=arguments;return P()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return j=a.length>1&&a[1]!==void 0?a[1]:{},j.params=m()(m()({},j.params),{},{tableName:"indexData"}),y.abrupt("return",(0,ee.request)("",m()({method:"post",data:B,headers:{"content-type":"application/json"}},j||{})));case 3:case"end":return y.stop()}},F)})),$.apply(this,arguments)}function V(F,B){return L.apply(this,arguments)}function L(){return L=s()(P()().mark(function F(B,j){var a,A=arguments;return P()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return a=A.length>2&&A[2]!==void 0?A[2]:{},a.params=m()(m()({},a.params),{},{tableName:"indexData"}),C.abrupt("return",(0,ee.request)(B,m()({method:"put",data:j,headers:{"content-type":"application/json"}},a||{})));case 3:case"end":return C.stop()}},F)})),L.apply(this,arguments)}function ie(F){return U.apply(this,arguments)}function U(){return U=s()(P()().mark(function F(B){var j,a,A=arguments;return P()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return j=A.length>1&&A[1]!==void 0?A[1]:{},j.params=m()(m()({},j.params),{},{tableName:"indexData"}),a=(0,ee.request)("",m()({method:"get",data:j.body||""},j||{})),C.abrupt("return",a);case 4:case"end":return C.stop()}},F)})),U.apply(this,arguments)}}}]);
