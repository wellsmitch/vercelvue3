"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[463],{67733:function(fe,N,n){var G=n(43599),p=n(7749),Q=n(35569),u=n(40173),te=n(53648),a=n(82574),I=n(30606),w=n(61343),K=n(90537),U=n(71398),Z=n(88100),Y=n(85563),y=n(42028),re=n(61463),E=n(45401),ae=n(1193),x=n(77511),z=n(96619),O=n(3494),o=n(38497),f=n(90908),r=n(96469),b=["onTableChange","maxLength","formItemProps","recordCreatorProps","rowKey","controlled","defaultValue","onChange","editableFormRef"],t=["record","position","creatorButtonText","newRecordType","parentKey","style"],l=o.createContext(void 0);function c(e){var j=e.children,X=e.record,k=e.position,q=e.newRecordType,F=e.parentKey,oe=(0,o.useContext)(l);return o.cloneElement(j,(0,a.Z)((0,a.Z)({},j.props),{},{onClick:function(){var ee=(0,te.Z)((0,u.Z)().mark(function de(_e){var ue,le,J,T;return(0,u.Z)().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,(ue=(le=j.props).onClick)===null||ue===void 0?void 0:ue.call(le,_e);case 2:if(T=P.sent,T!==!1){P.next=5;break}return P.abrupt("return");case 5:oe==null||(J=oe.current)===null||J===void 0||J.addEditRecord(X,{position:k,newRecordType:q,parentKey:F});case 6:case"end":return P.stop()}},de)}));function $(de){return ee.apply(this,arguments)}return $}()}))}function M(e){var j,X,k=(0,U.YB)(),q=e.onTableChange,F=e.maxLength,oe=e.formItemProps,ee=e.recordCreatorProps,$=e.rowKey,de=e.controlled,_e=e.defaultValue,ue=e.onChange,le=e.editableFormRef,J=(0,Q.Z)(e,b),T=(0,o.useRef)(void 0),ie=(0,o.useRef)(),P=(0,o.useRef)();(0,o.useImperativeHandle)(J.actionRef,function(){return ie.current},[ie.current]);var he=(0,x.Z)(function(){return e.value||_e||[]},{value:e.value,onChange:e.onChange}),ve=(0,p.Z)(he,2),h=ve[0],L=ve[1],V=o.useMemo(function(){return typeof $=="function"?$:function(d,R){return d[$]||R}},[$]),C=(0,Z.J)(function(d){if(typeof d=="number"&&!e.name){if(d>=h.length)return d;var R=h&&h[d];return V==null?void 0:V(R,d)}if((typeof d=="string"||d>=h.length)&&e.name){var _=h.findIndex(function(v,g){var D;return(V==null||(D=V(v,g))===null||D===void 0?void 0:D.toString())===(d==null?void 0:d.toString())});if(_!==-1)return _}return d});(0,o.useImperativeHandle)(le,function(){var d=function(v){var g,D;if(v==null)throw new Error("rowIndex is required");var S=C(v),H=[e.name,(g=S==null?void 0:S.toString())!==null&&g!==void 0?g:""].flat(1).filter(Boolean);return(D=P.current)===null||D===void 0?void 0:D.getFieldValue(H)},R=function(){var v,g=[e.name].flat(1).filter(Boolean);if(Array.isArray(g)&&g.length===0){var D,S=(D=P.current)===null||D===void 0?void 0:D.getFieldsValue();return Array.isArray(S)?S:Object.keys(S).map(function(H){return S[H]})}return(v=P.current)===null||v===void 0?void 0:v.getFieldValue(g)};return(0,a.Z)((0,a.Z)({},P.current),{},{getRowData:d,getRowsData:R,setRowData:function(v,g){var D,S;if(v==null)throw new Error("rowIndex is required");var H=C(v),me=[e.name,(D=H==null?void 0:H.toString())!==null&&D!==void 0?D:""].flat(1).filter(Boolean),Pe=Object.assign({},(0,a.Z)((0,a.Z)({},d(v)),g||{})),Ce=(0,O.Z)({},me,Pe);return(S=P.current)===null||S===void 0||S.setFieldsValue(Ce),!0}})},[C,e.name,P.current]),(0,o.useEffect)(function(){e.controlled&&(h||[]).forEach(function(d,R){var _;(_=P.current)===null||_===void 0||_.setFieldsValue((0,G.Z)({},"".concat(V(d,R)),d))},{})},[(0,Y.ZP)(h),e.controlled]),(0,o.useEffect)(function(){if(e.name){var d;P.current=e==null||(d=e.editable)===null||d===void 0?void 0:d.form}},[(j=e.editable)===null||j===void 0?void 0:j.form,e.name]);var i=ee||{},m=i.record,B=i.position,A=i.creatorButtonText,ne=i.newRecordType,se=i.parentKey,W=i.style,Ee=(0,Q.Z)(i,t),pe=B==="top",ce=(0,o.useMemo)(function(){return typeof F=="number"&&F<=(h==null?void 0:h.length)?!1:ee!==!1&&(0,r.jsx)(c,{record:(0,y.h)(m,h==null?void 0:h.length,h)||{},position:B,parentKey:(0,y.h)(se,h==null?void 0:h.length,h),newRecordType:ne,children:(0,r.jsx)(E.ZP,(0,a.Z)((0,a.Z)({type:"dashed",style:(0,a.Z)({display:"block",margin:"10px 0",width:"100%"},W),icon:(0,r.jsx)(I.Z,{})},Ee),{},{children:A||k.getMessage("editableTable.action.add","\u6DFB\u52A0\u4E00\u884C\u6570\u636E")}))})},[ee,F,h==null?void 0:h.length]),De=(0,o.useMemo)(function(){return ce?pe?{components:{header:{wrapper:function(R){var _,v=R.className,g=R.children;return(0,r.jsxs)("thead",{className:v,children:[g,(0,r.jsxs)("tr",{style:{position:"relative"},children:[(0,r.jsx)("td",{colSpan:0,style:{visibility:"hidden"},children:ce}),(0,r.jsx)("td",{style:{position:"absolute",left:0,width:"100%"},colSpan:(_=J.columns)===null||_===void 0?void 0:_.length,children:ce})]})]})}}}}:{tableViewRender:function(R,_){var v,g;return(0,r.jsxs)(r.Fragment,{children:[(v=(g=e.tableViewRender)===null||g===void 0?void 0:g.call(e,R,_))!==null&&v!==void 0?v:_,ce]})}}:{}},[pe,ce]),ge=(0,a.Z)({},e.editable),be=(0,Z.J)(function(d,R){var _,v,g;if((_=e.editable)===null||_===void 0||(v=_.onValuesChange)===null||v===void 0||v.call(_,d,R),(g=e.onValuesChange)===null||g===void 0||g.call(e,R,d),e.controlled){var D;e==null||(D=e.onChange)===null||D===void 0||D.call(e,R)}});return(e!=null&&e.onValuesChange||(X=e.editable)!==null&&X!==void 0&&X.onValuesChange||e.controlled&&e!==null&&e!==void 0&&e.onChange)&&(ge.onValuesChange=be),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.Provider,{value:ie,children:(0,r.jsx)(f.Z,(0,a.Z)((0,a.Z)((0,a.Z)({search:!1,options:!1,pagination:!1,rowKey:$,revalidateOnFocus:!1},J),De),{},{tableLayout:"fixed",actionRef:ie,onChange:q,editable:(0,a.Z)((0,a.Z)({},ge),{},{formProps:(0,a.Z)({formRef:P},ge.formProps)}),dataSource:h,onDataSourceChange:function(R){if(L(R),e.name&&B==="top"){var _,v=(0,O.Z)({},[e.name].flat(1).filter(Boolean),R);(_=P.current)===null||_===void 0||_.setFieldsValue(v)}}}))}),e.name?(0,r.jsx)(w.Z,{name:[e.name],children:function(R){var _,v;if(!T.current)return T.current=h,null;var g=(0,z.Z)(R,[e.name].flat(1)),D=g==null?void 0:g.find(function(S,H){var me;return!(0,re.A)(S,(me=T.current)===null||me===void 0?void 0:me[H])});return T.current=h,D&&(e==null||(_=e.editable)===null||_===void 0||(v=_.onValuesChange)===null||v===void 0||v.call(_,D,g)),null}}):null]})}function s(e){var j=K.ZP.useFormInstance();return e.name?(0,r.jsx)(ae.Z.Item,(0,a.Z)((0,a.Z)({style:{maxWidth:"100%"},shouldUpdate:function(k,q){var F=[e.name].flat(1);try{return JSON.stringify((0,z.Z)(k,F))!==JSON.stringify((0,z.Z)(q,F))}catch(oe){return!0}}},e==null?void 0:e.formItemProps),{},{name:e.name,children:(0,r.jsx)(M,(0,a.Z)((0,a.Z)({tableLayout:"fixed",scroll:{x:"max-content"}},e),{},{editable:(0,a.Z)((0,a.Z)({},e.editable),{},{form:j})}))})):(0,r.jsx)(M,(0,a.Z)({tableLayout:"fixed",scroll:{x:"max-content"}},e))}s.RecordCreator=c,N.Z=s},64093:function(fe,N,n){n.r(N);var G=n(43953),p=n.n(G),Q=n(91184),u=n.n(Q),te=n(39346),a=n.n(te),I=n(2927),w=n.n(I),K=n(9083),U=n.n(K),Z=n(4701),Y=n(67733),y=n(38497),re=n(98958),E=n(37719),ae=n(670),x=n(45401),z=n(45839),O=n(39495),o=n(96469),f=function(){var b=(0,y.useState)(!0),t=U()(b,2),l=t[0],c=t[1],M=(0,y.useState)(!0),s=U()(M,2),e=s[0],j=s[1],X=(0,y.useState)(!1),k=U()(X,2),q=k[0],F=k[1],oe=(0,y.useState)(!1),ee=U()(oe,2),$=ee[0],de=ee[1],_e=(0,y.useState)(0),ue=U()(_e,2),le=ue[0],J=ue[1],T=(0,y.useRef)(),ie=(0,y.useState)([]),P=U()(ie,2),he=P[0],ve=P[1],h=(0,O.useModel)("@@initialState"),L=h.initialState,V=h.setInitialState;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("h1",{className:"red",children:"redredred"}),(0,o.jsxs)(re.Z,{size:[10,10],wrap:!0,children:[(0,o.jsxs)(E.ZP.Group,{buttonStyle:"solid",optionType:"button",value:l,onChange:function(i){var m=i.target;return c(m.value||!1)},children:[(0,o.jsx)(E.ZP,{value:!0,children:"\u5C55\u793A proTableSearch"}),(0,o.jsx)(E.ZP,{value:!1,children:"\u4E0D\u5C55\u793A proTableSearch"})]}),(0,o.jsxs)(E.ZP.Group,{optionType:"button",value:e,onChange:function(i){var m=i.target;return j(m.value||!1)},children:[(0,o.jsx)(E.ZP,{value:!0,children:"\u5C55\u793A toolBar"}),(0,o.jsx)(E.ZP,{value:!1,children:"\u4E0D\u5C55\u793A toolBar"})]}),(0,o.jsxs)(E.ZP.Group,{optionType:"button",value:q,onChange:function(i){var m=i.target;return F(m.value||!1)},children:[(0,o.jsx)(E.ZP,{value:!0,children:"cardBorderedSearch true"}),(0,o.jsx)(E.ZP,{value:!1,children:"cardBorderedSearch false"})]}),(0,o.jsxs)(E.ZP.Group,{optionType:"button",value:$,onChange:function(i){var m=i.target;return de(m.value||!1)},children:[(0,o.jsx)(E.ZP,{value:!0,children:"\u5C55\u793A\u8FB9\u6846"}),(0,o.jsx)(E.ZP,{value:!1,children:"\u4E0D\u5C55\u793A\u8FB9\u6846"})]}),(0,o.jsx)(ae.Z,{addonBefore:"\u67E5\u8BE2\u7684debounceTime",value:le,step:1e3,onChange:function(i){return J(i||0)}})]}),(0,o.jsx)(Y.Z,{recordCreatorProps:{record:function(){return{objectId:(Math.random()*1e6).toFixed(0)}}},search:l?{optionRender:function(i,m,B){return[].concat(w()(B),[(0,o.jsxs)(x.ZP,{onClick:function(){V(a()(a()({},L),{},{menuRenderFlag:!(L!=null&&L.menuRenderFlag)}))},children:["\u4FA7\u8FB9\u83DC\u5355",L!=null&&L.menuRenderFlag?"\u663E\u793A":"\u9690\u85CF"]}),(0,o.jsxs)(x.ZP,{onClick:function(){V(a()(a()({},L),{},{topFlag:!(L!=null&&L.topFlag)}))},children:["\u5934\u90E8",L!=null&&L.topFlag?"\u663E\u793A":"\u9690\u85CF"]})])}}:!1,headerTitle:"\u5DE6\u4E0A\u89D2\u7684\u6807\u9898",tooltip:"\u5DE6\u4E0A\u89D2\u7684\u6807\u9898\u7684\u4E00\u4E9B\u89E3\u91CA",pagination:{showQuickJumper:!0,pageSize:5,pageSizeOptions:[5,10,15,30,100],onChange:function(i,m){console.log("paination>>>",i,m)},showSizeChanger:{},onShowSizeChange:function(i,m){console.log("onShowSizeChange>>>",i,m)}},bordered:$,cardBordered:{table:q},loading:{tip:123},virtual:!0,debounceTime:le,rowSelection:{columnWidth:20},editable:{type:"multiple",editableKeys:he,onSave:function(){var C=u()(p()().mark(function m(B,A,ne){return p()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:console.log(B,A,ne);case 1:case"end":return W.stop()}},m)}));function i(m,B,A){return C.apply(this,arguments)}return i}(),onChange:ve},formRef:T,toolBarRender:e?function(){return[(0,o.jsx)(x.ZP,{onClick:function(){if(console.log(T.current),T.current){var i=T.current.getFieldsValue();Object.keys(i).length>0&&(console.log(T.current),Z.d.n.addRole(a()({},T.current.getFieldsValue())),z.ZP.success({message:"\u65B0\u589E\u6210\u529F"}),T.current.resetFields(),T.current.submit())}},children:"\u63D0\u4EA4"},"submit")]}:!1,rowKey:"objectId",options:!1,type:"descriptions",cardProps:{title:"\u4E1A\u52A1\u5B9A\u5236",bordered:!0,collapsible:!0},tableAlertRender:function(i){return console.log("rest",i),(0,o.jsx)("div",{children:"\u60A8\u5DF2\u7ECF\u5F00\u59CB\u9009\u62E9\u6570\u636E"})},tableAlertOptionRender:function(i){return(0,o.jsx)(x.ZP,{onClick:function(){return i.onCleanSelected()},children:"\u60F3\u53D6\u6D88\u9009\u62E9"})},dateFormatter:"string",columns:[{key:"code",title:"code",width:260,dataIndex:"code"},{key:"name",editable:function(i,m,B){return B!==0},title:"\u89D2\u8272\u522B\u540D",dataIndex:"name",width:260},{title:"\u64CD\u4F5C",valueType:"option",width:250,render:function(i,m,B,A){return[(0,o.jsx)("a",{onClick:function(){var se;console.log(A),A==null||(se=A.startEditable)===null||se===void 0||se.call(A,m.objectId)},children:"\u7F16\u8F91"},"editable"),(0,o.jsx)(Y.Z.RecordCreator,{record:a()(a()({},m),{},{id:(Math.random()*1e6).toFixed(0)}),children:(0,o.jsx)("a",{children:"\u590D\u5236\u6B64\u9879\u5230\u672B\u5C3E"})},"copy")]}}],request:function(){var C=u()(p()().mark(function i(m,B,A){var ne;return p()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return console.log("********",m,B,A),W.next=3,Z.d.n.getRoles("",{params:{where:a()(a()({},m.code?{code:{$in:[m.code]}}:{}),m.name?{name:{$regex:m.name,$options:"i"}}:{})}});case 3:return ne=W.sent,W.abrupt("return",{data:ne.results,success:!0,total:ne.results.length});case 5:case"end":return W.stop()}},i)}));return function(i,m,B){return C.apply(this,arguments)}}()})]})};N.default=f},4701:function(fe,N,n){n.d(N,{d:function(){return p}});var G={};n.r(G),n.d(G,{Login:function(){return U},addRole:function(){return ae},getRoles:function(){return re},getUsers:function(){return Y}});var p={};n.r(p),n.d(p,{k:function(){return z},n:function(){return G}});var Q=n(43953),u=n.n(Q),te=n(39346),a=n.n(te),I=n(91184),w=n.n(I),K=n(39495);function U(O){return Z.apply(this,arguments)}function Z(){return Z=w()(u()().mark(function O(o){var f,r=arguments;return u()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return f=r.length>1&&r[1]!==void 0?r[1]:{},f.params=a()(a()({},f.params),{},{tableName:"OnlineUser"}),t.abrupt("return",(0,K.request)("",a()({method:"post",data:o,headers:{"content-type":"application/json"}},f||{})));case 3:case"end":return t.stop()}},O)})),Z.apply(this,arguments)}function Y(O){return y.apply(this,arguments)}function y(){return y=w()(u()().mark(function O(o){var f,r=arguments;return u()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return f=r.length>1&&r[1]!==void 0?r[1]:{},f.params=a()(a()({},f.params),{},{tableName:"OnlineUser"}),t.abrupt("return",(0,K.request)("",a()({method:"get",data:o},f||{})));case 3:case"end":return t.stop()}},O)})),y.apply(this,arguments)}function re(O){return E.apply(this,arguments)}function E(){return E=w()(u()().mark(function O(o){var f,r=arguments;return u()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return f=r.length>1&&r[1]!==void 0?r[1]:{},f.params=a()(a()({},f.params),{},{tableName:"Role"}),t.abrupt("return",(0,K.request)("",a()({method:"get",data:o},f||{})));case 3:case"end":return t.stop()}},O)})),E.apply(this,arguments)}function ae(O){return x.apply(this,arguments)}function x(){return x=w()(u()().mark(function O(o){var f,r=arguments;return u()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return f=r.length>1&&r[1]!==void 0?r[1]:{},f.params=a()(a()({},f.params),{},{tableName:"Role"}),t.abrupt("return",(0,K.request)("",a()({method:"post",data:o,headers:{"content-type":"application/json"}},f||{})));case 3:case"end":return t.stop()}},O)})),x.apply(this,arguments)}var z=n(18879)},18879:function(fe,N,n){n.r(N),n.d(N,{addCodeListData:function(){return z},addListindexData:function(){return w},deleteCodeListData:function(){return o},deleteListindexData:function(){return re},getCodeListData:function(){return ae},getListindexData:function(){return Y},updateListindexData:function(){return U}});var G=n(43953),p=n.n(G),Q=n(39346),u=n.n(Q),te=n(91184),a=n.n(te),I=n(39495);function w(r){return K.apply(this,arguments)}function K(){return K=a()(p()().mark(function r(b){var t,l=arguments;return p()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return t=l.length>1&&l[1]!==void 0?l[1]:{},t.params=u()(u()({},t.params),{},{tableName:"indexData"}),M.abrupt("return",(0,I.request)("",u()({method:"post",data:b,headers:{"content-type":"application/json"}},t||{})));case 3:case"end":return M.stop()}},r)})),K.apply(this,arguments)}function U(r,b){return Z.apply(this,arguments)}function Z(){return Z=a()(p()().mark(function r(b,t){var l,c,M=arguments;return p()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l=M.length>2&&M[2]!==void 0?M[2]:{},l.params=u()(u()({},l.params),{},{tableName:"indexData"}),c=(0,I.request)(b,u()({method:b?"put":"post",data:t,headers:{"content-type":"application/json"}},l||{})),e.abrupt("return",c);case 4:case"end":return e.stop()}},r)})),Z.apply(this,arguments)}function Y(r){return y.apply(this,arguments)}function y(){return y=a()(p()().mark(function r(b){var t,l,c=arguments;return p()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t=c.length>1&&c[1]!==void 0?c[1]:{},t.params=u()(u()({},t.params),{},{tableName:"indexData"}),l=(0,I.request)("",u()({method:"get",data:t.body||""},t||{})),s.abrupt("return",l);case 4:case"end":return s.stop()}},r)})),y.apply(this,arguments)}function re(r){return E.apply(this,arguments)}function E(){return E=a()(p()().mark(function r(b){var t,l,c=arguments;return p()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t=c.length>1&&c[1]!==void 0?c[1]:{},t.params=u()(u()({},t.params),{},{tableName:"indexData"}),l=(0,I.request)(b||"",u()({url:b,method:"delete",data:t.body||""},t||{})),s.abrupt("return",l);case 4:case"end":return s.stop()}},r)})),E.apply(this,arguments)}function ae(r){return x.apply(this,arguments)}function x(){return x=a()(p()().mark(function r(b){var t,l,c=arguments;return p()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t=c.length>1&&c[1]!==void 0?c[1]:{},t.params=u()(u()({},t.params),{},{tableName:"codeList"}),l=(0,I.request)("",u()({method:"get",data:t.body||""},t||{})),s.abrupt("return",l);case 4:case"end":return s.stop()}},r)})),x.apply(this,arguments)}function z(r){return O.apply(this,arguments)}function O(){return O=a()(p()().mark(function r(b){var t,l,c,M,s=arguments;return p()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return l=s.length>1&&s[1]!==void 0?s[1]:{},c=l==null||(t=l.body)===null||t===void 0?void 0:t.objectId,l.params=u()(u()({},l.params),{},{tableName:"codeList"}),M=(0,I.request)(c||"",u()({method:c?"put":"post",data:l.body||""},l||{})),j.abrupt("return",M);case 5:case"end":return j.stop()}},r)})),O.apply(this,arguments)}function o(r){return f.apply(this,arguments)}function f(){return f=a()(p()().mark(function r(b){var t,l,c=arguments;return p()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t=c.length>1&&c[1]!==void 0?c[1]:{},t.params=u()(u()({},t.params),{},{tableName:"codeList"}),l=(0,I.request)(t.objectId||"",u()({method:"delete",data:t.body||""},t||{})),s.abrupt("return",l);case 4:case"end":return s.stop()}},r)})),f.apply(this,arguments)}}}]);
