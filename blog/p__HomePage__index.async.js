"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[478],{32907:function(Y,P,t){t.r(P),t.d(P,{default:function(){return le}});var Z=t(43953),i=t.n(Z),U=t(91184),s=t.n(U),W=t(39346),l=t.n(W),L=t(2927),F=t.n(L),S=t(9083),R=t.n(S),b=t(4701),G=t(90908),I=t(39495),B=t(60958),D=t(1193),T=t(45401),E=t(98958),N=t(10145),h=t(99836),j=t(37823),o=t(67669),r=t(35170),f=t(58251),e=t(50125),a=t(38497),u=t(18879),g=t(30606),n=t(96469),M=B.Z.Option,K=function(){var ie=D.Z.useForm(),de=R()(ie,1),k=de[0],_=(0,I.useModel)("@@initialState"),$=_.initialState,ce=_.setInitialState,me=(0,a.useState)(!1),q=R()(me,2),ee=q[0],H=q[1],pe=(0,a.useState)({}),te=R()(pe,2),Ce=te[0],fe=te[1],ve=(0,a.useState)([]),ne=R()(ve,2),ae=ne[0],he=ne[1],ge=(0,a.useState)({}),re=R()(ge,2),z=re[0],V=re[1],se=function(){Q(!1),k.resetFields(),H(!1),V({})};(0,a.useEffect)(function(){b.d.k.getCodeListData("").then(function(m){he((m==null?void 0:m.results)||[])})},[ee]);var w=(0,a.useRef)(),J=(0,a.useRef)(null),ue=(0,a.useRef)(null),ye=(0,a.useState)(!1),oe=R()(ye,2),De=oe[0],Q=oe[1];return(0,a.useEffect)(function(){},[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(G.Z,{actionRef:w,rowKey:function(p){return"key"+p.keyyy},search:{defaultFormItemsNumber:1,submitterColSpanProps:{span:12,flex:1},optionRender:function(p,d,c){return[(0,n.jsx)(T.ZP,{icon:(0,n.jsx)(g.Z,{}),onClick:function(){H(!0),V({})},children:"\u65B0\u589E"},"aa"),(0,n.jsxs)(T.ZP,{onClick:function(){ce(l()(l()({},$),{},{menuRenderFlag:!($!=null&&$.menuRenderFlag)}))},children:["\u4FA7\u8FB9\u83DC\u5355",$!=null&&$.menuRenderFlag?"\u663E\u793A":"\u9690\u85CF"]},"bb")].concat(F()(c))}},columns:[{key:"title",title:"\u6807\u9898",width:260,dataIndex:"title"},{key:"moduleType",title:"\u7C7B\u578B",width:100,dataIndex:"moduleType",render:function(p,d,c,C,v){var O=ae.find(function(y){return y.code===d.moduleType});return O&&O.name}},{key:"content",title:"\u5185\u5BB9",dataIndex:"content",ellipsis:!0},{key:"",title:"\u64CD\u4F5C",width:160,align:"center",dataIndex:"action",search:!1,render:function(p,d){return(0,n.jsxs)(E.Z,{children:[(0,n.jsx)(T.ZP,{type:"link",onClick:function(){console.log(d),H(!0),fe(d),k.setFieldsValue(d),V(l()({},d))},children:"\u7F16\u8F91"}),(0,n.jsx)(T.ZP,{type:"link",danger:!0,onClick:function(){N.Z.confirm({title:"\u786E\u8BA4\u5220\u9664\u4E48\uFF1F",content:(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(h.Z,{ref:ue})}),onOk:function(){var v,O=(v=ue.current)===null||v===void 0||(v=v.input)===null||v===void 0?void 0:v.value;b.d.k.deleteListindexData("".concat(d.objectId)).then(function(y){if((y==null?void 0:y.code)==null){var x;j.ZP.success({content:"\u5220\u9664\u6210\u529F\uFF01"}),w==null||(x=w.current)===null||x===void 0||x.reload()}})}})},children:"\u5220\u9664"})]})}}],pagination:{showSizeChanger:!0},request:function(){var m=s()(i()().mark(function p(d,c,C){var v;return i()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return console.log("********",d,c,C),y.next=3,b.d.k.getListindexData("",{params:{skip:(d.current-1)*d.pageSize,limit:d.pageSize,order:"-createdAt",count:1}});case 3:return v=y.sent,v.results.map(function(x){x.keyyy=x.objectId+Math.random()}),console.log("dddddddddd>>>>>"),y.abrupt("return",{data:v.results,success:!0,total:v.count||0});case 7:case"end":return y.stop()}},p)}));return function(p,d,c){return m.apply(this,arguments)}}()}),(0,n.jsx)(N.Z,{okText:(0,n.jsx)(T.ZP,{type:"primary",loading:De,onClick:s()(i()().mark(function m(){var p,d,c,C,v,O,y,x,X;return i()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:if(d=k.validateFields(),d){A.next=3;break}return A.abrupt("return");case 3:return Q(!0),c=(p=J.current)===null||p===void 0||(p=p.unprivilegedEditor)===null||p===void 0?void 0:p.getHTML(),console.log(c),C=z.title,v=z.content,O=z.moduleType,y=k.getFieldsValue(),A.next=10,(0,u.updateListindexData)(z.objectId,JSON.stringify({title:y.title,content:c,moduleType:y.moduleType}),{});case 10:x=A.sent,x!=null&&x.objectId&&(j.ZP.success({content:"\u64CD\u4F5C\u6210\u529F"}),w==null||(X=w.current)===null||X===void 0||X.reload()),se(),Q(!1);case 14:case"end":return A.stop()}},m)})),children:"\u4FDD\u5B58"}),maskClosable:!1,title:"\u5BCC\u6587\u672C",width:800,open:ee,onCancel:function(){return se()},children:(0,n.jsxs)("div",{style:{height:500,overflow:"auto"},children:[(0,n.jsxs)(D.Z,{form:k,children:[(0,n.jsx)(D.Z.Item,{name:"moduleType",label:"\u7C7B\u578B",rules:[{required:!0,message:"\u7C7B\u578B\u5FC5\u9009\uFF01"}],children:(0,n.jsx)(B.Z,{children:ae.map(function(m){return(0,n.jsx)(M,{value:m.code,children:m.name},m.objectId)})})}),(0,n.jsx)(D.Z.Item,{name:"title",label:"\u540D\u79F0",rules:[{required:!0,message:"\u540D\u79F0\u5FC5\u586B\uFF01"}],children:(0,n.jsx)(h.Z,{})})]}),(0,n.jsx)(f.Z,{ref:J,onKeyDown:function(p){if(p.code=="Enter"&&p.altKey){var d,c=(d=J.current)===null||d===void 0?void 0:d.editor;if(c){var C=c.getLength();c.insertText(C,`
`,"user"),c.setSelection(c.getLength(),0)}}},modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:[1,2,3,4,5,6,!1]}],[{list:"ordered"},{list:"bullet"}],["link","image","video"],["clean"]],syntax:{hljs:{highlight:function(p,d){for(var c=arguments.length,C=new Array(c>2?c-2:0),v=2;v<c;v++)C[v-2]=arguments[v];console.log(C);var O=o.Z.highlight(p,d);return console.log("vvvvvv>>>",O),O}}}},theme:"snow",value:z.content,onChange:function(p){}})]})})]})},le=K},4701:function(Y,P,t){t.d(P,{d:function(){return i}});var Z={};t.r(Z),t.d(Z,{Login:function(){return R},addRole:function(){return T},getRoles:function(){return B},getUsers:function(){return G}});var i={};t.r(i),t.d(i,{k:function(){return N},n:function(){return Z}});var U=t(43953),s=t.n(U),W=t(39346),l=t.n(W),L=t(91184),F=t.n(L),S=t(39495);function R(h){return b.apply(this,arguments)}function b(){return b=F()(s()().mark(function h(j){var o,r=arguments;return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=r.length>1&&r[1]!==void 0?r[1]:{},o.params=l()(l()({},o.params),{},{tableName:"OnlineUser"}),e.abrupt("return",(0,S.request)("",l()({method:"post",data:j,headers:{"content-type":"application/json"}},o||{})));case 3:case"end":return e.stop()}},h)})),b.apply(this,arguments)}function G(h){return I.apply(this,arguments)}function I(){return I=F()(s()().mark(function h(j){var o,r=arguments;return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=r.length>1&&r[1]!==void 0?r[1]:{},o.params=l()(l()({},o.params),{},{tableName:"OnlineUser"}),e.abrupt("return",(0,S.request)("",l()({method:"get",data:j},o||{})));case 3:case"end":return e.stop()}},h)})),I.apply(this,arguments)}function B(h){return D.apply(this,arguments)}function D(){return D=F()(s()().mark(function h(j){var o,r=arguments;return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=r.length>1&&r[1]!==void 0?r[1]:{},o.params=l()(l()({},o.params),{},{tableName:"Role"}),e.abrupt("return",(0,S.request)("",l()({method:"get",data:j},o||{})));case 3:case"end":return e.stop()}},h)})),D.apply(this,arguments)}function T(h){return E.apply(this,arguments)}function E(){return E=F()(s()().mark(function h(j){var o,r=arguments;return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=r.length>1&&r[1]!==void 0?r[1]:{},o.params=l()(l()({},o.params),{},{tableName:"Role"}),e.abrupt("return",(0,S.request)("",l()({method:"post",data:j,headers:{"content-type":"application/json"}},o||{})));case 3:case"end":return e.stop()}},h)})),E.apply(this,arguments)}var N=t(18879)},18879:function(Y,P,t){t.r(P),t.d(P,{addCodeListData:function(){return N},addListindexData:function(){return F},deleteCodeListData:function(){return j},deleteListindexData:function(){return B},getCodeListData:function(){return T},getListindexData:function(){return G},updateListindexData:function(){return R}});var Z=t(43953),i=t.n(Z),U=t(39346),s=t.n(U),W=t(91184),l=t.n(W),L=t(39495);function F(r){return S.apply(this,arguments)}function S(){return S=l()(i()().mark(function r(f){var e,a=arguments;return i()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return e=a.length>1&&a[1]!==void 0?a[1]:{},e.params=s()(s()({},e.params),{},{tableName:"indexData"}),g.abrupt("return",(0,L.request)("",s()({method:"post",data:f,headers:{"content-type":"application/json"}},e||{})));case 3:case"end":return g.stop()}},r)})),S.apply(this,arguments)}function R(r,f){return b.apply(this,arguments)}function b(){return b=l()(i()().mark(function r(f,e){var a,u,g=arguments;return i()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return a=g.length>2&&g[2]!==void 0?g[2]:{},a.params=s()(s()({},a.params),{},{tableName:"indexData"}),u=(0,L.request)(f,s()({method:f?"put":"post",data:e,headers:{"content-type":"application/json"}},a||{})),M.abrupt("return",u);case 4:case"end":return M.stop()}},r)})),b.apply(this,arguments)}function G(r){return I.apply(this,arguments)}function I(){return I=l()(i()().mark(function r(f){var e,a,u=arguments;return i()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e=u.length>1&&u[1]!==void 0?u[1]:{},e.params=s()(s()({},e.params),{},{tableName:"indexData"}),a=(0,L.request)("",s()({method:"get",data:e.body||""},e||{})),n.abrupt("return",a);case 4:case"end":return n.stop()}},r)})),I.apply(this,arguments)}function B(r){return D.apply(this,arguments)}function D(){return D=l()(i()().mark(function r(f){var e,a,u=arguments;return i()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e=u.length>1&&u[1]!==void 0?u[1]:{},e.params=s()(s()({},e.params),{},{tableName:"indexData"}),a=(0,L.request)(f||"",s()({url:f,method:"delete",data:e.body||""},e||{})),n.abrupt("return",a);case 4:case"end":return n.stop()}},r)})),D.apply(this,arguments)}function T(r){return E.apply(this,arguments)}function E(){return E=l()(i()().mark(function r(f){var e,a,u=arguments;return i()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e=u.length>1&&u[1]!==void 0?u[1]:{},e.params=s()(s()({},e.params),{},{tableName:"codeList"}),a=(0,L.request)("",s()({method:"get",data:e.body||""},e||{})),n.abrupt("return",a);case 4:case"end":return n.stop()}},r)})),E.apply(this,arguments)}function N(r){return h.apply(this,arguments)}function h(){return h=l()(i()().mark(function r(f){var e,a,u,g,n=arguments;return i()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return a=n.length>1&&n[1]!==void 0?n[1]:{},u=a==null||(e=a.body)===null||e===void 0?void 0:e.objectId,a.params=s()(s()({},a.params),{},{tableName:"codeList"}),g=(0,L.request)(u||"",s()({method:u?"put":"post",data:a.body||""},a||{})),K.abrupt("return",g);case 5:case"end":return K.stop()}},r)})),h.apply(this,arguments)}function j(r){return o.apply(this,arguments)}function o(){return o=l()(i()().mark(function r(f){var e,a,u=arguments;return i()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e=u.length>1&&u[1]!==void 0?u[1]:{},e.params=s()(s()({},e.params),{},{tableName:"codeList"}),a=(0,L.request)(e.objectId||"",s()({method:"delete",data:e.body||""},e||{})),n.abrupt("return",a);case 4:case"end":return n.stop()}},r)})),o.apply(this,arguments)}}}]);
