"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[478],{32907:function(Y,F,t){t.r(F),t.d(F,{default:function(){return ie}});var P=t(43953),l=t.n(P),K=t(91184),u=t.n(K),W=t(39346),i=t.n(W),j=t(2927),R=t.n(j),C=t(9083),x=t.n(C),b=t(4701),k=t(90908),I=t(39495),A=t(60958),y=t(1193),T=t(45401),E=t(98958),N=t(10145),S=t(99836),B=t(37823),m=t(67669),o=t(35170),s=t(58251),e=t(50125),r=t(38497),n=t(18879),g=t(30606),a=t(96469),Z=A.Z.Option,U=function(){var le=y.Z.useForm(),de=x()(le,1),G=de[0],_=(0,I.useModel)("@@initialState"),M=_.initialState,ce=_.setInitialState,me=(0,r.useState)(!1),q=x()(me,2),ee=q[0],H=q[1],pe=(0,r.useState)({}),te=x()(pe,2),Ce=te[0],fe=te[1],ve=(0,r.useState)([]),ne=x()(ve,2),ae=ne[0],ge=ne[1],he=(0,r.useState)({}),re=x()(he,2),z=re[0],V=re[1],se=function(){Q(!1),G.resetFields(),H(!1),V({})};(0,r.useEffect)(function(){b.d.k.getCodeListData("").then(function(p){ge((p==null?void 0:p.results)||[])})},[ee]);var w=(0,r.useRef)(),J=(0,r.useRef)(null),ue=(0,r.useRef)(null),ye=(0,r.useState)(!1),oe=x()(ye,2),De=oe[0],Q=oe[1];return(0,r.useEffect)(function(){},[]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(k.Z,{actionRef:w,rowKey:function(f){return"key"+f.keyyy},search:{defaultFormItemsNumber:1,submitterColSpanProps:{span:12,flex:1},optionRender:function(f,d,c){return[(0,a.jsx)(T.ZP,{icon:(0,a.jsx)(g.Z,{}),onClick:function(){H(!0),V({})},children:"\u65B0\u589E"},"aa"),(0,a.jsxs)(T.ZP,{onClick:function(){ce(i()(i()({},M),{},{menuRenderFlag:!(M!=null&&M.menuRenderFlag)}))},children:["\u4FA7\u8FB9\u83DC\u5355",M!=null&&M.menuRenderFlag?"\u663E\u793A":"\u9690\u85CF"]},"bb")].concat(R()(c))}},columns:[{key:"title",title:"\u6807\u9898",width:260,dataIndex:"title"},{key:"moduleType",title:"\u7C7B\u578B",width:100,dataIndex:"moduleType",render:function(f,d,c,D,v){var O=ae.find(function(h){return h.code===d.moduleType});return O&&O.name}},{key:"content",title:"\u5185\u5BB9",dataIndex:"content",ellipsis:!0},{key:"",title:"\u64CD\u4F5C",width:160,align:"center",dataIndex:"action",search:!1,render:function(f,d){return(0,a.jsxs)(E.Z,{children:[(0,a.jsx)(T.ZP,{type:"link",onClick:function(){console.log(d),H(!0),fe(d),G.setFieldsValue(d),V(i()({},d))},children:"\u7F16\u8F91"}),(0,a.jsx)(T.ZP,{type:"link",danger:!0,onClick:function(){N.Z.confirm({title:"\u786E\u8BA4\u5220\u9664\u4E48\uFF1F",content:(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(S.Z,{ref:ue})}),onOk:function(){var v,O=(v=ue.current)===null||v===void 0||(v=v.input)===null||v===void 0?void 0:v.value;b.d.k.deleteListindexData("".concat(d.objectId)).then(function(h){if((h==null?void 0:h.code)==null){var L;B.ZP.success({content:"\u5220\u9664\u6210\u529F\uFF01"}),w==null||(L=w.current)===null||L===void 0||L.reload()}})}})},children:"\u5220\u9664"})]})}}],pagination:{showSizeChanger:!0},request:function(){var p=u()(l()().mark(function f(d,c,D){var v;return l()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return console.log("********",d,c,D),h.next=3,b.d.k.getListindexData("",{params:{skip:(d.current-1)*d.pageSize,limit:d.pageSize,order:"-createdAt",count:1}});case 3:return v=h.sent,v.results.map(function(L){L.keyyy=L.objectId+Math.random()}),console.log("dddddddddd>>>>>"),h.abrupt("return",{data:v.results,success:!0,total:v.count||0});case 7:case"end":return h.stop()}},f)}));return function(f,d,c){return p.apply(this,arguments)}}()}),(0,a.jsx)(N.Z,{okText:(0,a.jsx)(T.ZP,{type:"primary",loading:De,onClick:u()(l()().mark(function p(){var f,d,c,D,v,O,h,L,X;return l()().wrap(function($){for(;;)switch($.prev=$.next){case 0:if(d=G.validateFields(),d){$.next=3;break}return $.abrupt("return");case 3:return Q(!0),c=(f=J.current)===null||f===void 0||(f=f.unprivilegedEditor)===null||f===void 0?void 0:f.getHTML(),console.log(c),D=z.title,v=z.content,O=z.moduleType,h=G.getFieldsValue(),$.next=10,(0,n.updateListindexData)(z.objectId,JSON.stringify({title:h.title,content:c,moduleType:h.moduleType}),{});case 10:L=$.sent,L!=null&&L.objectId&&(B.ZP.success({content:"\u64CD\u4F5C\u6210\u529F"}),w==null||(X=w.current)===null||X===void 0||X.reload()),se(),Q(!1);case 14:case"end":return $.stop()}},p)})),children:"\u4FDD\u5B58"}),maskClosable:!1,title:"\u5BCC\u6587\u672C",width:800,open:ee,onCancel:function(){return se()},children:(0,a.jsxs)("div",{style:{height:500,overflow:"auto"},children:[(0,a.jsxs)(y.Z,{form:G,children:[(0,a.jsx)(y.Z.Item,{name:"moduleType",label:"\u7C7B\u578B",rules:[{required:!0,message:"\u7C7B\u578B\u5FC5\u9009\uFF01"}],children:(0,a.jsx)(A.Z,{children:ae.map(function(p){return(0,a.jsx)(Z,{value:p.code,children:p.name},p.objectId)})})}),(0,a.jsx)(y.Z.Item,{name:"title",label:"\u540D\u79F0",rules:[{required:!0,message:"\u540D\u79F0\u5FC5\u586B\uFF01"}],children:(0,a.jsx)(S.Z,{})})]}),(0,a.jsx)(s.Z,{ref:J,onKeyDown:function(f){if(f.code=="Enter"&&f.altKey){var d,c=(d=J.current)===null||d===void 0?void 0:d.editor;if(c){var D=c.getLength();c.insertText(D,`
`,"user"),c.setSelection(c.getLength(),0)}}},modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:[1,2,3,4,5,6,!1]}],[{list:"ordered"},{list:"bullet"}],["link","image","video"],["clean"]],syntax:{hljs:{highlight:function(f,d){for(var c=arguments.length,D=new Array(c>2?c-2:0),v=2;v<c;v++)D[v-2]=arguments[v];console.log(D);var O=m.Z.highlight(f,d);return console.log("vvvvvv>>>",O),O}}}},theme:"snow",value:z.content,onChange:function(f){}})]})})]})},ie=U},4701:function(Y,F,t){t.d(F,{d:function(){return l}});var P={};t.r(P),t.d(P,{Login:function(){return x},addRole:function(){return N},getRoles:function(){return T},getUsers:function(){return A},registryfn:function(){return k}});var l={};t.r(l),t.d(l,{k:function(){return B},n:function(){return P}});var K=t(43953),u=t.n(K),W=t(39346),i=t.n(W),j=t(91184),R=t.n(j),C=t(39495);function x(m){return b.apply(this,arguments)}function b(){return b=R()(u()().mark(function m(o){var s,e=arguments;return u()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return s=e.length>1&&e[1]!==void 0?e[1]:{},s.params=i()(i()({},s.params),{},{tableName:"OnlineUser"}),n.abrupt("return",(0,C.request)("",i()({method:"get",data:o},s||{})));case 3:case"end":return n.stop()}},m)})),b.apply(this,arguments)}function k(m){return I.apply(this,arguments)}function I(){return I=R()(u()().mark(function m(o){var s,e=arguments;return u()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return s=e.length>1&&e[1]!==void 0?e[1]:{},s.params=i()(i()({},s.params),{},{tableName:"OnlineUser"}),n.abrupt("return",(0,C.request)("",i()({method:"post",data:o,headers:{"content-type":"application/json"}},s||{})));case 3:case"end":return n.stop()}},m)})),I.apply(this,arguments)}function A(m){return y.apply(this,arguments)}function y(){return y=R()(u()().mark(function m(o){var s,e=arguments;return u()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return s=e.length>1&&e[1]!==void 0?e[1]:{},s.params=i()(i()({},s.params),{},{tableName:"OnlineUser"}),n.abrupt("return",(0,C.request)("",i()({method:"get",data:o},s||{})));case 3:case"end":return n.stop()}},m)})),y.apply(this,arguments)}function T(m){return E.apply(this,arguments)}function E(){return E=R()(u()().mark(function m(o){var s,e=arguments;return u()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return s=e.length>1&&e[1]!==void 0?e[1]:{},s.params=i()(i()({},s.params),{},{tableName:"Role"}),n.abrupt("return",(0,C.request)("",i()({method:"get",data:o},s||{})));case 3:case"end":return n.stop()}},m)})),E.apply(this,arguments)}function N(m){return S.apply(this,arguments)}function S(){return S=R()(u()().mark(function m(o){var s,e=arguments;return u()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return s=e.length>1&&e[1]!==void 0?e[1]:{},s.params=i()(i()({},s.params),{},{tableName:"Role"}),n.abrupt("return",(0,C.request)("",i()({method:"post",data:o,headers:{"content-type":"application/json"}},s||{})));case 3:case"end":return n.stop()}},m)})),S.apply(this,arguments)}var B=t(18879)},18879:function(Y,F,t){t.r(F),t.d(F,{addCodeListData:function(){return N},addListindexData:function(){return R},deleteCodeListData:function(){return B},deleteListindexData:function(){return A},getCodeListData:function(){return T},getListindexData:function(){return k},updateListindexData:function(){return x}});var P=t(43953),l=t.n(P),K=t(39346),u=t.n(K),W=t(91184),i=t.n(W),j=t(39495);function R(o){return C.apply(this,arguments)}function C(){return C=i()(l()().mark(function o(s){var e,r=arguments;return l()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return e=r.length>1&&r[1]!==void 0?r[1]:{},e.params=u()(u()({},e.params),{},{tableName:"indexData"}),g.abrupt("return",(0,j.request)("",u()({method:"post",data:s,headers:{"content-type":"application/json"}},e||{})));case 3:case"end":return g.stop()}},o)})),C.apply(this,arguments)}function x(o,s){return b.apply(this,arguments)}function b(){return b=i()(l()().mark(function o(s,e){var r,n,g=arguments;return l()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return r=g.length>2&&g[2]!==void 0?g[2]:{},r.params=u()(u()({},r.params),{},{tableName:"indexData"}),n=(0,j.request)(s,u()({method:s?"put":"post",data:e,headers:{"content-type":"application/json"}},r||{})),Z.abrupt("return",n);case 4:case"end":return Z.stop()}},o)})),b.apply(this,arguments)}function k(o){return I.apply(this,arguments)}function I(){return I=i()(l()().mark(function o(s){var e,r,n=arguments;return l()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e=n.length>1&&n[1]!==void 0?n[1]:{},e.params=u()(u()({},e.params),{},{tableName:"indexData"}),r=(0,j.request)("",u()({method:"get",data:e.body||""},e||{})),a.abrupt("return",r);case 4:case"end":return a.stop()}},o)})),I.apply(this,arguments)}function A(o){return y.apply(this,arguments)}function y(){return y=i()(l()().mark(function o(s){var e,r,n=arguments;return l()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e=n.length>1&&n[1]!==void 0?n[1]:{},e.params=u()(u()({},e.params),{},{tableName:"indexData"}),r=(0,j.request)(s||"",u()({url:s,method:"delete",data:e.body||""},e||{})),a.abrupt("return",r);case 4:case"end":return a.stop()}},o)})),y.apply(this,arguments)}function T(o){return E.apply(this,arguments)}function E(){return E=i()(l()().mark(function o(s){var e,r,n=arguments;return l()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e=n.length>1&&n[1]!==void 0?n[1]:{},e.params=u()(u()({},e.params),{},{tableName:"codeList"}),r=(0,j.request)("",u()({method:"get",data:e.body||""},e||{})),a.abrupt("return",r);case 4:case"end":return a.stop()}},o)})),E.apply(this,arguments)}function N(o){return S.apply(this,arguments)}function S(){return S=i()(l()().mark(function o(s){var e,r,n,g,a=arguments;return l()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return r=a.length>1&&a[1]!==void 0?a[1]:{},n=r==null||(e=r.body)===null||e===void 0?void 0:e.objectId,r.params=u()(u()({},r.params),{},{tableName:"codeList"}),g=(0,j.request)(n||"",u()({method:n?"put":"post",data:r.body||""},r||{})),U.abrupt("return",g);case 5:case"end":return U.stop()}},o)})),S.apply(this,arguments)}function B(o){return m.apply(this,arguments)}function m(){return m=i()(l()().mark(function o(s){var e,r,n=arguments;return l()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e=n.length>1&&n[1]!==void 0?n[1]:{},e.params=u()(u()({},e.params),{},{tableName:"codeList"}),r=(0,j.request)(e.objectId||"",u()({method:"delete",data:e.body||""},e||{})),a.abrupt("return",r);case 4:case"end":return a.stop()}},o)})),m.apply(this,arguments)}}}]);
