(self.webpackChunk=self.webpackChunk||[]).push([[305],{88350:function(Y,U,z){"use strict";z.d(U,{T:function(){return p}});var o=z(49188);class ${constructor(){this.cells=[]}copy(n,t,e={}){this.options=Object.assign({},e);const r=(o.Hn.isModel(t)?t:t.model).cloneSubGraph(n,e);this.cells=o.RO.sortBy(Object.keys(r).map(i=>r[i]),i=>i.isEdge()?2:1),this.serialize(e)}cut(n,t,e={}){this.copy(n,t,e),(o.kJ.isGraph(t)?t.model:t).batchUpdate("cut",()=>{n.forEach(r=>r.remove())})}paste(n,t={}){const e=Object.assign(Object.assign({},this.options),t),{offset:s,edgeProps:r,nodeProps:i}=e;let a=20,l=20;s&&(a=typeof s=="number"?s:s.dx,l=typeof s=="number"?s:s.dy),this.deserialize(e);const d=this.cells;d.forEach(g=>{g.model=null,g.removeProp("zIndex"),(a||l)&&g.translate(a,l),i&&g.isNode()&&g.prop(i),r&&g.isEdge()&&g.prop(r)});const u=o.kJ.isGraph(n)?n.model:n;return u.batchUpdate("paste",()=>{u.addCells(this.cells)}),this.copy(d,n,t),d}serialize(n){n.useLocalStorage!==!1&&R.save(this.cells)}deserialize(n){if(n.useLocalStorage){const t=R.fetch();t&&(this.cells=t)}}isEmpty(n={}){return n.useLocalStorage&&this.deserialize(n),this.cells.length<=0}clean(){this.options={},this.cells=[],R.clean()}}var R;(function(h){const n=`${o.De.prefixCls}.clipboard.cells`;function t(r){if(window.localStorage){const i=r.map(a=>a.toJSON());localStorage.setItem(n,JSON.stringify(i))}}h.save=t;function e(){if(window.localStorage){const r=localStorage.getItem(n),i=r?JSON.parse(r):[];if(i)return o.Hn.fromJSON(i)}}h.fetch=e;function s(){window.localStorage&&localStorage.removeItem(n)}h.clean=s})(R||(R={})),o.kJ.prototype.isClipboardEnabled=function(){const h=this.getPlugin("clipboard");return h?h.isEnabled():!1},o.kJ.prototype.enableClipboard=function(){const h=this.getPlugin("clipboard");return h&&h.enable(),this},o.kJ.prototype.disableClipboard=function(){const h=this.getPlugin("clipboard");return h&&h.disable(),this},o.kJ.prototype.toggleClipboard=function(h){const n=this.getPlugin("clipboard");return n&&n.toggleEnabled(h),this},o.kJ.prototype.isClipboardEmpty=function(h){const n=this.getPlugin("clipboard");return n?n.isEmpty(h):!0},o.kJ.prototype.getCellsInClipboard=function(){const h=this.getPlugin("clipboard");return h?h.getCellsInClipboard():[]},o.kJ.prototype.cleanClipboard=function(){const h=this.getPlugin("clipboard");return h&&h.clean(),this},o.kJ.prototype.copy=function(h,n){const t=this.getPlugin("clipboard");return t&&t.copy(h,n),this},o.kJ.prototype.cut=function(h,n){const t=this.getPlugin("clipboard");return t&&t.cut(h,n),this},o.kJ.prototype.paste=function(h,n){const t=this.getPlugin("clipboard");return t?t.paste(h,n):[]};var x=function(h,n,t,e){var s=arguments.length,r=s<3?n:e===null?e=Object.getOwnPropertyDescriptor(n,t):e,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(h,n,t,e);else for(var a=h.length-1;a>=0;a--)(i=h[a])&&(r=(s<3?i(r):s>3?i(n,t,r):i(n,t))||r);return s>3&&r&&Object.defineProperty(n,t,r),r},w=function(h,n){var t={};for(var e in h)Object.prototype.hasOwnProperty.call(h,e)&&n.indexOf(e)<0&&(t[e]=h[e]);if(h!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,e=Object.getOwnPropertySymbols(h);s<e.length;s++)n.indexOf(e[s])<0&&Object.prototype.propertyIsEnumerable.call(h,e[s])&&(t[e[s]]=h[e[s]]);return t};class p extends o.ew{get disabled(){return this.options.enabled!==!0}get cells(){return this.clipboardImpl.cells}constructor(n={}){super(),this.name="clipboard",this.options=Object.assign({enabled:!0},n)}init(n){this.graph=n,this.clipboardImpl=new $,this.clipboardImpl.deserialize(this.options)}isEnabled(){return!this.disabled}enable(){this.disabled&&(this.options.enabled=!0)}disable(){this.disabled||(this.options.enabled=!1)}toggleEnabled(n){return n!=null?n!==this.isEnabled()&&(n?this.enable():this.disable()):this.isEnabled()?this.disable():this.enable(),this}isEmpty(n={}){return this.clipboardImpl.isEmpty(n)}getCellsInClipboard(){return this.cells}clean(n){return(!this.disabled||n)&&(this.clipboardImpl.clean(),this.notify("clipboard:changed",{cells:[]})),this}copy(n,t={}){return this.disabled||(this.clipboardImpl.copy(n,this.graph,Object.assign(Object.assign({},this.commonOptions),t)),this.notify("clipboard:changed",{cells:n})),this}cut(n,t={}){return this.disabled||(this.clipboardImpl.cut(n,this.graph,Object.assign(Object.assign({},this.commonOptions),t)),this.notify("clipboard:changed",{cells:n})),this}paste(n={},t=this.graph){return this.disabled?[]:this.clipboardImpl.paste(t,Object.assign(Object.assign({},this.commonOptions),n))}get commonOptions(){const n=this.options,{enabled:t}=n;return w(n,["enabled"])}notify(n,t){this.trigger(n,t),this.graph.trigger(n,t)}dispose(){this.clean(!0),this.off()}}x([o.ew.dispose()],p.prototype,"dispose",null)},80062:function(Y,U,z){"use strict";z.d(U,{A:function(){return R}});var o=z(49188);o.kJ.prototype.isHistoryEnabled=function(){const w=this.getPlugin("history");return w?w.isEnabled():!1},o.kJ.prototype.enableHistory=function(){const w=this.getPlugin("history");return w&&w.enable(),this},o.kJ.prototype.disableHistory=function(){const w=this.getPlugin("history");return w&&w.disable(),this},o.kJ.prototype.toggleHistory=function(w){const p=this.getPlugin("history");return p&&p.toggleEnabled(w),this},o.kJ.prototype.undo=function(w){const p=this.getPlugin("history");return p&&p.undo(w),this},o.kJ.prototype.redo=function(w){const p=this.getPlugin("history");return p&&p.redo(w),this},o.kJ.prototype.undoAndCancel=function(w){const p=this.getPlugin("history");return p&&p.cancel(w),this},o.kJ.prototype.canUndo=function(){const w=this.getPlugin("history");return w?w.canUndo():!1},o.kJ.prototype.canRedo=function(){const w=this.getPlugin("history");return w?w.canRedo():!1},o.kJ.prototype.cleanHistory=function(w){const p=this.getPlugin("history");return p&&p.clean(w),this},o.kJ.prototype.getHistoryStackSize=function(){return this.getPlugin("history").getSize()},o.kJ.prototype.getUndoStackSize=function(){return this.getPlugin("history").getUndoSize()},o.kJ.prototype.getRedoStackSize=function(){return this.getPlugin("history").getRedoSize()},o.kJ.prototype.getUndoRemainSize=function(){return this.getPlugin("history").getUndoRemainSize()};var $=function(w,p,h,n){var t=arguments.length,e=t<3?p:n===null?n=Object.getOwnPropertyDescriptor(p,h):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")e=Reflect.decorate(w,p,h,n);else for(var r=w.length-1;r>=0;r--)(s=w[r])&&(e=(t<3?s(e):t>3?s(p,h,e):s(p,h))||e);return t>3&&e&&Object.defineProperty(p,h,e),e};class R extends o.ew{constructor(p={}){super(),this.name="history",this.batchCommands=null,this.batchLevel=0,this.lastBatchIndex=-1,this.freezed=!1,this.stackSize=0,this.handlers=[];const{stackSize:h=0}=p;this.stackSize=h,this.options=x.getOptions(p),this.validator=new R.Validator({history:this,cancelInvalid:this.options.cancelInvalid})}init(p){this.graph=p,this.model=this.graph.model,this.clean(),this.startListening()}isEnabled(){return!this.disabled}enable(){this.disabled&&(this.options.enabled=!0)}disable(){this.disabled||(this.options.enabled=!1)}toggleEnabled(p){return p!=null?p!==this.isEnabled()&&(p?this.enable():this.disable()):this.isEnabled()?this.disable():this.enable(),this}undo(p={}){if(!this.disabled){const h=this.undoStack.pop();h&&(this.revertCommand(h,p),this.redoStack.push(h),this.notify("undo",h,p))}return this}redo(p={}){if(!this.disabled){const h=this.redoStack.pop();h&&(this.applyCommand(h,p),this.undoStackPush(h),this.notify("redo",h,p))}return this}cancel(p={}){if(!this.disabled){const h=this.undoStack.pop();h&&(this.revertCommand(h,p),this.redoStack=[],this.notify("cancel",h,p))}return this}getSize(){return this.stackSize}getUndoRemainSize(){const p=this.undoStack.length;return this.stackSize-p}getUndoSize(){return this.undoStack.length}getRedoSize(){return this.redoStack.length}canUndo(){return!this.disabled&&this.undoStack.length>0}canRedo(){return!this.disabled&&this.redoStack.length>0}clean(p={}){return this.undoStack=[],this.redoStack=[],this.notify("clean",null,p),this}get disabled(){return this.options.enabled!==!0}validate(p,...h){return this.validator.validate(p,...h),this}startListening(){this.model.on("batch:start",this.initBatchCommand,this),this.model.on("batch:stop",this.storeBatchCommand,this),this.options.eventNames&&this.options.eventNames.forEach((p,h)=>{this.handlers[h]=this.addCommand.bind(this,p),this.model.on(p,this.handlers[h])}),this.validator.on("invalid",p=>this.trigger("invalid",p))}stopListening(){this.model.off("batch:start",this.initBatchCommand,this),this.model.off("batch:stop",this.storeBatchCommand,this),this.options.eventNames&&(this.options.eventNames.forEach((p,h)=>{this.model.off(p,this.handlers[h])}),this.handlers.length=0),this.validator.off("invalid")}createCommand(p){return{batch:p?p.batch:!1,data:{}}}revertCommand(p,h){this.freezed=!0;const n=Array.isArray(p)?x.sortBatchCommands(p):[p];for(let t=n.length-1;t>=0;t-=1){const e=n[t],s=Object.assign(Object.assign({},h),o.QK.pick(e.options,this.options.revertOptionsList||[]));this.executeCommand(e,!0,s)}this.freezed=!1}applyCommand(p,h){this.freezed=!0;const n=Array.isArray(p)?x.sortBatchCommands(p):[p];for(let t=0;t<n.length;t+=1){const e=n[t],s=Object.assign(Object.assign({},h),o.QK.pick(e.options,this.options.applyOptionsList||[]));this.executeCommand(e,!1,s)}this.freezed=!1}executeCommand(p,h,n){const t=this.model,e=t.getCell(p.data.id),s=p.event;if(x.isAddEvent(s)&&h||x.isRemoveEvent(s)&&!h)e&&e.remove(n);else if(x.isAddEvent(s)&&!h||x.isRemoveEvent(s)&&h){const r=p.data;r.node?t.addNode(r.props,n):r.edge&&t.addEdge(r.props,n)}else if(x.isChangeEvent(s)){const r=p.data,i=r.key;if(i&&e){const a=h?r.prev[i]:r.next[i];r.key==="attrs"&&this.ensureUndefinedAttrs(a,h?r.next[i]:r.prev[i])&&(n.dirty=!0),e.prop(i,a,n)}}else{const r=this.options.executeCommand;r&&o.Iw.call(r,this,p,h,n)}}addCommand(p,h){if(this.freezed||this.disabled)return;const n=h,t=n.options||{};if(t.dryrun||x.isAddEvent(p)&&this.options.ignoreAdd||x.isRemoveEvent(p)&&this.options.ignoreRemove||x.isChangeEvent(p)&&this.options.ignoreChange)return;const e=this.options.beforeAddCommand;if(e!=null&&o.Iw.call(e,this,p,h)===!1)return;p==="cell:change:*"&&(p=`cell:change:${n.key}`);const s=n.cell,r=o.Hn.isModel(s);let i;if(this.batchCommands){i=this.batchCommands[Math.max(this.lastBatchIndex,0)];const l=r&&!i.modelChange||i.data.id!==s.id,d=i.event!==p;if(this.lastBatchIndex>=0&&(l||d)){const u=this.batchCommands.findIndex(g=>(r&&g.modelChange||g.data.id===s.id)&&g.event===p);u<0||x.isAddEvent(p)||x.isRemoveEvent(p)?i=this.createCommand({batch:!0}):(i=this.batchCommands[u],this.batchCommands.splice(u,1)),this.batchCommands.push(i),this.lastBatchIndex=this.batchCommands.length-1}}else i=this.createCommand({batch:!1});if(x.isAddEvent(p)||x.isRemoveEvent(p)){const l=i.data;return i.event=p,i.options=t,l.id=s.id,l.props=o.QK.cloneDeep(s.toJSON()),s.isEdge()?l.edge=!0:s.isNode()&&(l.node=!0),this.push(i,t)}if(x.isChangeEvent(p)){const l=h.key,d=i.data;return(!i.batch||!i.event)&&(i.event=p,i.options=t,d.key=l,d.prev==null&&(d.prev={}),d.prev[l]=o.QK.cloneDeep(s.previous(l)),r?i.modelChange=!0:d.id=s.id),d.next==null&&(d.next={}),d.next[l]=o.QK.cloneDeep(s.prop(l)),this.push(i,t)}const a=this.options.afterAddCommand;a&&o.Iw.call(a,this,p,h,i),this.push(i,t)}initBatchCommand(p){this.freezed||(this.batchCommands?this.batchLevel+=1:(this.batchCommands=[this.createCommand({batch:!0})],this.batchLevel=0,this.lastBatchIndex=-1))}storeBatchCommand(p){if(!this.freezed)if(this.batchCommands&&this.batchLevel<=0){const h=this.filterBatchCommand(this.batchCommands);h.length>0&&(this.redoStack=[],this.undoStackPush(h),this.consolidateCommands(),this.notify("add",h,p)),this.batchCommands=null,this.lastBatchIndex=-1,this.batchLevel=0}else this.batchCommands&&this.batchLevel>0&&(this.batchLevel-=1)}filterBatchCommand(p){let h=p.slice();const n=[];for(;h.length>0;){const t=h.shift(),e=t.event,s=t.data.id;if(e!=null&&(s!=null||t.modelChange)){if(x.isAddEvent(e)){const r=h.findIndex(i=>x.isRemoveEvent(i.event)&&i.data.id===s);if(r>=0){h=h.filter((i,a)=>r<a||i.data.id!==s);continue}}else if(x.isRemoveEvent(e)){const r=h.findIndex(i=>x.isAddEvent(i.event)&&i.data.id===s);if(r>=0){h.splice(r,1);continue}}else if(x.isChangeEvent(e)){const r=t.data;if(o.QK.isEqual(r.prev,r.next))continue}n.push(t)}}return n}notify(p,h,n){const t=h==null?null:Array.isArray(h)?h:[h];this.emit(p,{cmds:t,options:n}),this.graph.trigger(`history:${p}`,{cmds:t,options:n}),this.emit("change",{cmds:t,options:n}),this.graph.trigger("history:change",{cmds:t,options:n})}push(p,h){this.redoStack=[],p.batch?(this.lastBatchIndex=Math.max(this.lastBatchIndex,0),this.emit("batch",{cmd:p,options:h})):(this.undoStackPush(p),this.consolidateCommands(),this.notify("add",p,h))}consolidateCommands(){var p;const h=this.undoStack[this.undoStack.length-1],n=this.undoStack[this.undoStack.length-2];if(!Array.isArray(h))return;const t=new Set(h.map(s=>s.event));if(t.size!==2||!t.has("cell:change:parent")||!t.has("cell:change:children")||!h.every(s=>{var r;return s.batch&&((r=s.options)===null||r===void 0?void 0:r.ui)})||!Array.isArray(n)||n.length!==1)return;const e=n[0];e.event!=="cell:change:position"||!(!((p=e.options)===null||p===void 0)&&p.ui)||(n.push(...h),this.undoStack.pop())}undoStackPush(p){if(this.stackSize===0){this.undoStack.push(p);return}this.undoStack.length>=this.stackSize&&this.undoStack.shift(),this.undoStack.push(p)}ensureUndefinedAttrs(p,h){let n=!1;return p!==null&&h!==null&&typeof p=="object"&&typeof h=="object"&&Object.keys(h).forEach(t=>{p[t]===void 0&&h[t]!==void 0?(p[t]=void 0,n=!0):typeof p[t]=="object"&&typeof h[t]=="object"&&(n=this.ensureUndefinedAttrs(p[t],h[t]))}),n}dispose(){this.validator.dispose(),this.clean(),this.stopListening(),this.off()}}$([o.ew.dispose()],R.prototype,"dispose",null),function(w){class p extends o.ew{constructor(n){super(),this.map={},this.command=n.history,this.cancelInvalid=n.cancelInvalid!==!1,this.command.on("add",this.onCommandAdded,this)}onCommandAdded({cmds:n}){return Array.isArray(n)?n.every(t=>this.isValidCommand(t)):this.isValidCommand(n)}isValidCommand(n){if(n.options&&n.options.validation===!1)return!0;const t=n.event&&this.map[n.event]||[];let e=null;return t.forEach(s=>{let r=0;const i=a=>{const l=s[r];r+=1;try{if(l)l(a,n,i);else{e=a;return}}catch(d){i(d)}};i(e)}),e?(this.cancelInvalid&&this.command.cancel(),this.emit("invalid",{err:e}),!1):!0}validate(n,...t){const e=Array.isArray(n)?n:n.split(/\s+/);return t.forEach(s=>{if(typeof s!="function")throw new Error(`${e.join(" ")} requires callback functions.`)}),e.forEach(s=>{this.map[s]==null&&(this.map[s]=[]),this.map[s].push(t)}),this}dispose(){this.command.off("add",this.onCommandAdded,this)}}$([o.ew.dispose()],p.prototype,"dispose",null),w.Validator=p}(R||(R={}));var x;(function(w){function p(s){return s==="cell:added"}w.isAddEvent=p;function h(s){return s==="cell:removed"}w.isRemoveEvent=h;function n(s){return s!=null&&s.startsWith("cell:change:")}w.isChangeEvent=n;function t(s){const r=["cell:added","cell:removed","cell:change:*"],i=["batch:start","batch:stop"],a=s.eventNames?s.eventNames.filter(l=>!(w.isChangeEvent(l)||r.includes(l)||i.includes(l))):r;return Object.assign(Object.assign({enabled:!0},s),{eventNames:a,applyOptionsList:s.applyOptionsList||["propertyPath"],revertOptionsList:s.revertOptionsList||["propertyPath"]})}w.getOptions=t;function e(s){const r=[];for(let i=0,a=s.length;i<a;i+=1){const l=s[i];let d=null;if(w.isAddEvent(l.event)){const u=l.data.id;for(let g=0;g<i;g+=1)if(s[g].data.id===u){d=g;break}}d!==null?r.splice(d,0,l):r.push(l)}return r}w.sortBatchCommands=e})(x||(x={}))},1169:function(Y,U,z){"use strict";z.d(U,{N:function(){return h}});var o=z(49188),$=z(32260),R=z.n($),x=function(n,t,e,s){var r=arguments.length,i=r<3?t:s===null?s=Object.getOwnPropertyDescriptor(t,e):s,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,t,e,s);else for(var l=n.length-1;l>=0;l--)(a=n[l])&&(i=(r<3?a(i):r>3?a(t,e,i):a(t,e))||i);return r>3&&i&&Object.defineProperty(t,e,i),i};class w extends o.JT{get graph(){return this.options.graph}constructor(t){super(),this.options=t;const e=this.graph.getPlugin("scroller");this.container=e?e.container:this.graph.container,t.global?this.target=document:(this.target=this.container,this.disabled||this.target.setAttribute("tabindex","-1"),this.graph.on("cell:mouseup",this.focus,this),this.graph.on("blank:mouseup",this.focus,this)),this.mousetrap=w.createMousetrap(this)}get disabled(){return this.options.enabled!==!0}enable(){this.disabled&&(this.options.enabled=!0,this.target instanceof HTMLElement&&this.target.setAttribute("tabindex","-1"))}disable(){this.disabled||(this.options.enabled=!1,this.target instanceof HTMLElement&&this.target.removeAttribute("tabindex"))}on(t,e,s){this.mousetrap.bind(this.getKeys(t),e,s)}off(t,e){this.mousetrap.unbind(this.getKeys(t),e)}clear(){this.mousetrap.reset()}trigger(t,e){this.mousetrap.trigger(t,e)}focus(t){if(this.isInputEvent(t.e))return;this.target.focus({preventScroll:!0})}getKeys(t){return(Array.isArray(t)?t:[t]).map(e=>this.formatkey(e))}formatkey(t){const e=t.toLocaleLowerCase().replace(/\s/g,"").replace("delete","del").replace("cmd","command").replace("arrowup","up").replace("arrowright","right").replace("arrowdown","down").replace("arrowleft","left"),s=this.options.format;return s?o.Iw.call(s,this.graph,e):e}isGraphEvent(t){const e=t.target,s=t.currentTarget;return e?e===this.target||s===this.target||e===document.body?!0:o.is.contains(this.container,e):!1}isInputEvent(t){var e;const s=t.target,r=(e=s==null?void 0:s.tagName)===null||e===void 0?void 0:e.toLowerCase();let i=["input","textarea"].includes(r);return o.is.attr(s,"contenteditable")==="true"&&(i=!0),i}isEnabledForEvent(t){const e=!this.disabled&&this.isGraphEvent(t),s=this.isInputEvent(t);if(e){if(s&&(t.key==="Backspace"||t.key==="Delete"))return!1;if(this.options.guard)return o.Iw.call(this.options.guard,this.graph,t)}return e}dispose(){this.mousetrap.reset()}}x([o.JT.dispose()],w.prototype,"dispose",null),function(n){function t(e){const s=new(R())(e.target),r=s.stopCallback;return s.stopCallback=(i,a,l)=>e.isEnabledForEvent(i)?r?r.call(s,i,a,l):!1:!0,s}n.createMousetrap=t}(w||(w={})),o.kJ.prototype.isKeyboardEnabled=function(){const n=this.getPlugin("keyboard");return n?n.isEnabled():!1},o.kJ.prototype.enableKeyboard=function(){const n=this.getPlugin("keyboard");return n&&n.enable(),this},o.kJ.prototype.disableKeyboard=function(){const n=this.getPlugin("keyboard");return n&&n.disable(),this},o.kJ.prototype.toggleKeyboard=function(n){const t=this.getPlugin("keyboard");return t&&t.toggleEnabled(n),this},o.kJ.prototype.bindKey=function(n,t,e){const s=this.getPlugin("keyboard");return s&&s.bindKey(n,t,e),this},o.kJ.prototype.unbindKey=function(n,t){const e=this.getPlugin("keyboard");return e&&e.unbindKey(n,t),this},o.kJ.prototype.clearKeys=function(){const n=this.getPlugin("keyboard");return n&&n.clear(),this},o.kJ.prototype.triggerKey=function(n,t){const e=this.getPlugin("keyboard");return e&&e.trigger(n,t),this};var p=function(n,t,e,s){var r=arguments.length,i=r<3?t:s===null?s=Object.getOwnPropertyDescriptor(t,e):s,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,t,e,s);else for(var l=n.length-1;l>=0;l--)(a=n[l])&&(i=(r<3?a(i):r>3?a(t,e,i):a(t,e))||i);return r>3&&i&&Object.defineProperty(t,e,i),i};class h extends o.JT{constructor(t={}){super(),this.name="keyboard",this.options=Object.assign({enabled:!0},t)}init(t){this.keyboardImpl=new w(Object.assign(Object.assign({},this.options),{graph:t}))}isEnabled(){return!this.keyboardImpl.disabled}enable(){this.keyboardImpl.enable()}disable(){this.keyboardImpl.disable()}toggleEnabled(t){return t!=null?t!==this.isEnabled()&&(t?this.enable():this.disable()):this.isEnabled()?this.disable():this.enable(),this}bindKey(t,e,s){return this.keyboardImpl.on(t,e,s),this}trigger(t,e){return this.keyboardImpl.trigger(t,e),this}clear(){return this.keyboardImpl.clear(),this}unbindKey(t,e){return this.keyboardImpl.off(t,e),this}dispose(){this.keyboardImpl.dispose()}}p([o.JT.dispose()],h.prototype,"dispose",null)},80676:function(Y,U,z){"use strict";z.d(U,{Y:function(){return h}});var o=z(49188),$=function(n,t,e,s){var r=arguments.length,i=r<3?t:s===null?s=Object.getOwnPropertyDescriptor(t,e):s,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,t,e,s);else for(var l=n.length-1;l>=0;l--)(a=n[l])&&(i=(r<3?a(i):r>3?a(t,e,i):a(t,e))||i);return r>3&&i&&Object.defineProperty(t,e,i),i};class R extends o.G7{get graph(){return this.options.graph}get boxClassName(){return this.prefixClassName(x.classNames.box)}get $boxes(){return o.is.children(this.container,this.boxClassName)}get handleOptions(){return this.options}constructor(t){super(),this.options=t,this.options.model&&(this.options.collection=this.options.model.collection),this.options.collection?this.collection=this.options.collection:(this.collection=new o.FE([],{comparator:x.depthComparator}),this.options.collection=this.collection),this.boxCount=0,this.createContainer(),this.startListening()}startListening(){const t=this.graph,e=this.collection;this.delegateEvents({[`mousedown .${this.boxClassName}`]:"onSelectionBoxMouseDown",[`touchstart .${this.boxClassName}`]:"onSelectionBoxMouseDown"},!0),t.on("scale",this.onGraphTransformed,this),t.on("translate",this.onGraphTransformed,this),t.model.on("updated",this.onModelUpdated,this),e.on("added",this.onCellAdded,this),e.on("removed",this.onCellRemoved,this),e.on("reseted",this.onReseted,this),e.on("updated",this.onCollectionUpdated,this),e.on("node:change:position",this.onNodePositionChanged,this),e.on("cell:changed",this.onCellChanged,this)}stopListening(){const t=this.graph,e=this.collection;this.undelegateEvents(),t.off("scale",this.onGraphTransformed,this),t.off("translate",this.onGraphTransformed,this),t.model.off("updated",this.onModelUpdated,this),e.off("added",this.onCellAdded,this),e.off("removed",this.onCellRemoved,this),e.off("reseted",this.onReseted,this),e.off("updated",this.onCollectionUpdated,this),e.off("node:change:position",this.onNodePositionChanged,this),e.off("cell:changed",this.onCellChanged,this)}onRemove(){this.stopListening()}onGraphTransformed(){this.updateSelectionBoxes()}onCellChanged(){this.updateSelectionBoxes()}onNodePositionChanged({node:t,options:e}){const{showNodeSelectionBox:s,pointerEvents:r}=this.options,{ui:i,selection:a,translateBy:l,snapped:d}=e,u=(s!==!0||r&&this.getPointerEventsValue(r)==="none")&&!this.translating&&!a,g=i&&l&&t.id===l;if(u&&(g||d)){this.translating=!0;const m=t.position(),y=t.previous("position"),b=m.x-y.x,S=m.y-y.y;(b!==0||S!==0)&&this.translateSelectedNodes(b,S,t,e),this.translating=!1}}onModelUpdated({removed:t}){t&&t.length&&this.unselect(t)}isEmpty(){return this.length<=0}isSelected(t){return this.collection.has(t)}get length(){return this.collection.length}get cells(){return this.collection.toArray()}select(t,e={}){e.dryrun=!0;const s=this.filter(Array.isArray(t)?t:[t]);return this.collection.add(s,e),this}unselect(t,e={}){return e.dryrun=!0,this.collection.remove(Array.isArray(t)?t:[t],e),this}reset(t,e={}){if(t){if(e.batch){const u=this.filter(Array.isArray(t)?t:[t]);return this.collection.reset(u,Object.assign(Object.assign({},e),{ui:!0})),this}const s=this.cells,r=this.filter(Array.isArray(t)?t:[t]),i={},a={};s.forEach(u=>i[u.id]=u),r.forEach(u=>a[u.id]=u);const l=[],d=[];return r.forEach(u=>{i[u.id]||l.push(u)}),s.forEach(u=>{a[u.id]||d.push(u)}),d.length&&this.unselect(d,Object.assign(Object.assign({},e),{ui:!0})),l.length&&this.select(l,Object.assign(Object.assign({},e),{ui:!0})),d.length===0&&l.length===0&&this.updateContainer(),this}return this.clean(e)}clean(t={}){return this.length&&(t.batch===!1?this.unselect(this.cells,t):this.collection.reset([],Object.assign(Object.assign({},t),{ui:!0}))),this}setFilter(t){this.options.filter=t}setContent(t){this.options.content=t}startSelecting(t){t=this.normalizeEvent(t),this.clean();let e,s;const r=this.graph.container;if(t.offsetX!=null&&t.offsetY!=null&&r.contains(t.target))e=t.offsetX,s=t.offsetY;else{const i=o.is.offset(r),a=r.scrollLeft,l=r.scrollTop;e=t.clientX-i.left+window.pageXOffset+a,s=t.clientY-i.top+window.pageYOffset+l}o.is.css(this.container,{top:s,left:e,width:1,height:1}),this.setEventData(t,{action:"selecting",clientX:t.clientX,clientY:t.clientY,offsetX:e,offsetY:s,scrollerX:0,scrollerY:0,moving:!1}),this.delegateDocumentEvents(x.documentEvents,t.data)}filter(t){const e=this.options.filter;return t.filter(s=>Array.isArray(e)?e.some(r=>typeof r=="string"?s.shape===r:s.id===r.id):typeof e=="function"?o.Iw.call(e,this.graph,s):!0)}stopSelecting(t){const e=this.graph,s=this.getEventData(t);switch(s.action){case"selecting":{let i=o.is.width(this.container),a=o.is.height(this.container);const l=o.is.offset(this.container),d=e.pageToLocal(l.left,l.top),u=e.transform.getScale();i/=u.sx,a/=u.sy;const g=new o.Ae(d.x,d.y,i,a),m=this.getCellViewsInArea(g).map(y=>y.cell);this.reset(m,{batch:!0}),this.hideRubberband();break}case"translating":{const i=e.snapToGrid(t.clientX,t.clientY);if(!this.options.following){const a=s;this.updateSelectedNodesPosition({dx:a.clientX-a.originX,dy:a.clientY-a.originY})}this.graph.model.stopBatch("move-selection"),this.notifyBoxEvent("box:mouseup",t,i.x,i.y);break}default:{this.clean();break}}}onMouseUp(t){this.getEventData(t).action&&(this.stopSelecting(t),this.undelegateDocumentEvents())}onSelectionBoxMouseDown(t){this.options.following||t.stopPropagation();const e=this.normalizeEvent(t);this.options.movable&&this.startTranslating(e);const s=this.getCellViewFromElem(e.target);this.setEventData(e,{activeView:s});const r=this.graph.snapToGrid(e.clientX,e.clientY);this.notifyBoxEvent("box:mousedown",e,r.x,r.y),this.delegateDocumentEvents(x.documentEvents,e.data)}startTranslating(t){this.graph.model.startBatch("move-selection");const e=this.graph.snapToGrid(t.clientX,t.clientY);this.setEventData(t,{action:"translating",clientX:e.x,clientY:e.y,originX:e.x,originY:e.y})}getRestrictArea(){const t=this.graph.options.translating.restrict,e=typeof t=="function"?o.Iw.call(t,this.graph,null):t;return typeof e=="number"?this.graph.transform.getGraphArea().inflate(e):e===!0?this.graph.transform.getGraphArea():e||null}getSelectionOffset(t,e){let s=t.x-e.clientX,r=t.y-e.clientY;const i=this.getRestrictArea();if(i){const a=this.collection.toArray(),l=o.bL.getCellsBBox(a,{deep:!0})||o.Ae.create(),d=i.x-l.x,u=i.y-l.y,g=i.x+i.width-(l.x+l.width),m=i.y+i.height-(l.y+l.height);if(s<d&&(s=d),r<u&&(r=u),g<s&&(s=g),m<r&&(r=m),!this.options.following){const y=t.x-e.originX,b=t.y-e.originY;s=y<=d||y>=g?0:s,r=b<=u||b>=m?0:r}}return{dx:s,dy:r}}updateElementPosition(t,e,s){const r=o.is.css(t,"left"),i=o.is.css(t,"top"),a=r?parseFloat(r):0,l=i?parseFloat(i):0;o.is.css(t,"left",a+e),o.is.css(t,"top",l+s)}updateSelectedNodesPosition(t){const{dx:e,dy:s}=t;if(e||s)if(this.translateSelectedNodes(e,s),this.boxesUpdated)this.collection.length>1&&this.updateSelectionBoxes();else{const r=this.graph.transform.getScale();for(let i=0,a=this.$boxes,l=a.length;i<l;i+=1)this.updateElementPosition(a[i],e*r.sx,s*r.sy);this.updateElementPosition(this.selectionContainer,e*r.sx,s*r.sy)}}autoScrollGraph(t,e){const s=this.graph.getPlugin("scroller");return s?s.autoScroll(t,e):{scrollerX:0,scrollerY:0}}adjustSelection(t){const e=this.normalizeEvent(t),s=this.getEventData(e);switch(s.action){case"selecting":{const i=s;i.moving!==!0&&(o.is.appendTo(this.container,this.graph.container),this.showRubberband(),i.moving=!0);const{scrollerX:a,scrollerY:l}=this.autoScrollGraph(e.clientX,e.clientY);i.scrollerX+=a,i.scrollerY+=l;const d=e.clientX-i.clientX+i.scrollerX,u=e.clientY-i.clientY+i.scrollerY,g=parseInt(o.is.css(this.container,"left")||"0",10),m=parseInt(o.is.css(this.container,"top")||"0",10);o.is.css(this.container,{left:d<0?i.offsetX+d:g,top:u<0?i.offsetY+u:m,width:Math.abs(d),height:Math.abs(u)});break}case"translating":{const i=this.graph.snapToGrid(e.clientX,e.clientY),a=s,l=this.getSelectionOffset(i,a);this.options.following?this.updateSelectedNodesPosition(l):this.updateContainerPosition(l),l.dx&&(a.clientX=i.x),l.dy&&(a.clientY=i.y),this.notifyBoxEvent("box:mousemove",t,i.x,i.y);break}default:break}this.boxesUpdated=!1}translateSelectedNodes(t,e,s,r){const i={},a=[];if(s&&(i[s.id]=!0),this.collection.toArray().forEach(l=>{l.getDescendants({deep:!0}).forEach(d=>{i[d.id]=!0})}),r&&r.translateBy){const l=this.graph.getCellById(r.translateBy);l&&(i[l.id]=!0,l.getDescendants({deep:!0}).forEach(d=>{i[d.id]=!0}),a.push(l))}this.collection.toArray().forEach(l=>{if(!i[l.id]){const d=Object.assign(Object.assign({},r),{selection:this.cid,exclude:a});l.translate(t,e,d),this.graph.model.getConnectedEdges(l).forEach(u=>{i[u.id]||(u.translate(t,e,d),i[u.id]=!0)})}})}getCellViewsInArea(t){const e=this.graph,s={strict:this.options.strict};let r=[];return this.options.rubberNode&&(r=r.concat(e.model.getNodesInArea(t,s).map(i=>e.renderer.findViewByCell(i)).filter(i=>i!=null))),this.options.rubberEdge&&(r=r.concat(e.model.getEdgesInArea(t,s).map(i=>e.renderer.findViewByCell(i)).filter(i=>i!=null))),r}notifyBoxEvent(t,e,s,r){const a=this.getEventData(e).activeView;this.trigger(t,{e,view:a,x:s,y:r,cell:a.cell})}getSelectedClassName(t){return this.prefixClassName(`${t.isNode()?"node":"edge"}-selected`)}addCellSelectedClassName(t){const e=this.graph.renderer.findViewByCell(t);e&&e.addClass(this.getSelectedClassName(t))}removeCellUnSelectedClassName(t){const e=this.graph.renderer.findViewByCell(t);e&&e.removeClass(this.getSelectedClassName(t))}destroySelectionBox(t){this.removeCellUnSelectedClassName(t),this.canShowSelectionBox(t)&&(o.is.remove(this.container.querySelector(`[data-cell-id="${t.id}"]`)),this.$boxes.length===0&&this.hide(),this.boxCount=Math.max(0,this.boxCount-1))}destroyAllSelectionBoxes(t){t.forEach(e=>this.removeCellUnSelectedClassName(e)),this.hide(),o.is.remove(this.$boxes),this.boxCount=0}hide(){o.is.removeClass(this.container,this.prefixClassName(x.classNames.rubberband)),o.is.removeClass(this.container,this.prefixClassName(x.classNames.selected))}showRubberband(){o.is.addClass(this.container,this.prefixClassName(x.classNames.rubberband))}hideRubberband(){o.is.removeClass(this.container,this.prefixClassName(x.classNames.rubberband))}showSelected(){o.is.removeAttribute(this.container,"style"),o.is.addClass(this.container,this.prefixClassName(x.classNames.selected))}createContainer(){this.container=document.createElement("div"),o.is.addClass(this.container,this.prefixClassName(x.classNames.root)),this.options.className&&o.is.addClass(this.container,this.options.className),this.selectionContainer=document.createElement("div"),o.is.addClass(this.selectionContainer,this.prefixClassName(x.classNames.inner)),this.selectionContent=document.createElement("div"),o.is.addClass(this.selectionContent,this.prefixClassName(x.classNames.content)),o.is.append(this.selectionContainer,this.selectionContent),o.is.attr(this.selectionContainer,"data-selection-length",this.collection.length),o.is.prepend(this.container,this.selectionContainer)}updateContainerPosition(t){(t.dx||t.dy)&&this.updateElementPosition(this.selectionContainer,t.dx,t.dy)}updateContainer(){const t={x:1/0,y:1/0},e={x:0,y:0};this.collection.toArray().filter(i=>this.canShowSelectionBox(i)).forEach(i=>{const a=this.graph.renderer.findViewByCell(i);if(a){const l=a.getBBox({useCellGeometry:!0});t.x=Math.min(t.x,l.x),t.y=Math.min(t.y,l.y),e.x=Math.max(e.x,l.x+l.width),e.y=Math.max(e.y,l.y+l.height)}}),o.is.css(this.selectionContainer,{position:"absolute",pointerEvents:"none",left:t.x,top:t.y,width:e.x-t.x,height:e.y-t.y}),o.is.attr(this.selectionContainer,"data-selection-length",this.collection.length);const r=this.options.content;if(r)if(typeof r=="function"){const i=o.Iw.call(r,this.graph,this,this.selectionContent);i&&(this.selectionContent.innerHTML=i)}else this.selectionContent.innerHTML=r;this.collection.length>0&&!this.container.parentNode?o.is.appendTo(this.container,this.graph.container):this.collection.length<=0&&this.container.parentNode&&this.container.parentNode.removeChild(this.container)}canShowSelectionBox(t){return t.isNode()&&this.options.showNodeSelectionBox===!0||t.isEdge()&&this.options.showEdgeSelectionBox===!0}getPointerEventsValue(t){return typeof t=="string"?t:t(this.cells)}createSelectionBox(t){if(this.addCellSelectedClassName(t),this.canShowSelectionBox(t)){const e=this.graph.renderer.findViewByCell(t);if(e){const s=e.getBBox({useCellGeometry:!0}),r=this.boxClassName,i=document.createElement("div"),a=this.options.pointerEvents;o.is.addClass(i,r),o.is.addClass(i,`${r}-${t.isNode()?"node":"edge"}`),o.is.attr(i,"data-cell-id",t.id),o.is.css(i,{position:"absolute",left:s.x,top:s.y,width:s.width,height:s.height,pointerEvents:a?this.getPointerEventsValue(a):"auto"}),o.is.appendTo(i,this.container),this.showSelected(),this.boxCount+=1}}}updateSelectionBoxes(){this.collection.length>0&&(this.boxesUpdated=!0,this.confirmUpdate())}confirmUpdate(){if(this.boxCount){this.hide();for(let t=0,e=this.$boxes,s=e.length;t<s;t+=1){const r=e[t],i=o.is.attr(r,"data-cell-id");o.is.remove(r),this.boxCount-=1;const a=this.collection.get(i);a&&this.createSelectionBox(a)}this.updateContainer()}return 0}getCellViewFromElem(t){const e=t.getAttribute("data-cell-id");if(e){const s=this.collection.get(e);if(s)return this.graph.renderer.findViewByCell(s)}return null}onCellRemoved({cell:t}){this.destroySelectionBox(t),this.updateContainer()}onReseted({previous:t,current:e}){this.destroyAllSelectionBoxes(t),e.forEach(s=>{this.listenCellRemoveEvent(s),this.createSelectionBox(s)}),this.updateContainer()}onCellAdded({cell:t}){this.listenCellRemoveEvent(t),this.createSelectionBox(t),this.updateContainer()}listenCellRemoveEvent(t){t.off("removed",this.onCellRemoved,this),t.on("removed",this.onCellRemoved,this)}onCollectionUpdated({added:t,removed:e,options:s}){t.forEach(i=>{this.trigger("cell:selected",{cell:i,options:s}),i.isNode()?this.trigger("node:selected",{cell:i,options:s,node:i}):i.isEdge()&&this.trigger("edge:selected",{cell:i,options:s,edge:i})}),e.forEach(i=>{this.trigger("cell:unselected",{cell:i,options:s}),i.isNode()?this.trigger("node:unselected",{cell:i,options:s,node:i}):i.isEdge()&&this.trigger("edge:unselected",{cell:i,options:s,edge:i})});const r={added:t,removed:e,options:s,selected:this.cells.filter(i=>!!this.graph.getCellById(i.id))};this.trigger("selection:changed",r)}dispose(){this.clean(),this.remove(),this.off()}}$([o.G7.dispose()],R.prototype,"dispose",null);var x;(function(n){const t="widget-selection";n.classNames={root:t,inner:`${t}-inner`,box:`${t}-box`,content:`${t}-content`,rubberband:`${t}-rubberband`,selected:`${t}-selected`},n.documentEvents={mousemove:"adjustSelection",touchmove:"adjustSelection",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"};function e(s){return s.getAncestors().length}n.depthComparator=e})(x||(x={}));const w=`.x6-widget-selection {
  position: absolute;
  top: 0;
  left: 0;
  display: none;
  width: 0;
  height: 0;
  touch-action: none;
}
.x6-widget-selection-rubberband {
  display: block;
  overflow: visible;
  opacity: 0.3;
}
.x6-widget-selection-selected {
  display: block;
}
.x6-widget-selection-box {
  cursor: move;
}
.x6-widget-selection-inner[data-selection-length='0'],
.x6-widget-selection-inner[data-selection-length='1'] {
  display: none;
}
.x6-widget-selection-content {
  position: absolute;
  top: 100%;
  right: -20px;
  left: -20px;
  margin-top: 30px;
  padding: 6px;
  line-height: 14px;
  text-align: center;
  border-radius: 6px;
}
.x6-widget-selection-content:empty {
  display: none;
}
.x6-widget-selection-rubberband {
  background-color: #3498db;
  border: 2px solid #2980b9;
}
.x6-widget-selection-box {
  box-sizing: content-box !important;
  margin-top: -4px;
  margin-left: -4px;
  padding-right: 4px;
  padding-bottom: 4px;
  border: 2px dashed #feb663;
  box-shadow: 2px 2px 5px #d3d3d3;
}
.x6-widget-selection-inner {
  box-sizing: content-box !important;
  margin-top: -8px;
  margin-left: -8px;
  padding-right: 12px;
  padding-bottom: 12px;
  border: 2px solid #feb663;
  box-shadow: 2px 2px 5px #d3d3d3;
}
.x6-widget-selection-content {
  color: #fff;
  font-size: 10px;
  background-color: #6a6b8a;
}
`;o.kJ.prototype.isSelectionEnabled=function(){const n=this.getPlugin("selection");return n?n.isEnabled():!1},o.kJ.prototype.enableSelection=function(){const n=this.getPlugin("selection");return n&&n.enable(),this},o.kJ.prototype.disableSelection=function(){const n=this.getPlugin("selection");return n&&n.disable(),this},o.kJ.prototype.toggleSelection=function(n){const t=this.getPlugin("selection");return t&&t.toggleEnabled(n),this},o.kJ.prototype.isMultipleSelection=function(){const n=this.getPlugin("selection");return n?n.isMultipleSelection():!1},o.kJ.prototype.enableMultipleSelection=function(){const n=this.getPlugin("selection");return n&&n.enableMultipleSelection(),this},o.kJ.prototype.disableMultipleSelection=function(){const n=this.getPlugin("selection");return n&&n.disableMultipleSelection(),this},o.kJ.prototype.toggleMultipleSelection=function(n){const t=this.getPlugin("selection");return t&&t.toggleMultipleSelection(n),this},o.kJ.prototype.isSelectionMovable=function(){const n=this.getPlugin("selection");return n?n.isSelectionMovable():!1},o.kJ.prototype.enableSelectionMovable=function(){const n=this.getPlugin("selection");return n&&n.enableSelectionMovable(),this},o.kJ.prototype.disableSelectionMovable=function(){const n=this.getPlugin("selection");return n&&n.disableSelectionMovable(),this},o.kJ.prototype.toggleSelectionMovable=function(n){const t=this.getPlugin("selection");return t&&t.toggleSelectionMovable(n),this},o.kJ.prototype.isRubberbandEnabled=function(){const n=this.getPlugin("selection");return n?n.isRubberbandEnabled():!1},o.kJ.prototype.enableRubberband=function(){const n=this.getPlugin("selection");return n&&n.enableRubberband(),this},o.kJ.prototype.disableRubberband=function(){const n=this.getPlugin("selection");return n&&n.disableRubberband(),this},o.kJ.prototype.toggleRubberband=function(n){const t=this.getPlugin("selection");return t&&t.toggleRubberband(n),this},o.kJ.prototype.isStrictRubberband=function(){const n=this.getPlugin("selection");return n?n.isStrictRubberband():!1},o.kJ.prototype.enableStrictRubberband=function(){const n=this.getPlugin("selection");return n&&n.enableStrictRubberband(),this},o.kJ.prototype.disableStrictRubberband=function(){const n=this.getPlugin("selection");return n&&n.disableStrictRubberband(),this},o.kJ.prototype.toggleStrictRubberband=function(n){const t=this.getPlugin("selection");return t&&t.toggleStrictRubberband(n),this},o.kJ.prototype.setRubberbandModifiers=function(n){const t=this.getPlugin("selection");return t&&t.setRubberbandModifiers(n),this},o.kJ.prototype.setSelectionFilter=function(n){const t=this.getPlugin("selection");return t&&t.setSelectionFilter(n),this},o.kJ.prototype.setSelectionDisplayContent=function(n){const t=this.getPlugin("selection");return t&&t.setSelectionDisplayContent(n),this},o.kJ.prototype.isSelectionEmpty=function(){const n=this.getPlugin("selection");return n?n.isEmpty():!0},o.kJ.prototype.cleanSelection=function(n){const t=this.getPlugin("selection");return t&&t.clean(n),this},o.kJ.prototype.resetSelection=function(n,t){const e=this.getPlugin("selection");return e&&e.reset(n,t),this},o.kJ.prototype.getSelectedCells=function(){const n=this.getPlugin("selection");return n?n.getSelectedCells():[]},o.kJ.prototype.getSelectedCellCount=function(){const n=this.getPlugin("selection");return n?n.getSelectedCellCount():0},o.kJ.prototype.isSelected=function(n){const t=this.getPlugin("selection");return t?t.isSelected(n):!1},o.kJ.prototype.select=function(n,t){const e=this.getPlugin("selection");return e&&e.select(n,t),this},o.kJ.prototype.unselect=function(n,t){const e=this.getPlugin("selection");return e&&e.unselect(n,t),this};var p=function(n,t,e,s){var r=arguments.length,i=r<3?t:s===null?s=Object.getOwnPropertyDescriptor(t,e):s,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,t,e,s);else for(var l=n.length-1;l>=0;l--)(a=n[l])&&(i=(r<3?a(i):r>3?a(t,e,i):a(t,e))||i);return r>3&&i&&Object.defineProperty(t,e,i),i};class h extends o.ew{get rubberbandDisabled(){return this.options.enabled!==!0||this.options.rubberband!==!0}get disabled(){return this.options.enabled!==!0}get length(){return this.selectionImpl.length}get cells(){return this.selectionImpl.cells}constructor(t={}){super(),this.name="selection",this.movedMap=new WeakMap,this.unselectMap=new WeakMap,this.options=Object.assign(Object.assign({enabled:!0},h.defaultOptions),t),o.mf.ensure(this.name,w)}init(t){this.graph=t,this.selectionImpl=new R(Object.assign(Object.assign({},this.options),{graph:t})),this.setup(),this.startListening()}isEnabled(){return!this.disabled}enable(){this.disabled&&(this.options.enabled=!0)}disable(){this.disabled||(this.options.enabled=!1)}toggleEnabled(t){return t!=null?t!==this.isEnabled()&&(t?this.enable():this.disable()):this.isEnabled()?this.disable():this.enable(),this}isMultipleSelection(){return this.isMultiple()}enableMultipleSelection(){return this.enableMultiple(),this}disableMultipleSelection(){return this.disableMultiple(),this}toggleMultipleSelection(t){return t!=null?t!==this.isMultipleSelection()&&(t?this.enableMultipleSelection():this.disableMultipleSelection()):this.isMultipleSelection()?this.disableMultipleSelection():this.enableMultipleSelection(),this}isSelectionMovable(){return this.options.movable!==!1}enableSelectionMovable(){return this.selectionImpl.options.movable=!0,this}disableSelectionMovable(){return this.selectionImpl.options.movable=!1,this}toggleSelectionMovable(t){return t!=null?t!==this.isSelectionMovable()&&(t?this.enableSelectionMovable():this.disableSelectionMovable()):this.isSelectionMovable()?this.disableSelectionMovable():this.enableSelectionMovable(),this}isRubberbandEnabled(){return!this.rubberbandDisabled}enableRubberband(){return this.rubberbandDisabled&&(this.options.rubberband=!0),this}disableRubberband(){return this.rubberbandDisabled||(this.options.rubberband=!1),this}toggleRubberband(t){return t!=null?t!==this.isRubberbandEnabled()&&(t?this.enableRubberband():this.disableRubberband()):this.isRubberbandEnabled()?this.disableRubberband():this.enableRubberband(),this}isStrictRubberband(){return this.selectionImpl.options.strict===!0}enableStrictRubberband(){return this.selectionImpl.options.strict=!0,this}disableStrictRubberband(){return this.selectionImpl.options.strict=!1,this}toggleStrictRubberband(t){return t!=null?t!==this.isStrictRubberband()&&(t?this.enableStrictRubberband():this.disableStrictRubberband()):this.isStrictRubberband()?this.disableStrictRubberband():this.enableStrictRubberband(),this}setRubberbandModifiers(t){this.setModifiers(t)}setSelectionFilter(t){return this.setFilter(t),this}setSelectionDisplayContent(t){return this.setContent(t),this}isEmpty(){return this.length<=0}clean(t={}){return this.selectionImpl.clean(t),this}reset(t,e={}){return this.selectionImpl.reset(t?this.getCells(t):[],e),this}getSelectedCells(){return this.cells}getSelectedCellCount(){return this.length}isSelected(t){return this.selectionImpl.isSelected(t)}select(t,e={}){const s=this.getCells(t);return s.length&&(this.isMultiple()?this.selectionImpl.select(s,e):this.reset(s.slice(0,1),e)),this}unselect(t,e={}){return this.selectionImpl.unselect(this.getCells(t),e),this}setup(){this.selectionImpl.on("*",(t,e)=>{this.trigger(t,e),this.graph.trigger(t,e)})}startListening(){this.graph.on("blank:mousedown",this.onBlankMouseDown,this),this.graph.on("blank:click",this.onBlankClick,this),this.graph.on("cell:mousemove",this.onCellMouseMove,this),this.graph.on("cell:mouseup",this.onCellMouseUp,this),this.selectionImpl.on("box:mousedown",this.onBoxMouseDown,this)}stopListening(){this.graph.off("blank:mousedown",this.onBlankMouseDown,this),this.graph.off("blank:click",this.onBlankClick,this),this.graph.off("cell:mousemove",this.onCellMouseMove,this),this.graph.off("cell:mouseup",this.onCellMouseUp,this),this.selectionImpl.off("box:mousedown",this.onBoxMouseDown,this)}onBlankMouseDown({e:t}){if(!this.allowBlankMouseDown(t))return;const e=this.graph.panning.allowPanning(t,!0),s=this.graph.getPlugin("scroller"),r=s&&s.allowPanning(t,!0);(this.allowRubberband(t,!0)||this.allowRubberband(t)&&!r&&!e)&&this.startRubberband(t)}allowBlankMouseDown(t){const e=this.options.eventTypes;return(e==null?void 0:e.includes("leftMouseDown"))&&t.button===0||(e==null?void 0:e.includes("mouseWheelDown"))&&t.button===1}onBlankClick(){this.clean()}allowRubberband(t,e){return!this.rubberbandDisabled&&o.tx.isMatch(t,this.options.modifiers,e)}allowMultipleSelection(t){return this.isMultiple()&&o.tx.isMatch(t,this.options.multipleSelectionModifiers)}onCellMouseMove({cell:t}){this.movedMap.set(t,!0)}onCellMouseUp({e:t,cell:e}){const s=this.options;let r=this.disabled;!r&&this.movedMap.has(e)&&(r=s.selectCellOnMoved===!1,r||(r=s.selectNodeOnMoved===!1&&e.isNode()),r||(r=s.selectEdgeOnMoved===!1&&e.isEdge())),r||(this.allowMultipleSelection(t)?this.unselectMap.has(e)?this.unselectMap.delete(e):this.isSelected(e)?this.unselect(e):this.select(e):this.reset(e)),this.movedMap.delete(e)}onBoxMouseDown({e:t,cell:e}){this.disabled||this.allowMultipleSelection(t)&&(this.unselect(e),this.unselectMap.set(e,!0))}getCells(t){return(Array.isArray(t)?t:[t]).map(e=>typeof e=="string"?this.graph.getCellById(e):e).filter(e=>e!=null)}startRubberband(t){return this.rubberbandDisabled||this.selectionImpl.startSelecting(t),this}isMultiple(){return this.options.multiple!==!1}enableMultiple(){return this.options.multiple=!0,this}disableMultiple(){return this.options.multiple=!1,this}setModifiers(t){return this.options.modifiers=t,this}setContent(t){return this.selectionImpl.setContent(t),this}setFilter(t){return this.selectionImpl.setFilter(t),this}dispose(){this.stopListening(),this.off(),this.selectionImpl.dispose(),o.mf.clean(this.name)}}p([o.ew.dispose()],h.prototype,"dispose",null),function(n){n.defaultOptions={rubberband:!1,rubberNode:!0,rubberEdge:!1,pointerEvents:"auto",multiple:!0,multipleSelectionModifiers:["ctrl","meta"],movable:!0,strict:!1,selectCellOnMoved:!1,selectNodeOnMoved:!1,selectEdgeOnMoved:!1,following:!0,content:null,eventTypes:["leftMouseDown","mouseWheelDown"]}}(h||(h={}))},63287:function(Y,U,z){"use strict";z.d(U,{H:function(){return h}});var o=z(49188),$=function(n,t,e,s){var r=arguments.length,i=r<3?t:s===null?s=Object.getOwnPropertyDescriptor(t,e):s,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,t,e,s);else for(var l=n.length-1;l>=0;l--)(a=n[l])&&(i=(r<3?a(i):r>3?a(t,e,i):a(t,e))||i);return r>3&&i&&Object.defineProperty(t,e,i),i},R=function(n,t){var e={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&t.indexOf(s)<0&&(e[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(n);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(n,s[r])&&(e[s[r]]=n[s[r]]);return e};class x extends o.G7{get model(){return this.graph.model}get containerClassName(){return this.prefixClassName("widget-snapline")}get verticalClassName(){return`${this.containerClassName}-vertical`}get horizontalClassName(){return`${this.containerClassName}-horizontal`}constructor(t){super();const{graph:e}=t,s=R(t,["graph"]);this.graph=e,this.options=Object.assign({},s),this.offset={x:0,y:0},this.render(),this.disabled||this.startListening()}get disabled(){return this.options.enabled!==!0}enable(){this.disabled&&(this.options.enabled=!0,this.startListening())}disable(){this.disabled||(this.options.enabled=!1,this.stopListening())}setFilter(t){this.options.filter=t}render(){const t=this.containerWrapper=new o.OW("svg"),e=this.horizontal=new o.OW("line"),s=this.vertical=new o.OW("line");t.addClass(this.containerClassName),e.addClass(this.horizontalClassName),s.addClass(this.verticalClassName),t.setAttribute("width","100%"),t.setAttribute("height","100%"),e.setAttribute("display","none"),s.setAttribute("display","none"),t.append([e,s]),this.options.className&&t.addClass(this.options.className),this.container=this.containerWrapper.node}startListening(){this.stopListening(),this.graph.on("node:mousedown",this.captureCursorOffset,this),this.graph.on("node:mousemove",this.snapOnMoving,this),this.model.on("batch:stop",this.onBatchStop,this),this.delegateDocumentEvents({mouseup:"hide",touchend:"hide"})}stopListening(){this.graph.off("node:mousedown",this.captureCursorOffset,this),this.graph.off("node:mousemove",this.snapOnMoving,this),this.model.off("batch:stop",this.onBatchStop,this),this.undelegateDocumentEvents()}onBatchStop({name:t,data:e}){t==="resize"&&this.snapOnResizing(e.cell,e)}captureCursorOffset({view:t,x:e,y:s}){const r=t.getDelegatedView();if(r&&this.isNodeMovable(r)){const i=t.cell.getPosition();this.offset={x:e-i.x,y:s-i.y}}}isNodeMovable(t){return t&&t.cell.isNode()&&t.can("nodeMovable")}getRestrictArea(t){const e=this.graph.options.translating.restrict,s=typeof e=="function"?o.Iw.call(e,this.graph,t):e;return typeof s=="number"?this.graph.transform.getGraphArea().inflate(s):s===!0?this.graph.transform.getGraphArea():s||null}snapOnResizing(t,e){if(this.options.resizing&&!e.snapped&&e.ui&&e.direction&&e.trueDirection){const s=this.graph.renderer.findViewByCell(t);if(s&&s.cell.isNode()){const r=t.getBBox(),i=r.bbox(t.getAngle()),a=i.getTopLeft(),l=i.getBottomRight(),d=o.RZ.normalize(t.getAngle()),u=this.options.tolerance||0;let g,m,y,b,S,v;const c={vertical:0,horizontal:0},f=e.direction,C=e.trueDirection,O=e.relativeDirection;C.indexOf("right")!==-1?c.vertical=l.x:c.vertical=a.x,C.indexOf("bottom")!==-1?c.horizontal=l.y:c.horizontal=a.y,this.model.getNodes().some(B=>{if(this.isIgnored(t,B))return!1;const H=B.getBBox().bbox(B.getAngle()),E=H.getTopLeft(),N=H.getBottomRight(),D={vertical:[E.x,N.x],horizontal:[E.y,N.y]},k={};return Object.keys(D).forEach(G=>{const _=G,T=D[_].map(W=>({position:W,distance:Math.abs(W-c[_])})).filter(W=>W.distance<=u);k[_]=o.RO.sortBy(T,W=>W.distance)}),g==null&&k.vertical.length>0&&(g=k.vertical[0].position,m=Math.min(i.y,H.y),y=Math.max(l.y,N.y)-m),b==null&&k.horizontal.length>0&&(b=k.horizontal[0].position,S=Math.min(i.x,H.x),v=Math.max(l.x,N.x)-S),g!=null&&b!=null}),this.hide();let M=0,P=0;(b!=null||g!=null)&&(g!=null&&(M=C.indexOf("right")!==-1?g-l.x:a.x-g),b!=null&&(P=C.indexOf("bottom")!==-1?b-l.y:a.y-b));let I=0,L=0;if(d%90===0)d===90||d===270?(I=P,L=M):(I=M,L=P);else{const B=d>=0&&d<90?1:d>=90&&d<180?4:d>=180&&d<270?3:2;b!=null&&g!=null&&(M<P?(P=0,b=void 0):(M=0,g=void 0));const H=o.RZ.toRad(d%90);M&&(I=B===3?M/Math.cos(H):M/Math.sin(H)),P&&(L=B===3?P/Math.cos(H):P/Math.sin(H));const E=B===1||B===3;switch(O){case"top":case"bottom":L=P?P/(E?Math.cos(H):Math.sin(H)):M/(E?Math.sin(H):Math.cos(H));break;case"left":case"right":I=M?M/(E?Math.cos(H):Math.sin(H)):P/(E?Math.sin(H):Math.cos(H));break;default:break}}switch(O){case"top":case"bottom":I=0;break;case"left":case"right":L=0;break;default:break}const V=this.graph.getGridSize();let A=Math.max(r.width+I,V),J=Math.max(r.height+L,V);e.minWidth&&e.minWidth>V&&(A=Math.max(A,e.minWidth)),e.minHeight&&e.minHeight>V&&(J=Math.max(J,e.minHeight)),e.maxWidth&&(A=Math.min(A,e.maxWidth)),e.maxHeight&&(J=Math.min(J,e.maxHeight)),e.preserveAspectRatio&&(L<I?J=A*(r.height/r.width):A=J*(r.width/r.height)),(A!==r.width||J!==r.height)&&(t.resize(A,J,{direction:f,relativeDirection:O,trueDirection:C,snapped:!0,snaplines:this.cid,restrict:this.getRestrictArea(s)}),y&&(y+=J-r.height),v&&(v+=A-r.width));const j=t.getBBox().bbox(d);g&&Math.abs(j.x-g)>1&&Math.abs(j.width+j.x-g)>1&&(g=void 0),b&&Math.abs(j.y-b)>1&&Math.abs(j.height+j.y-b)>1&&(b=void 0),this.update({verticalLeft:g,verticalTop:m,verticalHeight:y,horizontalTop:b,horizontalLeft:S,horizontalWidth:v})}}}snapOnMoving({view:t,e,x:s,y:r}){const i=t.getEventData(e).delegatedView||t;if(!this.isNodeMovable(i))return;const a=i.cell,l=a.getSize(),d=a.getPosition(),u=new o.Ae(s-this.offset.x,r-this.offset.y,l.width,l.height),g=a.getAngle(),m=u.getCenter(),y=u.bbox(g),b=y.getTopLeft(),S=y.getBottomRight(),v=this.options.tolerance||0;let c,f,C,O,M,P,I=0,L=0;if(this.model.getNodes().some(V=>{if(this.isIgnored(a,V))return!1;const A=V.getBBox().bbox(V.getAngle()),J=A.getCenter(),j=A.getTopLeft(),B=A.getBottomRight();return c==null&&(Math.abs(J.x-m.x)<v?(c=J.x,I=.5):Math.abs(j.x-b.x)<v?(c=j.x,I=0):Math.abs(j.x-S.x)<v?(c=j.x,I=1):Math.abs(B.x-S.x)<v?(c=B.x,I=1):Math.abs(B.x-b.x)<v&&(c=B.x),c!=null&&(f=Math.min(y.y,A.y),C=Math.max(S.y,B.y)-f)),O==null&&(Math.abs(J.y-m.y)<v?(O=J.y,L=.5):Math.abs(j.y-b.y)<v?O=j.y:Math.abs(j.y-S.y)<v?(O=j.y,L=1):Math.abs(B.y-S.y)<v?(O=B.y,L=1):Math.abs(B.y-b.y)<v&&(O=B.y),O!=null&&(M=Math.min(y.x,A.x),P=Math.max(S.x,B.x)-M)),c!=null&&O!=null}),this.hide(),O!=null||c!=null){O!=null&&(y.y=O-L*y.height),c!=null&&(y.x=c-I*y.width);const V=y.getCenter(),A=V.x-u.width/2,J=V.y-u.height/2,j=A-d.x,B=J-d.y;(j!==0||B!==0)&&(a.translate(j,B,{snapped:!0,restrict:this.getRestrictArea(i)}),P&&(P+=j),C&&(C+=B)),this.update({verticalLeft:c,verticalTop:f,verticalHeight:C,horizontalTop:O,horizontalLeft:M,horizontalWidth:P})}}isIgnored(t,e){return e.id===t.id||e.isDescendantOf(t)||!this.filter(e)}filter(t){const e=this.options.filter;return Array.isArray(e)?e.some(s=>typeof s=="string"?t.shape===s:t.id===s.id):typeof e=="function"?o.Iw.call(e,this.graph,t):!0}update(t){if(t.horizontalTop){const e=this.graph.localToGraph(new o.E9(t.horizontalLeft,t.horizontalTop)),s=this.graph.localToGraph(new o.E9(t.horizontalLeft+t.horizontalWidth,t.horizontalTop));this.horizontal.setAttributes({x1:this.options.sharp?`${e.x}`:"0",y1:`${e.y}`,x2:this.options.sharp?`${s.x}`:"100%",y2:`${s.y}`,display:"inherit"})}else this.horizontal.setAttribute("display","none");if(t.verticalLeft){const e=this.graph.localToGraph(new o.E9(t.verticalLeft,t.verticalTop)),s=this.graph.localToGraph(new o.E9(t.verticalLeft,t.verticalTop+t.verticalHeight));this.vertical.setAttributes({x1:`${e.x}`,y1:this.options.sharp?`${e.y}`:"0",x2:`${s.x}`,y2:this.options.sharp?`${s.y}`:"100%",display:"inherit"})}else this.vertical.setAttribute("display","none");this.show()}resetTimer(){this.timer&&(clearTimeout(this.timer),this.timer=null)}show(){return this.resetTimer(),this.container.parentNode==null&&this.graph.container.appendChild(this.container),this}hide(){this.resetTimer(),this.vertical.setAttribute("display","none"),this.horizontal.setAttribute("display","none");const t=this.options.clean,e=typeof t=="number"?t:t!==!1?3e3:0;return e>0&&(this.timer=window.setTimeout(()=>{this.container.parentNode!==null&&this.unmount()},e)),this}onRemove(){this.stopListening(),this.hide()}dispose(){this.remove()}}$([o.G7.dispose()],x.prototype,"dispose",null);const w=`.x6-widget-snapline {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  pointer-events: none;
}
.x6-widget-snapline-vertical,
.x6-widget-snapline-horizontal {
  stroke: #2ecc71;
  stroke-width: 1px;
}
`;o.kJ.prototype.isSnaplineEnabled=function(){const n=this.getPlugin("snapline");return n?n.isEnabled():!1},o.kJ.prototype.enableSnapline=function(){const n=this.getPlugin("snapline");return n&&n.enable(),this},o.kJ.prototype.disableSnapline=function(){const n=this.getPlugin("snapline");return n&&n.disable(),this},o.kJ.prototype.toggleSnapline=function(){const n=this.getPlugin("snapline");return n&&n.toggleEnabled(),this},o.kJ.prototype.hideSnapline=function(){const n=this.getPlugin("snapline");return n&&n.hide(),this},o.kJ.prototype.setSnaplineFilter=function(n){const t=this.getPlugin("snapline");return t&&t.setFilter(n),this},o.kJ.prototype.isSnaplineOnResizingEnabled=function(){const n=this.getPlugin("snapline");return n?n.isOnResizingEnabled():!1},o.kJ.prototype.enableSnaplineOnResizing=function(){const n=this.getPlugin("snapline");return n&&n.enableOnResizing(),this},o.kJ.prototype.disableSnaplineOnResizing=function(){const n=this.getPlugin("snapline");return n&&n.disableOnResizing(),this},o.kJ.prototype.toggleSnaplineOnResizing=function(n){const t=this.getPlugin("snapline");return t&&t.toggleOnResizing(n),this},o.kJ.prototype.isSharpSnapline=function(){const n=this.getPlugin("snapline");return n?n.isSharp():!1},o.kJ.prototype.enableSharpSnapline=function(){const n=this.getPlugin("snapline");return n&&n.enableSharp(),this},o.kJ.prototype.disableSharpSnapline=function(){const n=this.getPlugin("snapline");return n&&n.disableSharp(),this},o.kJ.prototype.toggleSharpSnapline=function(n){const t=this.getPlugin("snapline");return t&&t.toggleSharp(n),this},o.kJ.prototype.getSnaplineTolerance=function(){const n=this.getPlugin("snapline");if(n)return n.getTolerance()},o.kJ.prototype.setSnaplineTolerance=function(n){const t=this.getPlugin("snapline");return t&&t.setTolerance(n),this};var p=function(n,t,e,s){var r=arguments.length,i=r<3?t:s===null?s=Object.getOwnPropertyDescriptor(t,e):s,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,t,e,s);else for(var l=n.length-1;l>=0;l--)(a=n[l])&&(i=(r<3?a(i):r>3?a(t,e,i):a(t,e))||i);return r>3&&i&&Object.defineProperty(t,e,i),i};class h extends o.JT{constructor(t={}){super(),this.name="snapline",this.options=Object.assign({enabled:!0,tolerance:10},t),o.mf.ensure(this.name,w)}init(t){this.snaplineImpl=new x(Object.assign(Object.assign({},this.options),{graph:t}))}isEnabled(){return!this.snaplineImpl.disabled}enable(){this.snaplineImpl.enable()}disable(){this.snaplineImpl.disable()}toggleEnabled(t){if(t!=null)t!==this.isEnabled()&&(t?this.enable():this.disable());else return this.isEnabled()?this.disable():this.enable(),this}hide(){return this.snaplineImpl.hide(),this}setFilter(t){return this.snaplineImpl.setFilter(t),this}isOnResizingEnabled(){return this.snaplineImpl.options.resizing===!0}enableOnResizing(){return this.snaplineImpl.options.resizing=!0,this}disableOnResizing(){return this.snaplineImpl.options.resizing=!1,this}toggleOnResizing(t){return t!=null?t!==this.isOnResizingEnabled()&&(t?this.enableOnResizing():this.disableOnResizing()):this.isOnResizingEnabled()?this.disableOnResizing():this.enableOnResizing(),this}isSharp(){return this.snaplineImpl.options.sharp===!0}enableSharp(){return this.snaplineImpl.options.sharp=!0,this}disableSharp(){return this.snaplineImpl.options.sharp=!1,this}toggleSharp(t){return t!=null?t!==this.isSharp()&&(t?this.enableSharp():this.disableSharp()):this.isSharp()?this.disableSharp():this.enableSharp(),this}getTolerance(){return this.snaplineImpl.options.tolerance}setTolerance(t){return this.snaplineImpl.options.tolerance=t,this}captureCursorOffset(t){this.snaplineImpl.captureCursorOffset(t)}snapOnMoving(t){this.snaplineImpl.snapOnMoving(t)}dispose(){this.snaplineImpl.dispose(),o.mf.clean(this.name)}}p([o.JT.dispose()],h.prototype,"dispose",null)},52353:function(Y,U,z){"use strict";z.d(U,{t:function(){return t}});var o=z(49188);const $=`.x6-widget-dnd {
  position: absolute;
  top: -10000px;
  left: -10000px;
  z-index: 999999;
  display: none;
  cursor: move;
  opacity: 0.7;
  pointer-events: 'cursor';
}
.x6-widget-dnd.dragging {
  display: inline-block;
}
.x6-widget-dnd.dragging * {
  pointer-events: none !important;
}
.x6-widget-dnd .x6-graph {
  background: transparent;
  box-shadow: none;
}
`;var R=function(r,i,a,l){var d=arguments.length,u=d<3?i:l===null?l=Object.getOwnPropertyDescriptor(i,a):l,g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(r,i,a,l);else for(var m=r.length-1;m>=0;m--)(g=r[m])&&(u=(d<3?g(u):d>3?g(i,a,u):g(i,a))||u);return d>3&&u&&Object.defineProperty(i,a,u),u};class x extends o.G7{get targetScroller(){return this.options.target.getPlugin("scroller")}get targetGraph(){return this.options.target}get targetModel(){return this.targetGraph.model}get snapline(){return this.options.target.getPlugin("snapline")}constructor(i){super(),this.name="dnd",this.options=Object.assign(Object.assign({},x.defaults),i),this.init()}init(){o.mf.ensure(this.name,$),this.container=document.createElement("div"),o.is.addClass(this.container,this.prefixClassName("widget-dnd")),this.draggingGraph=new o.kJ(Object.assign(Object.assign({},this.options.delegateGraphOptions),{container:document.createElement("div"),width:1,height:1,async:!1})),o.is.append(this.container,this.draggingGraph.container)}start(i,a){const l=a;l.preventDefault(),this.targetModel.startBatch("dnd"),o.is.addClass(this.container,"dragging"),o.is.appendTo(this.container,this.options.draggingContainer||document.body),this.sourceNode=i,this.prepareDragging(i,l.clientX,l.clientY);const d=this.updateNodePosition(l.clientX,l.clientY);this.isSnaplineEnabled()&&(this.snapline.captureCursorOffset({e:l,node:i,cell:i,view:this.draggingView,x:d.x,y:d.y}),this.draggingNode.on("change:position",this.snap,this)),this.delegateDocumentEvents(x.documentEvents,l.data)}isSnaplineEnabled(){return this.snapline&&this.snapline.isEnabled()}prepareDragging(i,a,l){const d=this.draggingGraph,u=d.model,g=this.options.getDragNode(i,{sourceNode:i,draggingGraph:d,targetGraph:this.targetGraph});g.position(0,0);let m=5;if(this.isSnaplineEnabled()&&(m+=this.snapline.options.tolerance||0),this.isSnaplineEnabled()||this.options.scaled){const S=this.targetGraph.transform.getScale();d.scale(S.sx,S.sy),m*=Math.max(S.sx,S.sy)}else d.scale(1,1);this.clearDragging(),u.resetCells([g]);const y=d.findViewByCell(g);y.undelegateEvents(),y.cell.off("changed"),d.fitToContent({padding:m,allowNewOrigin:"any",useCellGeometry:!1});const b=y.getBBox();this.geometryBBox=y.getBBox({useCellGeometry:!0}),this.delta=this.geometryBBox.getTopLeft().diff(b.getTopLeft()),this.draggingNode=g,this.draggingView=y,this.draggingBBox=g.getBBox(),this.padding=m,this.originOffset=this.updateGraphPosition(a,l)}updateGraphPosition(i,a){const l=document.body.scrollTop||document.documentElement.scrollTop,d=document.body.scrollLeft||document.documentElement.scrollLeft,u=this.delta,g=this.geometryBBox,m=this.padding||5,y={left:i-u.x-g.width/2-m+d,top:a-u.y-g.height/2-m+l};return this.draggingGraph&&o.is.css(this.container,{left:`${y.left}px`,top:`${y.top}px`}),y}updateNodePosition(i,a){const l=this.targetGraph.clientToLocal(i,a),d=this.draggingBBox;return l.x-=d.width/2,l.y-=d.height/2,this.draggingNode.position(l.x,l.y),l}snap({cell:i,current:a,options:l}){const d=i;if(l.snapped){const u=this.draggingBBox;d.position(u.x+l.tx,u.y+l.ty,{silent:!0}),this.draggingView.translate(),d.position(a.x,a.y,{silent:!0}),this.snapOffset={x:l.tx,y:l.ty}}else this.snapOffset=null}onDragging(i){const a=this.draggingView;if(a){i.preventDefault();const l=this.normalizeEvent(i),d=l.clientX,u=l.clientY;this.updateGraphPosition(d,u);const g=this.updateNodePosition(d,u),m=this.targetGraph.options.embedding.enabled,y=(m||this.isSnaplineEnabled())&&this.isInsideValidArea({x:d,y:u});if(m){a.setEventData(l,{graph:this.targetGraph,candidateEmbedView:this.candidateEmbedView});const b=a.getEventData(l);y?a.processEmbedding(l,b):a.clearEmbedding(b),this.candidateEmbedView=b.candidateEmbedView}this.isSnaplineEnabled()&&(y?this.snapline.snapOnMoving({e:l,view:a,x:g.x,y:g.y}):this.snapline.hide())}}onDragEnd(i){const a=this.draggingNode;if(a){const l=this.normalizeEvent(i),d=this.draggingView,u=this.draggingBBox,g=this.snapOffset;let m=u.x,y=u.y;g&&(m+=g.x,y+=g.y),a.position(m,y,{silent:!0});const b=this.drop(a,{x:l.clientX,y:l.clientY}),S=v=>{v?(this.onDropped(a),this.targetGraph.options.embedding.enabled&&d&&(d.setEventData(l,{cell:v,graph:this.targetGraph,candidateEmbedView:this.candidateEmbedView}),d.finalizeEmbedding(l,d.getEventData(l)))):this.onDropInvalid(),this.candidateEmbedView=null,this.targetModel.stopBatch("dnd")};o.Iw.isAsync(b)?(this.undelegateDocumentEvents(),b.then(S)):S(b)}}clearDragging(){this.draggingNode&&(this.sourceNode=null,this.draggingNode.remove(),this.draggingNode=null,this.draggingView=null,this.delta=null,this.padding=null,this.snapOffset=null,this.originOffset=null,this.undelegateDocumentEvents())}onDropped(i){this.draggingNode===i&&(this.clearDragging(),o.is.removeClass(this.container,"dragging"),o.is.remove(this.container))}onDropInvalid(){const i=this.draggingNode;i&&this.onDropped(i)}isInsideValidArea(i){let a,l=null;const d=this.targetGraph,u=this.targetScroller;this.options.dndContainer&&(l=this.getDropArea(this.options.dndContainer));const g=l&&l.containsPoint(i);if(u)if(u.options.autoResize)a=this.getDropArea(u.container);else{const m=this.getDropArea(u.container);a=this.getDropArea(d.container).intersectsWithRect(m)}else a=this.getDropArea(d.container);return!g&&a&&a.containsPoint(i)}getDropArea(i){const a=o.is.offset(i),l=document.body.scrollTop||document.documentElement.scrollTop,d=document.body.scrollLeft||document.documentElement.scrollLeft;return o.Ae.create({x:a.left+parseInt(o.is.css(i,"border-left-width"),10)-d,y:a.top+parseInt(o.is.css(i,"border-top-width"),10)-l,width:i.clientWidth,height:i.clientHeight})}drop(i,a){if(this.isInsideValidArea(a)){const l=this.targetGraph,d=l.model,u=l.clientToLocal(a),g=this.sourceNode,m=this.options.getDropNode(i,{sourceNode:g,draggingNode:i,targetGraph:this.targetGraph,draggingGraph:this.draggingGraph}),y=m.getBBox();u.x+=y.x-y.width/2,u.y+=y.y-y.height/2;const b=this.snapOffset?1:l.getGridSize();m.position(o.Z4.snapToGrid(u.x,b),o.Z4.snapToGrid(u.y,b)),m.removeZIndex();const S=this.options.validateNode,v=S?S(m,{sourceNode:g,draggingNode:i,droppingNode:m,targetGraph:l,draggingGraph:this.draggingGraph}):!0;return typeof v=="boolean"?v?(d.addCell(m,{stencil:this.cid}),m):null:o.Iw.toDeferredBoolean(v).then(c=>c?(d.addCell(m,{stencil:this.cid}),m):null)}return null}onRemove(){this.draggingGraph&&(this.draggingGraph.view.remove(),this.draggingGraph.dispose())}dispose(){this.remove(),o.mf.clean(this.name)}}R([o.G7.dispose()],x.prototype,"dispose",null),function(r){r.defaults={getDragNode:i=>i.clone(),getDropNode:i=>i.clone()},r.documentEvents={mousemove:"onDragging",touchmove:"onDragging",mouseup:"onDragEnd",touchend:"onDragEnd",touchcancel:"onDragEnd"}}(x||(x={}));function w(r,i={}){const a=o.Hn.isModel(r)?r:new o.Hn().resetCells(r,{sort:!1,dryrun:!0}),l=a.getNodes(),d=i.columns||1,u=Math.ceil(l.length/d),g=i.dx||0,m=i.dy||0,y=i.center!==!1,b=i.resizeToFit===!0,S=i.marginX||0,v=i.marginY||0,c=[];let f=i.columnWidth;if(f==="compact")for(let I=0;I<d;I+=1){const L=p.getNodesInColumn(l,I,d);c.push(p.getMaxDim(L,"width")+g)}else{(f==null||f==="auto")&&(f=p.getMaxDim(l,"width")+g);for(let I=0;I<d;I+=1)c.push(f)}const C=p.accumulate(c,S),O=[];let M=i.rowHeight;if(M==="compact")for(let I=0;I<u;I+=1){const L=p.getNodesInRow(l,I,d);O.push(p.getMaxDim(L,"height")+m)}else{(M==null||M==="auto")&&(M=p.getMaxDim(l,"height")+m);for(let I=0;I<u;I+=1)O.push(M)}const P=p.accumulate(O,v);a.startBatch("layout"),l.forEach((I,L)=>{const V=L%d,A=Math.floor(L/d),J=c[V],j=O[A];let B=0,H=0,E=I.getSize();if(b){let N=J-2*g,D=j-2*m;const k=E.height*(E.width?N/E.width:1),G=E.width*(E.height?D/E.height:1);j<k?N=G:D=k,E={width:N,height:D},I.setSize(E,i)}y&&(B=(J-E.width)/2,H=(j-E.height)/2),I.position(C[V]+g+B,P[A]+m+H,i)}),a.stopBatch("layout")}var p;(function(r){function i(u,g){return u.reduce((m,y)=>Math.max(y==null?void 0:y.getSize()[g],m),0)}r.getMaxDim=i;function a(u,g,m){const y=[];for(let b=m*g,S=b+m;b<S;b+=1)u[b]&&y.push(u[b]);return y}r.getNodesInRow=a;function l(u,g,m){const y=[];for(let b=g,S=u.length;b<S;b+=m)u[b]&&y.push(u[b]);return y}r.getNodesInColumn=l;function d(u,g){return u.reduce((m,y,b)=>(m.push(m[b]+y),m),[g||0])}r.accumulate=d})(p||(p={}));const h=`.x6-widget-dnd {
  position: absolute;
  top: -10000px;
  left: -10000px;
  z-index: 999999;
  display: none;
  cursor: move;
  opacity: 0.7;
  pointer-events: 'cursor';
}
.x6-widget-dnd.dragging {
  display: inline-block;
}
.x6-widget-dnd.dragging * {
  pointer-events: none !important;
}
.x6-widget-dnd .x6-graph {
  background: transparent;
  box-shadow: none;
}
.x6-widget-stencil {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}
.x6-widget-stencil::after {
  position: absolute;
  top: 0;
  display: block;
  width: 100%;
  height: 20px;
  padding: 8px 0;
  line-height: 20px;
  text-align: center;
  opacity: 0;
  transition: top 0.1s linear, opacity 0.1s linear;
  content: ' ';
  pointer-events: none;
}
.x6-widget-stencil-content {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  height: auto;
  overflow-x: hidden;
  overflow-y: auto;
}
.x6-widget-stencil .x6-node [magnet]:not([magnet='passive']) {
  pointer-events: none;
}
.x6-widget-stencil-group {
  padding: 0;
  padding-bottom: 8px;
  overflow: hidden;
  user-select: none;
}
.x6-widget-stencil-group.collapsed {
  height: auto;
  padding-bottom: 0;
}
.x6-widget-stencil-group-title {
  position: relative;
  margin-top: 0;
  margin-bottom: 0;
  padding: 4px;
  cursor: pointer;
}
.x6-widget-stencil-title,
.x6-widget-stencil-group > .x6-widget-stencil-group-title {
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
  user-select: none;
}
.x6-widget-stencil .unmatched {
  opacity: 0.3;
}
.x6-widget-stencil .x6-node.unmatched {
  display: none;
}
.x6-widget-stencil-group.unmatched {
  display: none;
}
.x6-widget-stencil-search-text {
  position: relative;
  z-index: 1;
  box-sizing: border-box;
  width: 100%;
  height: 30px;
  max-height: 30px;
  line-height: 30px;
  outline: 0;
}
.x6-widget-stencil.not-found::after {
  opacity: 1;
  content: attr(data-not-found-text);
}
.x6-widget-stencil.not-found.searchable::after {
  top: 30px;
}
.x6-widget-stencil.not-found.searchable.collapsable::after {
  top: 50px;
}
.x6-widget-stencil {
  color: #333;
  background: #f5f5f5;
}
.x6-widget-stencil-content {
  position: absolute;
}
.x6-widget-stencil.collapsable > .x6-widget-stencil-content {
  top: 32px;
}
.x6-widget-stencil.searchable > .x6-widget-stencil-content {
  top: 80px;
}
.x6-widget-stencil.not-found::after {
  position: absolute;
}
.x6-widget-stencil.not-found.searchable.collapsable::after {
  top: 80px;
}
.x6-widget-stencil.not-found.searchable::after {
  top: 60px;
}
.x6-widget-stencil-group {
  height: auto;
  margin-bottom: 1px;
  padding: 0;
  transition: none;
}
.x6-widget-stencil-group .x6-graph {
  background: transparent;
  box-shadow: none;
}
.x6-widget-stencil-group.collapsed {
  height: auto;
  max-height: 31px;
}
.x6-widget-stencil-title,
.x6-widget-stencil-group > .x6-widget-stencil-group-title {
  position: relative;
  left: 0;
  box-sizing: border-box;
  width: 100%;
  height: 32px;
  padding: 0 5px 0 8px;
  color: #666;
  font-weight: 700;
  font-size: 12px;
  line-height: 32px;
  cursor: default;
  transition: all 0.3;
}
.x6-widget-stencil-title:hover,
.x6-widget-stencil-group > .x6-widget-stencil-group-title:hover {
  color: #444;
}
.x6-widget-stencil-title {
  background: #e9e9e9;
}
.x6-widget-stencil-group > .x6-widget-stencil-group-title {
  background: #ededed;
}
.x6-widget-stencil.collapsable > .x6-widget-stencil-title,
.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title {
  padding-left: 32px;
  cursor: pointer;
}
.x6-widget-stencil.collapsable > .x6-widget-stencil-title::before,
.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title::before {
  position: absolute;
  top: 6px;
  left: 8px;
  display: block;
  width: 18px;
  height: 18px;
  margin: 0;
  padding: 0;
  background-color: transparent;
  background-repeat: no-repeat;
  background-position: 0 0;
  border: none;
  content: ' ';
}
.x6-widget-stencil.collapsable > .x6-widget-stencil-title::before,
.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title::before {
  background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJub256ZXJvIj48cGF0aCBkPSJNOS4zNzUuNUM0LjY4Ny41Ljg3NSA0LjMxMy44NzUgOWMwIDQuNjg4IDMuODEyIDguNSA4LjUgOC41IDQuNjg3IDAgOC41LTMuODEyIDguNS04LjUgMC00LjY4Ny0zLjgxMy04LjUtOC41LTguNXptMCAxNS44ODZDNS4zMDMgMTYuMzg2IDEuOTkgMTMuMDcyIDEuOTkgOXMzLjMxMi03LjM4NSA3LjM4NS03LjM4NVMxNi43NiA0LjkyOCAxNi43NiA5YzAgNC4wNzItMy4zMTMgNy4zODYtNy4zODUgNy4zODZ6Ii8+PHBhdGggZD0iTTEyLjc1MyA4LjQ0M0g1Ljk5N2EuNTU4LjU1OCAwIDAwMCAxLjExNmg2Ljc1NmEuNTU4LjU1OCAwIDAwMC0xLjExNnoiLz48L2c+PC9zdmc+');
  opacity: 0.4;
  transition: all 0.3s;
}
.x6-widget-stencil.collapsable > .x6-widget-stencil-title:hover::before,
.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title:hover::before {
  opacity: 0.6;
}
.x6-widget-stencil.collapsable.collapsed > .x6-widget-stencil-title::before,
.x6-widget-stencil-group.collapsable.collapsed > .x6-widget-stencil-group-title::before {
  background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJub256ZXJvIj48cGF0aCBkPSJNOS4zNzUuNUM0LjY4Ny41Ljg3NSA0LjMxMy44NzUgOWMwIDQuNjg4IDMuODEyIDguNSA4LjUgOC41IDQuNjg3IDAgOC41LTMuODEyIDguNS04LjUgMC00LjY4Ny0zLjgxMy04LjUtOC41LTguNXptMCAxNS44ODZDNS4zMDMgMTYuMzg2IDEuOTkgMTMuMDcyIDEuOTkgOXMzLjMxMi03LjM4NSA3LjM4NS03LjM4NVMxNi43NiA0LjkyOCAxNi43NiA5YzAgNC4wNzItMy4zMTMgNy4zODYtNy4zODUgNy4zODZ6Ii8+PHBhdGggZD0iTTEyLjc1MyA4LjQ0M0g1Ljk5N2EuNTU4LjU1OCAwIDAwMCAxLjExNmg2Ljc1NmEuNTU4LjU1OCAwIDAwMC0xLjExNnoiLz48cGF0aCBkPSJNOC44MTcgNS42MjN2Ni43NTZhLjU1OC41NTggMCAwMDEuMTE2IDBWNS42MjNhLjU1OC41NTggMCAxMC0xLjExNiAweiIvPjwvZz48L3N2Zz4=');
  opacity: 0.4;
}
.x6-widget-stencil.collapsable.collapsed > .x6-widget-stencil-title:hover::before,
.x6-widget-stencil-group.collapsable.collapsed > .x6-widget-stencil-group-title:hover::before {
  opacity: 0.6;
}
.x6-widget-stencil input[type='search'] {
  appearance: textfield;
}
.x6-widget-stencil input[type='search']::-webkit-search-cancel-button,
.x6-widget-stencil input[type='search']::-webkit-search-decoration {
  appearance: none;
}
.x6-widget-stencil-search-text {
  display: block;
  width: 90%;
  margin: 8px 5%;
  padding-left: 8px;
  color: #333;
  background: #fff;
  border: 1px solid #e9e9e9;
  border-radius: 12px;
  outline: 0;
}
.x6-widget-stencil-search-text:focus {
  outline: 0;
}
.x6-widget-stencil::after {
  color: #808080;
  font-weight: 600;
  font-size: 12px;
  background: 0 0;
}
`;var n=function(r,i,a,l){var d=arguments.length,u=d<3?i:l===null?l=Object.getOwnPropertyDescriptor(i,a):l,g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(r,i,a,l);else for(var m=r.length-1;m>=0;m--)(g=r[m])&&(u=(d<3?g(u):d>3?g(i,a,u):g(i,a))||u);return d>3&&u&&Object.defineProperty(i,a,u),u};class t extends o.G7{get targetScroller(){return this.options.target.getPlugin("scroller")}get targetGraph(){return this.options.target}get targetModel(){return this.targetGraph.model}constructor(i={}){super(),this.name="stencil",o.mf.ensure(this.name,h),this.graphs={},this.groups={},this.options=Object.assign(Object.assign({},t.defaultOptions),i),this.init()}init(){this.dnd=new x(this.options),this.onSearch=o.Iw.debounce(this.onSearch,200),this.initContainer(),this.initSearch(),this.initContent(),this.initGroups(),this.setTitle(),this.startListening()}load(i,a){return Array.isArray(i)?this.loadGroup(i,a):this.options.groups&&Object.keys(this.options.groups).forEach(l=>{i[l]&&this.loadGroup(i[l],l)}),this}unload(i,a){return Array.isArray(i)?this.loadGroup(i,a,!0):this.options.groups&&Object.keys(this.options.groups).forEach(l=>{i[l]&&this.loadGroup(i[l],l,!0)}),this}toggleGroup(i){return this.isGroupCollapsed(i)?this.expandGroup(i):this.collapseGroup(i),this}collapseGroup(i){if(this.isGroupCollapsable(i)){const a=this.groups[i];a&&!this.isGroupCollapsed(i)&&(this.trigger("group:collapse",{name:i}),o.is.addClass(a,"collapsed"))}return this}expandGroup(i){if(this.isGroupCollapsable(i)){const a=this.groups[i];a&&this.isGroupCollapsed(i)&&(this.trigger("group:expand",{name:i}),o.is.removeClass(a,"collapsed"))}return this}isGroupCollapsable(i){const a=this.groups[i];return o.is.hasClass(a,"collapsable")}isGroupCollapsed(i){const a=this.groups[i];return a&&o.is.hasClass(a,"collapsed")}collapseGroups(){return Object.keys(this.groups).forEach(i=>this.collapseGroup(i)),this}expandGroups(){return Object.keys(this.groups).forEach(i=>this.expandGroup(i)),this}resizeGroup(i,a){const l=this.graphs[i];return l&&l.resize(a.width,a.height),this}addGroup(i){const a=Array.isArray(i)?i:[i];this.options.groups?this.options.groups.push(...a):this.options.groups=a,a.forEach(l=>this.initGroup(l))}removeGroup(i){const a=Array.isArray(i)?i:[i];this.options.groups&&(this.options.groups=this.options.groups.filter(l=>!a.includes(l.name)),a.forEach(l=>{const d=this.graphs[l];this.unregisterGraphEvents(d),d.dispose(),delete this.graphs[l];const u=this.groups[l];o.is.remove(u),delete this.groups[l]}))}initContainer(){this.container=document.createElement("div"),o.is.addClass(this.container,this.prefixClassName(e.base)),o.is.attr(this.container,"data-not-found-text",this.options.notFoundText||"No matches found")}initContent(){this.content=document.createElement("div"),o.is.addClass(this.content,this.prefixClassName(e.content)),o.is.appendTo(this.content,this.container)}initSearch(){this.options.search&&(o.is.addClass(this.container,"searchable"),o.is.append(this.container,this.renderSearch()))}initGroup(i){const a=this.options.stencilGraphOptions||{},l=document.createElement("div");o.is.addClass(l,this.prefixClassName(e.group)),o.is.attr(l,"data-name",i.name),(i.collapsable==null&&this.options.collapsable||i.collapsable!==!1)&&o.is.addClass(l,"collapsable"),o.is.toggleClass(l,"collapsed",i.collapsed===!0);const d=document.createElement("h3");o.is.addClass(d,this.prefixClassName(e.groupTitle)),d.innerHTML=i.title||i.name;const u=document.createElement("div");o.is.addClass(u,this.prefixClassName(e.groupContent));const g=i.graphOptions,m=new o.kJ(Object.assign(Object.assign(Object.assign({},a),g),{container:document.createElement("div"),model:a.model||new o.Hn,width:i.graphWidth||this.options.stencilGraphWidth,height:i.graphHeight||this.options.stencilGraphHeight,interacting:!1,preventDefaultBlankAction:!1}));this.registerGraphEvents(m),o.is.append(u,m.container),o.is.append(l,[d,u]),o.is.appendTo(l,this.content),this.groups[i.name]=l,this.graphs[i.name]=m}initGroups(){if(this.clearGroups(),this.setCollapsableState(),this.options.groups&&this.options.groups.length)this.options.groups.forEach(i=>{this.initGroup(i)});else{const i=this.options.stencilGraphOptions||{},a=new o.kJ(Object.assign(Object.assign({},i),{container:document.createElement("div"),model:i.model||new o.Hn,width:this.options.stencilGraphWidth,height:this.options.stencilGraphHeight,interacting:!1,preventDefaultBlankAction:!1}));o.is.append(this.content,a.container),this.graphs[s.defaultGroupName]=a}}setCollapsableState(){this.options.collapsable=this.options.collapsable&&this.options.groups&&this.options.groups.some(i=>i.collapsable!==!1),this.options.collapsable?(o.is.addClass(this.container,"collapsable"),this.options.groups&&this.options.groups.every(a=>a.collapsed||a.collapsable===!1)?o.is.addClass(this.container,"collapsed"):o.is.removeClass(this.container,"collapsed")):o.is.removeClass(this.container,"collapsable")}setTitle(){const i=document.createElement("div");o.is.addClass(i,this.prefixClassName(e.title)),i.innerHTML=this.options.title,o.is.appendTo(i,this.container)}renderSearch(){const i=document.createElement("div");o.is.addClass(i,this.prefixClassName(e.search));const a=document.createElement("input");return o.is.attr(a,{type:"search",placeholder:this.options.placeholder||"Search"}),o.is.addClass(a,this.prefixClassName(e.searchText)),o.is.append(i,a),i}startListening(){const i=this.prefixClassName(e.title),a=this.prefixClassName(e.searchText),l=this.prefixClassName(e.groupTitle);this.delegateEvents({[`click .${i}`]:"onTitleClick",[`touchstart .${i}`]:"onTitleClick",[`click .${l}`]:"onGroupTitleClick",[`touchstart .${l}`]:"onGroupTitleClick",[`input .${a}`]:"onSearch",[`focusin .${a}`]:"onSearchFocusIn",[`focusout .${a}`]:"onSearchFocusOut"})}stopListening(){this.undelegateEvents()}registerGraphEvents(i){i.on("cell:mousedown",this.onDragStart,this)}unregisterGraphEvents(i){i.off("cell:mousedown",this.onDragStart,this)}loadGroup(i,a,l){const d=this.getModel(a);if(d){const y=i.map(b=>o.NB.isNode(b)?b:o.NB.create(b));l===!0?d.removeCells(y):d.resetCells(y)}const u=this.getGroup(a);let g=this.options.stencilGraphHeight;u&&u.graphHeight!=null&&(g=u.graphHeight);const m=u&&u.layout||this.options.layout;if(m&&d&&o.Iw.call(m,this,d,u),!g){const y=this.getGraph(a);y.fitToContent({minWidth:y.options.width,gridHeight:1,padding:u&&u.graphPadding||this.options.stencilGraphPadding||10})}return this}onDragStart(i){const{e:a,node:l}=i,d=this.getGroupByNode(l);d&&d.nodeMovable===!1||this.dnd.start(l,a)}filter(i,a){const l=Object.keys(this.graphs).reduce((d,u)=>{const g=this.graphs[u],m=u===s.defaultGroupName?null:u,y=g.model.getNodes().filter(c=>{let f=!1;typeof a=="function"?f=o.Iw.call(a,this,c,i,m,this):typeof a=="boolean"?f=a:f=this.isCellMatched(c,i,a,i.toLowerCase()!==i);const C=g.renderer.findViewByCell(c);return C&&o.is.toggleClass(C.container,"unmatched",!f),f}),b=y.length>0,S=this.options,v=new o.Hn;return v.resetCells(y),S.layout&&o.Iw.call(S.layout,this,v,this.getGroup(u)),this.groups[u]&&o.is.toggleClass(this.groups[u],"unmatched",!b),g.fitToContent({gridWidth:1,gridHeight:1,padding:S.stencilGraphPadding||10}),d||b},!1);o.is.toggleClass(this.container,"not-found",!l)}isCellMatched(i,a,l,d){return a&&l?Object.keys(l).some(u=>{if(u==="*"||i.shape===u){const g=l[u];return typeof g=="boolean"?g:(Array.isArray(g)?g:[g]).some(y=>{let b=i.getPropByPath(y);return b!=null?(b=`${b}`,d||(b=b.toLowerCase()),b.indexOf(a)>=0):!1})}return!1}):!0}onSearch(i){this.filter(i.target.value,this.options.search)}onSearchFocusIn(){o.is.addClass(this.container,"is-focused")}onSearchFocusOut(){o.is.removeClass(this.container,"is-focused")}onTitleClick(){this.options.collapsable&&(o.is.toggleClass(this.container,"collapsed"),o.is.hasClass(this.container,"collapsed")?this.collapseGroups():this.expandGroups())}onGroupTitleClick(i){const a=i.target.closest(`.${this.prefixClassName(e.group)}`);a&&this.toggleGroup(o.is.attr(a,"data-name")||"");const l=Object.keys(this.groups).every(d=>{const u=this.getGroup(d),g=this.groups[d];return u&&u.collapsable===!1||o.is.hasClass(g,"collapsed")});o.is.toggleClass(this.container,"collapsed",l)}getModel(i){const a=this.getGraph(i);return a?a.model:null}getGraph(i){return this.graphs[i||s.defaultGroupName]}getGroup(i){const a=this.options.groups;return i!=null&&a&&a.length?a.find(l=>l.name===i):null}getGroupByNode(i){const a=this.options.groups;return a?a.find(l=>{const d=this.getModel(l.name);return d?d.has(i.id):!1}):null}clearGroups(){Object.keys(this.graphs).forEach(i=>{const a=this.graphs[i];this.unregisterGraphEvents(a),a.dispose()}),Object.keys(this.groups).forEach(i=>{const a=this.groups[i];o.is.remove(a)}),this.graphs={},this.groups={}}onRemove(){this.clearGroups(),this.dnd.remove(),this.stopListening(),this.undelegateDocumentEvents()}dispose(){this.remove(),o.mf.clean(this.name)}}n([o.G7.dispose()],t.prototype,"dispose",null),function(r){r.defaultOptions=Object.assign({stencilGraphWidth:200,stencilGraphHeight:800,title:"Stencil",collapsable:!1,placeholder:"Search",notFoundText:"No matches found",layout(i,a){const l={columnWidth:this.options.stencilGraphWidth/2-10,columns:2,rowHeight:80,resizeToFit:!1,dx:10,dy:10};w(i,Object.assign(Object.assign(Object.assign({},l),this.options.layoutOptions),a?a.layoutOptions:{}))}},x.defaults)}(t||(t={}));var e;(function(r){r.base="widget-stencil",r.title=`${r.base}-title`,r.search=`${r.base}-search`,r.searchText=`${r.search}-text`,r.content=`${r.base}-content`,r.group=`${r.base}-group`,r.groupTitle=`${r.group}-title`,r.groupContent=`${r.group}-content`})(e||(e={}));var s;(function(r){r.defaultGroupName="__default__"})(s||(s={}))},98539:function(Y,U,z){"use strict";z.d(U,{w:function(){return h}});var o=z(49188),$=function(n,t,e,s){var r=arguments.length,i=r<3?t:s===null?s=Object.getOwnPropertyDescriptor(t,e):s,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,t,e,s);else for(var l=n.length-1;l>=0;l--)(a=n[l])&&(i=(r<3?a(i):r>3?a(t,e,i):a(t,e))||i);return r>3&&i&&Object.defineProperty(t,e,i),i};class R extends o.G7{get model(){return this.graph.model}get view(){return this.graph.renderer.findViewByCell(this.node)}get containerClassName(){return this.prefixClassName("widget-transform")}get resizeClassName(){return`${this.containerClassName}-resize`}get rotateClassName(){return`${this.containerClassName}-rotate`}constructor(t,e,s){super(),this.node=e,this.graph=s,this.options=Object.assign(Object.assign({},x.defaultOptions),t),this.render(),this.startListening()}startListening(){this.delegateEvents({[`mousedown .${this.resizeClassName}`]:"startResizing",[`touchstart .${this.resizeClassName}`]:"startResizing",[`mousedown .${this.rotateClassName}`]:"startRotating",[`touchstart .${this.rotateClassName}`]:"startRotating"}),this.model.on("*",this.update,this),this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this),this.node.on("removed",this.remove,this),this.model.on("reseted",this.remove,this),this.view.on("cell:knob:mousedown",this.onKnobMouseDown,this),this.view.on("cell:knob:mouseup",this.onKnobMouseUp,this)}stopListening(){this.undelegateEvents(),this.model.off("*",this.update,this),this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this),this.node.off("removed",this.remove,this),this.model.off("reseted",this.remove,this),this.view.off("cell:knob:mousedown",this.onKnobMouseDown,this),this.view.off("cell:knob:mouseup",this.onKnobMouseUp,this)}renderHandles(){this.container=document.createElement("div");const t=document.createElement("div");o.is.attr(t,"draggable","false");const e=t.cloneNode(!0);o.is.addClass(e,this.rotateClassName);const s=x.POSITIONS.map(r=>{const i=t.cloneNode(!0);return o.is.addClass(i,this.resizeClassName),o.is.attr(i,"data-position",r),i});this.empty(),o.is.append(this.container,[...s,e])}render(){return this.renderHandles(),this.view&&this.view.addClass(x.NODE_CLS),o.is.addClass(this.container,this.containerClassName),o.is.toggleClass(this.container,"no-orth-resize",this.options.preserveAspectRatio||!this.options.orthogonalResizing),o.is.toggleClass(this.container,"no-resize",!this.options.resizable),o.is.toggleClass(this.container,"no-rotate",!this.options.rotatable),this.options.className&&o.is.addClass(this.container,this.options.className),this.graph.container.appendChild(this.container),this.update()}update(){const t=this.graph.matrix(),e=this.node.getBBox();e.x*=t.a,e.x+=t.e,e.y*=t.d,e.y+=t.f,e.width*=t.a,e.height*=t.d;const s=o.RZ.normalize(this.node.getAngle()),r=s!==0?`rotate(${s}deg)`:"";return o.is.css(this.container,{transform:r,width:e.width,height:e.height,left:e.x,top:e.y}),this.updateResizerDirections(),this}remove(){return this.view&&this.view.removeClass(x.NODE_CLS),super.remove()}onKnobMouseDown(){this.startHandle()}onKnobMouseUp(){this.stopHandle()}updateResizerDirections(){const t=o.RZ.normalize(this.node.getAngle()),e=Math.floor(t*(x.DIRECTIONS.length/360));if(e!==this.prevShift){const s=x.DIRECTIONS.slice(e).concat(x.DIRECTIONS.slice(0,e)),r=a=>`${this.containerClassName}-cursor-${a}`;this.container.querySelectorAll(`.${this.resizeClassName}`).forEach((a,l)=>{o.is.removeClass(a,x.DIRECTIONS.map(d=>r(d)).join(" ")),o.is.addClass(a,r(s[l]))}),this.prevShift=e}}getTrueDirection(t){const e=o.RZ.normalize(this.node.getAngle());let s=x.POSITIONS.indexOf(t);return s+=Math.floor(e*(x.POSITIONS.length/360)),s%=x.POSITIONS.length,x.POSITIONS[s]}toValidResizeDirection(t){return{top:"top-left",bottom:"bottom-right",left:"bottom-left",right:"top-right"}[t]||t}startResizing(t){t.stopPropagation(),this.model.startBatch("resize",{cid:this.cid});const e=o.is.attr(t.target,"data-position");this.prepareResizing(t,e),this.startAction(t)}prepareResizing(t,e){const s=this.getTrueDirection(e);let r=0,i=0;e.split("-").forEach(u=>{r={left:-1,right:1}[u]||r,i={top:-1,bottom:1}[u]||i});const a=this.toValidResizeDirection(e),l={"top-right":"bottomLeft","top-left":"bottomRight","bottom-left":"topRight","bottom-right":"topLeft"}[a],d=o.RZ.normalize(this.node.getAngle());this.setEventData(t,{selector:l,direction:a,trueDirection:s,relativeDirection:e,angle:d,resizeX:r,resizeY:i,action:"resizing"})}startRotating(t){t.stopPropagation(),this.model.startBatch("rotate",{cid:this.cid});const e=this.node.getBBox().getCenter(),s=this.normalizeEvent(t),r=this.graph.snapToGrid(s.clientX,s.clientY);this.setEventData(t,{center:e,action:"rotating",angle:o.RZ.normalize(this.node.getAngle()),start:o.E9.create(r).theta(e)}),this.startAction(t)}onMouseMove(t){const e=this.graph.findViewByCell(this.node);let s=this.getEventData(t);if(s.action){const r=this.normalizeEvent(t);let i=r.clientX,a=r.clientY;const l=this.graph.getPlugin("scroller"),d=this.options.restrictedResizing;if(d===!0||typeof d=="number"){const b=d===!0?0:d,S=l?Math.max(b,8):b,v=this.graph.container.getBoundingClientRect();i=o.GH.clamp(i,v.left+S,v.right-S),a=o.GH.clamp(a,v.top+S,v.bottom-S)}else this.options.autoScrollOnResizing&&l&&l.autoScroll(i,a);const u=this.graph.snapToGrid(i,a),g=this.graph.getGridSize(),m=this.node,y=this.options;if(s.action==="resizing"){s=s,s.resized||(e&&(e.addClass("node-resizing"),this.notify("node:resize",t,e)),s.resized=!0);const b=m.getBBox(),S=o.E9.create(u).rotate(s.angle,b.getCenter()).diff(b[s.selector]);let v=s.resizeX?S.x*s.resizeX:b.width,c=s.resizeY?S.y*s.resizeY:b.height;const f=v,C=c;if(v=o.Z4.snapToGrid(v,g),c=o.Z4.snapToGrid(c,g),v=Math.max(v,y.minWidth||g),c=Math.max(c,y.minHeight||g),v=Math.min(v,y.maxWidth||1/0),c=Math.min(c,y.maxHeight||1/0),y.preserveAspectRatio){const M=b.width*c/b.height,P=b.height*v/b.width;v<M?c=P:v=M}const O=s.relativeDirection;if(y.allowReverse&&(f<=-v||C<=-c)){let M;O==="left"?f<=-v&&(M="right"):O==="right"?f<=-v&&(M="left"):O==="top"?C<=-c&&(M="bottom"):O==="bottom"?C<=-c&&(M="top"):O==="top-left"?f<=-v&&C<=-c?M="bottom-right":f<=-v?M="top-right":C<=-c&&(M="bottom-left"):O==="top-right"?f<=-v&&C<=-c?M="bottom-left":f<=-v?M="top-left":C<=-c&&(M="bottom-right"):O==="bottom-left"?f<=-v&&C<=-c?M="top-right":f<=-v?M="bottom-right":C<=-c&&(M="top-left"):O==="bottom-right"&&(f<=-v&&C<=-c?M="top-left":f<=-v?M="bottom-left":C<=-c&&(M="top-right"));const P=M;this.stopHandle();const I=this.container.querySelector(`.${this.resizeClassName}[data-position="${P}"]`);this.startHandle(I),this.prepareResizing(t,P),this.onMouseMove(t)}if(b.width!==v||b.height!==c){const M={ui:!0,direction:s.direction,relativeDirection:s.relativeDirection,trueDirection:s.trueDirection,minWidth:y.minWidth,minHeight:y.minHeight,maxWidth:y.maxWidth,maxHeight:y.maxHeight,preserveAspectRatio:y.preserveAspectRatio===!0};m.resize(v,c,M),this.notify("node:resizing",t,e)}}else if(s.action==="rotating"){s=s,s.rotated||(e&&(e.addClass("node-rotating"),this.notify("node:rotate",t,e)),s.rotated=!0);const b=m.getAngle(),S=s.start-o.E9.create(u).theta(s.center);let v=s.angle+S;y.rotateGrid&&(v=o.Z4.snapToGrid(v,y.rotateGrid)),v=o.RZ.normalize(v),b!==v&&(m.rotate(v,{absolute:!0}),this.notify("node:rotating",t,e))}}}onMouseUp(t){const e=this.getEventData(t);e.action&&(this.stopAction(t),this.model.stopBatch(e.action==="resizing"?"resize":"rotate",{cid:this.cid}))}startHandle(t){if(this.handle=t||null,o.is.addClass(this.container,`${this.containerClassName}-active`),t){o.is.addClass(t,`${this.containerClassName}-active-handle`);const e=t.getAttribute("data-position");if(e){const s=x.DIRECTIONS[x.POSITIONS.indexOf(e)];o.is.addClass(this.container,`${this.containerClassName}-cursor-${s}`)}}}stopHandle(){if(o.is.removeClass(this.container,`${this.containerClassName}-active`),this.handle){o.is.removeClass(this.handle,`${this.containerClassName}-active-handle`);const t=this.handle.getAttribute("data-position");if(t){const e=x.DIRECTIONS[x.POSITIONS.indexOf(t)];o.is.removeClass(this.container,`${this.containerClassName}-cursor-${e}`)}this.handle=null}}startAction(t){this.startHandle(t.target),this.graph.view.undelegateEvents(),this.delegateDocumentEvents(x.documentEvents,t.data)}stopAction(t){this.stopHandle(),this.undelegateDocumentEvents(),this.graph.view.delegateEvents();const e=this.graph.findViewByCell(this.node),s=this.getEventData(t);e&&(e.removeClass(`node-${s.action}`),s.action==="resizing"&&s.resized?this.notify("node:resized",t,e):s.action==="rotating"&&s.rotated&&this.notify("node:rotated",t,e))}notify(t,e,s,r={}){if(s){const i=s.graph,a=i.view.normalizeEvent(e),l=i.snapToGrid(a.clientX,a.clientY);this.trigger(t,Object.assign({e:a,view:s,node:s.cell,cell:s.cell,x:l.x,y:l.y},r))}}dispose(){this.stopListening(),this.remove(),this.off()}}$([o.G7.dispose()],R.prototype,"dispose",null);var x;(function(n){n.NODE_CLS="has-widget-transform",n.DIRECTIONS=["nw","n","ne","e","se","s","sw","w"],n.POSITIONS=["top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"],n.documentEvents={mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp"},n.defaultOptions={minWidth:0,minHeight:0,maxWidth:1/0,maxHeight:1/0,rotateGrid:15,rotatable:!0,preserveAspectRatio:!1,orthogonalResizing:!0,restrictedResizing:!1,autoScrollOnResizing:!0,allowReverse:!0}})(x||(x={}));const w=`.x6-widget-transform {
  position: absolute;
  box-sizing: content-box !important;
  margin: -5px 0 0 -5px;
  padding: 4px;
  border: 1px dashed #000;
  border-radius: 5px;
  user-select: none;
  pointer-events: none;
}
.x6-widget-transform > div {
  position: absolute;
  box-sizing: border-box;
  background-color: #fff;
  border: 1px solid #000;
  transition: background-color 0.2s;
  pointer-events: auto;
  -webkit-user-drag: none;
  user-drag: none;
  /* stylelint-disable-line */
}
.x6-widget-transform > div:hover {
  background-color: #d3d3d3;
}
.x6-widget-transform-cursor-n {
  cursor: n-resize;
}
.x6-widget-transform-cursor-s {
  cursor: s-resize;
}
.x6-widget-transform-cursor-e {
  cursor: e-resize;
}
.x6-widget-transform-cursor-w {
  cursor: w-resize;
}
.x6-widget-transform-cursor-ne {
  cursor: ne-resize;
}
.x6-widget-transform-cursor-nw {
  cursor: nw-resize;
}
.x6-widget-transform-cursor-se {
  cursor: se-resize;
}
.x6-widget-transform-cursor-sw {
  cursor: sw-resize;
}
.x6-widget-transform-resize {
  width: 10px;
  height: 10px;
  border-radius: 6px;
}
.x6-widget-transform-resize[data-position='top-left'] {
  top: -5px;
  left: -5px;
}
.x6-widget-transform-resize[data-position='top-right'] {
  top: -5px;
  right: -5px;
}
.x6-widget-transform-resize[data-position='bottom-left'] {
  bottom: -5px;
  left: -5px;
}
.x6-widget-transform-resize[data-position='bottom-right'] {
  right: -5px;
  bottom: -5px;
}
.x6-widget-transform-resize[data-position='top'] {
  top: -5px;
  left: 50%;
  margin-left: -5px;
}
.x6-widget-transform-resize[data-position='bottom'] {
  bottom: -5px;
  left: 50%;
  margin-left: -5px;
}
.x6-widget-transform-resize[data-position='left'] {
  top: 50%;
  left: -5px;
  margin-top: -5px;
}
.x6-widget-transform-resize[data-position='right'] {
  top: 50%;
  right: -5px;
  margin-top: -5px;
}
.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='top'],
.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='bottom'],
.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='left'],
.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='right'] {
  display: none;
}
.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='bottom'],
.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='left'],
.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='right'],
.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='top'] {
  display: none;
}
.x6-widget-transform.no-resize .x6-widget-transform-resize {
  display: none;
}
.x6-widget-transform-rotate {
  top: -20px;
  left: -20px;
  width: 12px;
  height: 12px;
  border-radius: 6px;
  cursor: crosshair;
}
.x6-widget-transform.no-rotate .x6-widget-transform-rotate {
  display: none;
}
.x6-widget-transform-active {
  border-color: transparent;
  pointer-events: all;
}
.x6-widget-transform-active > div {
  display: none;
}
.x6-widget-transform-active > .x6-widget-transform-active-handle {
  display: block;
  background-color: #808080;
}
`;o.kJ.prototype.createTransformWidget=function(n){const t=this.getPlugin("transform");return t&&t.createWidget(n),this},o.kJ.prototype.clearTransformWidgets=function(){const n=this.getPlugin("transform");return n&&n.clearWidgets(),this};var p=function(n,t,e,s){var r=arguments.length,i=r<3?t:s===null?s=Object.getOwnPropertyDescriptor(t,e):s,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,t,e,s);else for(var l=n.length-1;l>=0;l--)(a=n[l])&&(i=(r<3?a(i):r>3?a(t,e,i):a(t,e))||i);return r>3&&i&&Object.defineProperty(t,e,i),i};class h extends o.ew{constructor(t={}){super(),this.name="transform",this.widgets=new Map,this.disabled=!1,this.options=t,o.mf.ensure(this.name,w)}init(t){this.graph=t,!this.disabled&&this.startListening()}startListening(){this.graph.on("node:click",this.onNodeClick,this),this.graph.on("blank:mousedown",this.onBlankMouseDown,this)}stopListening(){this.graph.off("node:click",this.onNodeClick,this),this.graph.off("blank:mousedown",this.onBlankMouseDown,this)}enable(){this.disabled&&(this.disabled=!1,this.startListening())}disable(){this.disabled||(this.disabled=!0,this.stopListening())}isEnabled(){return!this.disabled}createWidget(t){this.clearWidgets();const e=this.createTransform(t);e&&(this.widgets.set(t,e),e.on("*",(s,r)=>{this.trigger(s,r),this.graph.trigger(s,r)}))}onNodeClick({node:t}){this.createWidget(t)}onBlankMouseDown(){this.clearWidgets()}createTransform(t){const e=this.getTransformOptions(t);return e.resizable||e.rotatable?new R(e,t,this.graph):null}getTransformOptions(t){this.options.resizing||(this.options.resizing={enabled:!1}),this.options.rotating||(this.options.rotating={enabled:!1}),typeof this.options.resizing=="boolean"&&(this.options.resizing={enabled:this.options.resizing}),typeof this.options.rotating=="boolean"&&(this.options.rotating={enabled:this.options.rotating});const e=h.parseOptionGroup(this.graph,t,this.options.resizing),s=h.parseOptionGroup(this.graph,t,this.options.rotating);return{resizable:!!e.enabled,minWidth:e.minWidth||0,maxWidth:e.maxWidth||Number.MAX_SAFE_INTEGER,minHeight:e.minHeight||0,maxHeight:e.maxHeight||Number.MAX_SAFE_INTEGER,orthogonalResizing:typeof e.orthogonal=="boolean"?e.orthogonal:!0,restrictedResizing:!!e.restrict,autoScrollOnResizing:typeof e.autoScroll=="boolean"?e.autoScroll:!0,preserveAspectRatio:!!e.preserveAspectRatio,allowReverse:typeof e.allowReverse=="boolean"?e.allowReverse:!0,rotatable:!!s.enabled,rotateGrid:s.grid||15}}clearWidgets(){this.widgets.forEach((t,e)=>{this.graph.getCellById(e.id)&&t.dispose()}),this.widgets.clear()}dispose(){this.clearWidgets(),this.stopListening(),this.off(),o.mf.clean(this.name)}}p([o.ew.dispose()],h.prototype,"dispose",null),function(n){function t(e,s,r){const i={};return Object.keys(r||{}).forEach(a=>{const l=r[a];i[a]=typeof l=="function"?l.call(e,s):l}),i}n.parseOptionGroup=t}(h||(h={}))},76856:function(Y,U,z){"use strict";z.d(U,{Z:function(){return y}});var o=z(85901),$=z(85985),R=z(45629),x=z(38497),w=z(26869),p=z.n(w),h=z(18252),n=z(14502),t=z(57880),e=z(44567),s=z(36563),r=z(47023),i=z(93207),a=function(b,S){var v={};for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&S.indexOf(c)<0&&(v[c]=b[c]);if(b!=null&&typeof Object.getOwnPropertySymbols=="function")for(var f=0,c=Object.getOwnPropertySymbols(b);f<c.length;f++)S.indexOf(c[f])<0&&Object.prototype.propertyIsEnumerable.call(b,c[f])&&(v[c[f]]=b[c[f]]);return v};const l=b=>{const{prefixCls:S,className:v,closeIcon:c,closable:f,type:C,title:O,children:M,footer:P}=b,I=a(b,["prefixCls","className","closeIcon","closable","type","title","children","footer"]),{getPrefixCls:L}=x.useContext(t.E_),V=L(),A=S||L("modal"),J=(0,e.Z)(V),[j,B,H]=(0,i.ZP)(A,J),E=`${A}-confirm`;let N={};return C?N={closable:f!=null?f:!1,title:"",footer:"",children:x.createElement(s.O,Object.assign({},b,{prefixCls:A,confirmPrefixCls:E,rootPrefixCls:V,content:M}))}:N={closable:f!=null?f:!0,title:O,footer:P!==null&&x.createElement(r.$,Object.assign({},b)),children:M},j(x.createElement(h.s,Object.assign({prefixCls:A,className:p()(B,`${A}-pure-panel`,C&&E,C&&`${E}-${C}`,v,H,J)},I,{closeIcon:(0,r.b)(A,c),closable:f},N)))};var d=(0,n.i)(l),u=z(73987);function g(b){return(0,o.ZP)((0,o.uW)(b))}const m=R.Z;m.useModal=u.Z,m.info=function(S){return(0,o.ZP)((0,o.cw)(S))},m.success=function(S){return(0,o.ZP)((0,o.vq)(S))},m.error=function(S){return(0,o.ZP)((0,o.AQ)(S))},m.warning=g,m.warn=g,m.confirm=function(S){return(0,o.ZP)((0,o.Au)(S))},m.destroyAll=function(){for(;$.Z.length;){const S=$.Z.pop();S&&S()}},m.config=o.ai,m._InternalPanelDoNotUseOrYouWillBeFired=d;var y=m},673:function(Y){var U=[],z=[],o="insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).";function $(x,w){if(w=w||{},x===void 0)throw new Error(o);var p=w.prepend===!0?"prepend":"append",h=w.container!==void 0?w.container:document.querySelector("head"),n=U.indexOf(h);n===-1&&(n=U.push(h)-1,z[n]={});var t;return z[n]!==void 0&&z[n][p]!==void 0?t=z[n][p]:(t=z[n][p]=R(),p==="prepend"?h.insertBefore(t,h.childNodes[0]):h.appendChild(t)),x.charCodeAt(0)===65279&&(x=x.substr(1,x.length)),t.styleSheet?t.styleSheet.cssText+=x:t.textContent+=x,t}function R(){var x=document.createElement("style");return x.setAttribute("type","text/css"),x}Y.exports=$,Y.exports.insertCss=$},32260:function(Y,U,z){var o;(function($,R,x){if(!$)return;for(var w={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},p={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},h={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},n={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},t,e=1;e<20;++e)w[111+e]="f"+e;for(e=0;e<=9;++e)w[e+96]=e.toString();function s(c,f,C){if(c.addEventListener){c.addEventListener(f,C,!1);return}c.attachEvent("on"+f,C)}function r(c){if(c.type=="keypress"){var f=String.fromCharCode(c.which);return c.shiftKey||(f=f.toLowerCase()),f}return w[c.which]?w[c.which]:p[c.which]?p[c.which]:String.fromCharCode(c.which).toLowerCase()}function i(c,f){return c.sort().join(",")===f.sort().join(",")}function a(c){var f=[];return c.shiftKey&&f.push("shift"),c.altKey&&f.push("alt"),c.ctrlKey&&f.push("ctrl"),c.metaKey&&f.push("meta"),f}function l(c){if(c.preventDefault){c.preventDefault();return}c.returnValue=!1}function d(c){if(c.stopPropagation){c.stopPropagation();return}c.cancelBubble=!0}function u(c){return c=="shift"||c=="ctrl"||c=="alt"||c=="meta"}function g(){if(!t){t={};for(var c in w)c>95&&c<112||w.hasOwnProperty(c)&&(t[w[c]]=c)}return t}function m(c,f,C){return C||(C=g()[c]?"keydown":"keypress"),C=="keypress"&&f.length&&(C="keydown"),C}function y(c){return c==="+"?["+"]:(c=c.replace(/\+{2}/g,"+plus"),c.split("+"))}function b(c,f){var C,O,M,P=[];for(C=y(c),M=0;M<C.length;++M)O=C[M],n[O]&&(O=n[O]),f&&f!="keypress"&&h[O]&&(O=h[O],P.push("shift")),u(O)&&P.push(O);return f=m(O,P,f),{key:O,modifiers:P,action:f}}function S(c,f){return c===null||c===R?!1:c===f?!0:S(c.parentNode,f)}function v(c){var f=this;if(c=c||R,!(f instanceof v))return new v(c);f.target=c,f._callbacks={},f._directMap={};var C={},O,M=!1,P=!1,I=!1;function L(E){E=E||{};var N=!1,D;for(D in C){if(E[D]){N=!0;continue}C[D]=0}N||(I=!1)}function V(E,N,D,k,G,_){var T,W,F=[],X=D.type;if(!f._callbacks[E])return[];for(X=="keyup"&&u(E)&&(N=[E]),T=0;T<f._callbacks[E].length;++T)if(W=f._callbacks[E][T],!(!k&&W.seq&&C[W.seq]!=W.level)&&X==W.action&&(X=="keypress"&&!D.metaKey&&!D.ctrlKey||i(N,W.modifiers))){var K=!k&&W.combo==G,Z=k&&W.seq==k&&W.level==_;(K||Z)&&f._callbacks[E].splice(T,1),F.push(W)}return F}function A(E,N,D,k){f.stopCallback(N,N.target||N.srcElement,D,k)||E(N,D)===!1&&(l(N),d(N))}f._handleKey=function(E,N,D){var k=V(E,N,D),G,_={},T=0,W=!1;for(G=0;G<k.length;++G)k[G].seq&&(T=Math.max(T,k[G].level));for(G=0;G<k.length;++G){if(k[G].seq){if(k[G].level!=T)continue;W=!0,_[k[G].seq]=1,A(k[G].callback,D,k[G].combo,k[G].seq);continue}W||A(k[G].callback,D,k[G].combo)}var F=D.type=="keypress"&&P;D.type==I&&!u(E)&&!F&&L(_),P=W&&D.type=="keydown"};function J(E){typeof E.which!="number"&&(E.which=E.keyCode);var N=r(E);if(N){if(E.type=="keyup"&&M===N){M=!1;return}f.handleKey(N,a(E),E)}}function j(){clearTimeout(O),O=setTimeout(L,1e3)}function B(E,N,D,k){C[E]=0;function G(X){return function(){I=X,++C[E],j()}}function _(X){A(D,X,E),k!=="keyup"&&(M=r(X)),setTimeout(L,10)}for(var T=0;T<N.length;++T){var W=T+1===N.length,F=W?_:G(k||b(N[T+1]).action);H(N[T],F,k,E,T)}}function H(E,N,D,k,G){f._directMap[E+":"+D]=N,E=E.replace(/\s+/g," ");var _=E.split(" "),T;if(_.length>1){B(E,_,N,D);return}T=b(E,D),f._callbacks[T.key]=f._callbacks[T.key]||[],V(T.key,T.modifiers,{type:T.action},k,E,G),f._callbacks[T.key][k?"unshift":"push"]({callback:N,modifiers:T.modifiers,action:T.action,seq:k,level:G,combo:E})}f._bindMultiple=function(E,N,D){for(var k=0;k<E.length;++k)H(E[k],N,D)},s(c,"keypress",J),s(c,"keydown",J),s(c,"keyup",J)}v.prototype.bind=function(c,f,C){var O=this;return c=c instanceof Array?c:[c],O._bindMultiple.call(O,c,f,C),O},v.prototype.unbind=function(c,f){var C=this;return C.bind.call(C,c,function(){},f)},v.prototype.trigger=function(c,f){var C=this;return C._directMap[c+":"+f]&&C._directMap[c+":"+f]({},c),C},v.prototype.reset=function(){var c=this;return c._callbacks={},c._directMap={},c},v.prototype.stopCallback=function(c,f){var C=this;if((" "+f.className+" ").indexOf(" mousetrap ")>-1||S(f,C.target))return!1;if("composedPath"in c&&typeof c.composedPath=="function"){var O=c.composedPath()[0];O!==c.target&&(f=O)}return f.tagName=="INPUT"||f.tagName=="SELECT"||f.tagName=="TEXTAREA"||f.isContentEditable},v.prototype.handleKey=function(){var c=this;return c._handleKey.apply(c,arguments)},v.addKeycodes=function(c){for(var f in c)c.hasOwnProperty(f)&&(w[f]=c[f]);t=null},v.init=function(){var c=v(R);for(var f in c)f.charAt(0)!=="_"&&(v[f]=function(C){return function(){return c[C].apply(c,arguments)}}(f))},v.init(),$.Mousetrap=v,Y.exports&&(Y.exports=v),o=function(){return v}.call(U,z,U,Y),o!==x&&(Y.exports=o)})(typeof window!="undefined"?window:null,typeof window!="undefined"?document:null)}}]);
